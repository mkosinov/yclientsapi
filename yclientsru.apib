FORMAT: 1A
HOST: https://api.yclients.com/api/v1

[email]:  support@yclients.com
[api_host]: https://api.yclients.com/api/v1

# YCLIENTS REST API

Это официальный документ, описывающий взаимодействие с сервисом онлайн-бронирования YCLIENTS.

При проектировании методов, мы старались придерживаться архитектуры [REST](https://ru.wikipedia.org/wiki/REST)

Все обращения к протоколу осуществляются с использованием SSL-шифрования.

**Лимиты**
200 запросов в минуту, или 5 запросов в секунду на один IP-адрес.

**URL API:**
https://api.yclients.com

_Вопросы, пожелания, сообщения об ошибках можно направлять по адресу support@yclients.com_

API позволяет сторонним разработчикам выполнять
большинство операций с платформой YCLIENTS.

**Внимание! Большинство обращений в техническую поддержку связаны
с тем, что разработчики не читают документацию.
Обязательно прочтите раздел INTRODUCTION полностью и внимательно ознакомьтесь с информацией
на других ресурсах, на которые мы ссылаемся. Для тестирования запросов мы рекомендуем использовать сервис [Postman](https://www.getpostman.com/),
при обращении в службу поддержки используйте скриншоты из Postman.**


## SDK

Ниже приведены ссылки на SDK сторонних разработчиков. В ближайшее время мы планируем подключиться к их улучшению и развитию. И всегда приветствуем Opensource инициативы, если у вас есть возможности и желание развивать одну из предложенных библиотек это принесет общую пользу. Если решите создать свою - сообщите нам о ней, мы примем участие в развитии и разместим ссылку на нее здесь.

**PHP:**
https://github.com/SlowProg/yclients-api

**PHP LARAVEL:**
https://github.com/robotNIXX/yclients-laravel

**PHP LARAVEL (2):**
https://github.com/e-nikitin/yclients-laravel-sdk

## Кейсы интеграции с YCLIENTS

1. Обмен данными с программами для автоматизации и учета.
2. Интеграция онлайн-записи в сторонние сайты и мобильные приложения (каталоги компаний, приложения компаний и т.п.)

## Общее описание обмена данными с YCLIENTS

API для интеграции с YCLEINTS содержит две группы методов:
1. _Методы требующие авторизацию пользователя и авторизацию партнера_
2. _Методы не требующие авторизации пользователя, но требующие авторизацию партнера_

### Авторизация запросов API

Для обращений и к первой и ко второй группе методов
требуется *авторизация партнера*. Т.е. передача
уникального hash-ключа партнера.

Авторизация запросов к API производится в соответствии с [RFC 6749 "Resource Owner Password Credentials Grant"](https://tools.ietf.org/html/rfc6749#section-4.3).
При запросах к API в HTTP заголовок Authorization должен быть включен ключ доступа в следующем формате:

```
Authorization: Bearer <partner token>
```

Для того, чтобы
получить этот ключ, свяжитесь с нами по адресу
support@yclients.com и укажите:
1. ID вашей компании
2. Ваши контакты для связи
3. Для каких целей вы планируете использовать API.

Для получения API-ключа пользователя используйте метод **auth**. Передавать сам ключ нужно также в заголовке запроса (после ключа партнера через запятую):

```
Authorization: Bearer <partner token>, User <user token>
```

Нужна ли авторизация пользователя для работы с теми или иными сущностями нужно смотреть в описаниях формата данных и примерах запросов.


### Версионирование API

Текущая версия формата ответа 2.0, в нем всегда присутствуют секции "success", "data", "meta".

Указать версию необходимо с помощью заголовка
```
Accept: application/vnd.yclients.v2+json
```

### Дата и время
Все даты в API представлены в виде строк в формате ISO 8601:

```
"2014-09-21T23:00:00.000+03:00"
```

Длительности услуг и других сущностей передаются в **секундах**. Например, если услуга длиться 15 минут, то формат данных следующий:

```
{ "length": 900 }
```

## Концепты YCLIENTS API

API позволяет работать с основными сущностями платформы:

* **Компания**
* **Пользователь**
    Пользователи могут управлять компаниями,
    они имеют права доступа к определенным настройкам компании.
    Не все пользователи имеют доступ ко всем настройкам.
    Для того, чтобы изменять те или иные настройки нужно сначала
    получить API-ключ пользователя с соответствующими правами.
* **Категория услуг**
    Все услуги компании группируются в рамках категории услуг .
* **Услуга**
    Как правило, запись производится на определенную услугу,
    которую оказывает определенный сотрудник в определенной компании.
    Услуга имеет диапазон стоимости и некоторые другие параметры.
* **Сотрудник**
    Как правило, запись производится, к определенному сотруднику
    или _ресурсу_ (например, подъемник или квест-комната).
* **Расписание сотрудника**
    У каждого сотрудника есть график работы - интервалы времени, в которое
    сотрудник работает с клиентами.
* **Свободное время сотрудника**
    Время на которое можно записаться
    к сотруднику, т.е. интервалы времени, в которые он свободен.
* **Запись**
    Интервал времени, в которое конкретный сотрудник оказывает
    конкретному клиенту услуги. Во время записи сотрудник занят.
* **Клиент**
    Человек, который записывался на услугу в компанию.

### Модель данных YCLIENTS API

Для работы с данными используется четыре основных структуры:

1. **Сущность**
    Одна из перечисленных выше сущностей,
    обладающая своими уникальными свойствами и параметрами.
    Сущности можно получать, изменять и удалять

2. **Коллекция сущностей**
    Набор сущностей. Например, список компаний
    или список услуг, оказываемых компаний.
    В коллекции сущностей можно *добавлять*
    сущности.

3. **Связь сущностей**
    Например, связь сотрудника и услуги
    определяет, что конкретный сотрудник
    оказывает конкретную услугу.
    У связи могут быть свои свойства,
    например, индивидуальная цена услуги
    для конкретного сотрудника

4. **Коллекция связей сущностей**
    Например, список услуг, оказываемых
    сотрудником и их свойства. В коллекции
    можно *добавлять связи*

# Group Авторизация
Для вызова многих методов требуется получить API-ключ пользователя, который будет использоваться для доступа к закрытым данным.

## Авторизовать пользователя [/auth]
При смене пароля пользователем его API-ключ изменится и потребуется новая авторизация

| Атрибут  | Тип | Описание |
| ------------- | ------------- | ------------- |
| login  | string  | В качестве логина может быть использован номер телефона пользователя в формате 79161234567 или его Email |
| password  | string  | Пароль пользователя |


### Авторизовать пользователя [POST]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Attributes
        + login: `testuser@yclients.com` (required, string) - Номер телефона или Email
        + password: `testpass` (required, string) - Пароль

+ Response 201 (application/json)

    + Attributes (object)
        + user_token: `wec23fh8cDfFV4432fc352456` (string) - User Access Token


# Data Structures

## FullClientSearchRequest (object)

+ page: 1 (number, optional) - номер страницы

+ page_size: (number, optional) - количество выводимых строк на странице. Максимум 200
    + Default: `25`

+ fields: `id` (array, optional)
    + Default: `id`
    + Members
        + `id` (string)
        + `name` (string)
        + `phone` (string)
        + `email` (string)
        + `discount` (string)
        + `first_visit_date` (string)
        + `last_visit_date` (string)
        + `sold_amount` (string)
        + `visits_count` (string)
        + `passteam_card_id` (string)

+ order_by: `id` (enum, optional) - по какому полю сортировать
    + Default: `id`
    + Members
        + `id` (string)
        + `name` (string)
        + `phone` (string)
        + `email` (string)
        + `discount` (string)
        + `first_visit_date` (string)
        + `last_visit_date` (string)
        + `sold_amount` (string)
        + `visits_count` (string)

+ order_by_direction: `ASC` (enum, optional) - как сортировать
    + Default: `ASC`
    + Members
        + `DESC` (string)
        + `ASC` (string)

+ operation: `AND` (enum[string], optional) - тип операции
    + Default: `AND`
    + Members
        + `AND` (string)
        + `OR` (string)

+ filters (ClientSearchFilters) - фильтры для поиска по клиентам

## ClientIdFilter (object)
+ type: 'id' (required, string)
    Поиск по идентификатору клиента
+ state: (object)
    + invert: (optional, boolean)
    + value: (array)
        + `1` (number)
        + `2` (number)

## ClientQuickSearchFilter (object)
+ type: 'quick_search' (required, string)
    Поиск по номеру телефона, дополнительному номеру телефона, имени, карте клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: `Владимир` (string)

## ClientBirthdayFilter (object)
+ type: 'birthday' (required, string)
    Поиск по дню рождения клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + from: `1985-03-22` (optional, string)
        Дата начала поискового периода (формат гггг-мм-дд)
    + to: `1985-03-23` (optional, string)
        Дата конца поискового периода (формат гггг-мм-дд)

## ClientSexFilter (object)
+ type: 'gender' (required, string)
    Поиск по полу клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: (optional, array)
        + Members
            + `0` (number) - не указан
            + `1` (number) - мужской
            + `2` (number) - женский

## ClientImportanceFilter (object)
+ type: 'importance' (required, string)
    Поиск по важности клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: (optional, array)
        + Members
            + `0` (number) - не указан
            + `1` (number) - бронза
            + `2` (number) - серебро
            + `3` (number) - золото

## ClientHasPassTeamCardFilter (object)
+ type: 'has_passteam_card' (required, string)
    Поиск по наличию карты Passteam у клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: (optional, boolean)

## ClientPassteamCardIdsFilter (object)
+ type: 'passteam_card_ids' (required, string)
    Поиск по номеру карты Passteam у клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: `111122223333aaaabbbbcccc`, (required, array[string])
        Список идентификаторов карт Passteam

## ClientCategoryFilter (object)
+ type: 'category' (required, string)
    Поиск по категории клиента
+ state: (required, object)
    + invert: (optional, boolean)
    + value: `1` (required, array[number])
        Список категорий

## ClientHasMobileAppFilter (object)
+ type: 'has_mobile_app' (required, string)
    Поиск по наличию установленного мобильного приложения у клиента
+ state: (object, required)
    + invert: (optional, boolean)
    + value: (required, boolean)

## ClientSmsNotificationFilter (object)
+ type: 'sms_notification' (required, string)
    Поиск по осуществлению смс рассылки за определённый период
+ state: (object, required)
    + invert: (optional, boolean)
    + from: (required, string)
    + to: (required, string)

## SoldAmountFilter (object)
+ type: 'sold_amount' (required, string)
    Поиск по сумме проданного клиенту
+ state: (object, required)
    + from: `0` (optional, number)
        От
    + to: `777.3` (optional, number)
        До

## RecordFilter (object)
+ type: 'record' (required, string)
    Поиск по записям клиента
+ state: (object, required)
    + invert: (optional, boolean)
    + staff: (optional, object)
        + value: `1` (required, array[number])
            Список мастеров
    + service: (optional, object)
        + value: `1` (required, array[number])
            Список услуг
    + service_category: (optional, object)
        + value: `1` (required, array[number])
            Список категорий услуг
    + status: (optional, object)
        + value: `1` (required, array)
            Список статусов
            + Members
                + `1` (number) - клиент не пришел
                + `2` (number) - ожидание
                + `3` (number) - клиент пришел
                + `4` (number) - клиент подтвердил
    + created: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата начала поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата конца поискового периода (формат гггг-мм-дд)
    + records_count: (optional, object)
        + from: `1` (optional,  number)
            От
        + to: `5` (optional, number)
            До
    + sold_amount: (optional, object)
        + from: `1` (optional,  number)
            От
        + to: `5` (optional, number)
            До
        + type: `service_amount` (optional, enum)
            Режим поиска
            + Default: `service_amount`
            + `service_amount` (string) - по стоимости оказанных услуг
            + `paid_in_cash` (string) - по оплаченным услугам для записей со статусом "Клиент пришел"

## SaleFilter (object)
+ type: 'sale' (required, string)
    Поиск по продажам
+ state: (object, required)
    + goods: (optional, object)
        + good_ids: `1` (optional, array[number])
            Список идентификаторов товаров
        + good_category_ids: `1` (optional, array[number])
            Список идентификаторов категорий товаров
    + good_sale_date: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата продажи товара - начало поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата продажи товара - конец поискового периода (формат гггг-мм-дд)
    + abonement_types: (optional, object)
        + value: `1` (required, array[number])
            Список идентификаторов типов абонемента
    + abonement_sale_date: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата продажи абонемента - начало поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата продажи абонемента - конец поискового периода (формат гггг-мм-дд)
    + abonement_expire_date: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата сгорания абонемента - начало поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата сгорания абонемента - конец поискового периода (формат гггг-мм-дд)
    + abonement_status: (optional, object)
        + value: `true` (required, boolean)
            Использован ли абонемент? true - использован, false - не использован
    + certificate_types: (optional, object)
        + value: `1` (required, array[number])
            Список идентификаторов типов сертификата
    + certificate_sale_date: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата продажи сертификата - начало поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата продажи сертификата - конец поискового периода (формат гггг-мм-дд)
    + certificate_expire_date: (optional, object)
        + from: `1985-03-22` (optional, string)
            Дата сгорания сертификата - начало поискового периода (формат гггг-мм-дд)
        + to: `1985-03-23` (optional, string)
            Дата сгорания сертификата - конец поискового периода (формат гггг-мм-дд)
    + certificate_balance: (optional, object)
        + from: `99.9` (optional, number)
            Баланс абонемента - минимальное значение
        + to: `500.5` (optional, number)
            Баланс абонемента - максимальное значение
    + certificate_status: (optional, object)
        + value: `true` (required, boolean)
            Использован ли сертификата? true - использован, false - не использован

## ClientFilter (object)
+ type: 'client' (required, string)
    Частный случай поиска с использованием любых существующих фильтров
+ state: (object, required)
    Содержит набор существующих фильтров где в качестве ключа указан тип фильтра из перечисленных выше, а в качестве значения состояние фильтра.
    Пример: {
        "id": {
            "value": [1, 2, 3]
        },
        "birthday": {
            "from": "1985-03-22",
            "to": "1985-03-23"
        }
    }

## ClientSearchFilters (array)
+ (ClientIdFilter, optional)
+ (ClientQuickSearchFilter, optional)
+ (ClientBirthdayFilter, optional)
+ (ClientImportanceFilter, optional)
+ (ClientHasPassTeamCardFilter, optional)
+ (ClientPassteamCardIdsFilter, optional)
+ (ClientCategoryFilter, optional)
+ (ClientHasMobileAppFilter, optional)
+ (RecordFilter, optional)
+ (SaleFilter, optional)
+ (SoldAmountFilter, optional)
+ (ClientSexFilter, optional)
+ (ClientFilter, optional)

## Seance (object)

+ time: '17:00' (required, string) - Время сеанса
+ length: 9600 (required, number) - Длительность сеанса
+ datetime: '2015-10-01T17:00:00Z' (required, string) - Дата и время сеанса

## Seances (array[Seance])

## Appointment

+ id:1 (required, number) - ID записи по которому будет возвращаться ее хеш в ответет
+ services: [320, 230] (required, array[number]) - Список ID услуг для записи
+ staff_id: 20201 (required, number) - ID сотрудника
+ datetime: '2015-10-01T17:00:00Z' (required, string) - Дата и время сеанса
+ custom_fields (optional, object) - Дополнительные поля записи

## Staff

+ id:1 (required, number) - ID сотрудника
+ name: 'Витя' (required, string) - Имя сотрудника
+ specialization: 'Крематолог' (required, string) - Специализация сотрудника
+ position: {id: 1, title: 'Администратор'} (required, SalonGroupPosition) - Должность сотрудника
+ show_rating: true (required, boolean) - Показывать ли рейтинг сотрудника
+ rating: 5 (required, number) - Рейтинг сотрудника (от 0 до 5)
+ votes_count: 24 (required, number) - Кол-во голосов, поставивших сотруднику оценку
+ comments_count: 24 (required, number) - Кол-во комментариев сотруднику
+ avatar: 'https://yclients.com/uploads/logo.png' (required, string) - Путь к аватарке сотрудника

## ServiceStaff

+ id:1 (required, number) - ID сотрудника
+ seance_length: 1800 (required, number) - Длительность оказания услуги (кратно 15 минутам)

## Company

+ id:1 (required, number) - ID копаниии
+ title: 'ООО Кранты' (required, string) - Название организации
+ country: 'Росссия' (required, string) - Название страны, в которой расположена организация
+ country_id: 5 (required, number) - ID страны
+ city: 'Москва' (required, string) - Название города, в котором расположена организация
+ city_id: 5 (required, number) - ID города
+ phone: '74958008080' (required, string) - Телефон компании
+ timezone: 'Europe/Moscow' (required, string) - Временная зона компании
+ address: 'Ялтинская 3, 190' (required, string) - Адрес компании
+ coordinate_lat: 35.5665 (required, number) - Широта
+ coordinate_lng: 35.5665 (required, number) - Долгота

## Client

+ phone: '79169999999' (optional, string) - телефон клиента
+ name: 'Петр' (optional, string) - Имя клиента
+ email: 'petr@thefirst.com' (optional, string) - email клиента

## ServiceArray

+ id: 141 (optional, number) - id услуги
+ first_cost: 1000 (optional, number) - Начальная стоимость услуги
+ discount: 10 (optional, number) - Скидка на услугу
+ cost: 10 (optional, number) - Итоговая стоимость услуги

## Patient (object)

+ id: 142 (required, number) - id пациента
+ patient_type: (required, enum) - Тип пациента
    + Sample: `client`
    + Members
        + `client` (string) - клиент
        + `comer` (string) - посетитель
+ full_name: 'Олег Олегович Кучера' (required, string) - Полное имя пациента
+ sex: (required, enum) - Пол пациента
    + Sample: `0`
    + Members
        + `0` (number) - не указан
        + `1` (number) - мужской
        + `2` (number) - женский
+ date_birthday: '1980-10-10' (optional, string) - Дата рождения пациента в формате yyyy-mm-dd
+ phone: '+79999999999' (optional, string) - Телефон пациента

## MedicalCard (object)

+ id: 142 (required, number) - Id медицинской карты
+ fill_date: '2020-28-11' (required, string, nullable) - Дата заполнения медицинской карты в формате yyyy-mm-dd
+ place_of_registration: 'г. Москва, ул. Энергетическая, д. 10, к. 2' (required, string) - Место регистрации пациента
+ locality: (required, enum) - Местность проживания пациента
    + Default: `unknown`
    + Members
        + `rural` (string) - сельская
        + `urban` (string) - городская
        + `unknown` (string) - неизвестно
+ document_name: 'Паспорт' (required, string, nullable) - Документ пациента
+ document_number_series: '0403' (required, string, nullable) - Серия и номер документа пациента
+ polis_oms: '231255656' (required, string, nullable) - Полис пациента
+ snils: '123532123' (required, string, nullable) - СНИЛС пациента
+ marital_status: (required, enum) - Семейное положение пациента
    + Default: `unknown`
    + Members
        + `married` (string) - состоит в зарегистрированном браке
        + `single` (string) - не состоит в браке
        + `unknown` (string) - неизвестно
+ education: (required, enum) - Образование пациента
    + Default: `unknown`
    + Members
        + `higher` (string) - профессиональное: высшее
        + `secondary` (string) - среднее
        + `general_secondary` (string) - общее среднее
        + `basic` (string) - основное
        + `primary` (string) - начальное
        + `unknown` (string) - неизвестно
+ occupation: (required, enum) - Занятость пациента
    + Default: `unknown`
    + Members
        + `employed` (string) - Работает
        + `military_service` (string) - Проходит военную службу и приравненную к  ней  службу
        + `pensioner` (string) - Пенсионер(ка)
        + `student` (string) - Студент(ка)
        + `unemployed` (string) - Не работает
        + `other` (string) - Прочее
        + `unknown` (string) - Неизвестно
+ place_of_work: '' (required, string, nullable) - Место работы пациента
+ position: 'владелец' (required, string, nullable) - Должность пациента
+ exemption_code: '789' (required, string, nullable) - Код категории льготы пациента
+ insurance_organization: 'ООО Росток' (required, string, nullable) - Наименование страховой медицинской организации пациента
+ disability: null (required, string, nullable) - Данные об инвалидности пациента
+ blood_type: (required, enum) - Группа крови пациента
    + Default: `unknown`
    + Members
        + `blood_type_0` (string) - O (I)
        + `blood_type_a` (string) - A (II)
        + `blood_type_b` (string) - B (III)
        + `blood_type_ab` (string) - AB (IV)
        + `unknown` (string) - Неизвестно
+ rhesus_factor: (required, enum) - Резус фактор пациента
    + Default: `unknown`
    + Members
        + `positive` (string) - Positive
        + `negative` (string) - Negative
        + `unknown` (string) - Неизвестно
+ allergies: null (required, string, nullable) - Аллергические реакции пациента

## MedicineAppointmentField

+ slug: 'complaints' (required, string) - идентификатор поля
+ value: 'Нет жалоб' (required, string) - значение поля
+ title: 'Жалобы' (required, string) - лейбл поля
+ type: 'input' (required, string) - тип поля
+ is_required: true (required, boolean) - обязательно ли заполнять поле? true - обязательно, false - не обязательно
+ is_editable: true (required, boolean) - можно ли редактировать поле? true - можно, false - нельзя
+ sort_number: 1 (required, number) - порядок поля на странице

## MedicineAppointmentFieldEssential

+ slug: 'complaints' (required, string) - идентификатор поля
+ value: 'Нет жалоб' (required, string) - значение поля

## TechnologicalCardItemsArray

+ id: 141 (required, number) - id расходника
+ technological_card_id: 1000 (required, number) - id технологической карты
+ storage_id: 10 (required, number) - id склада
+ good_id: 123 (required, number) - id товара
+ amount: 1 (required, number) - количество товара
+ unit: 'л' (required, string) - единица измерения
+ price: 1.3421 (required, number) - себестоимость расходника
+ title: 'Тест' (required, string) - название товара

## TechnologicalCardsArray

+ id: 141 (required, number) - id тех карты
+ title: 'Тест' (required, string) - название тех карты
+ technological_card_items: (required, array[TechnologicalCardItemsArray]) - массив расходников тех карты

## Consumables

+ goods_transaction_id: 1 (required, number) - id товарной транзакции
+ record_id: 1 (required, number) - id записи
+ service_id: 1 (required, number) - id услуги
+ storage_id: 1 (required, number) - id склада,
+ good_id: 1 (required, number) - id товара,
+ price: 100 (required, number) - себестоимость расходника в записи,
+ amount: 100 (required, number) - количество расходника в записи,
+ good: (required, Good) - товар

## Good
+ id: 1 (required, number) - id товара,
+ title: 100 (required, number) - название товара,
+ unit: 'г.' (required, string) - название единицы измерения,

## GoodsTransactionsArray

+ id (required, number) - id складской транзакции
+ good_id (required, number) - ID товара
+ storage_id (required, number) - ID склада
+ amount (required, number) - сумма
+ type (required, number) - 1 - Продажа товара, 2 - Списание расходников, 3 - Приход товара, 4 - Списание товара
+ master_id (required, number) - ID сотрудника
+ discount (required, number) - Скидка
+ price (required, number) - Стоимость
+ cost (required, number) - Цена продажи
+ operation_unit_type (required, number) - Тип единицы измерения: 1 - для продажи, 2 - для списания

## newTransactionsArray

+ id (required, number) - id финансовой транзакции
+ amount (required, number) - сумма
+ account_id (required, number) - ID кассы

## ImageGroup

+ id: 141 (required, number) - id группы изображений
+ entity: "master" (optional, string) - Название сущности, к которой привязана группа
+ entity_id: 10 (optional, number) - Id сущности
+ images (required, Image) - Список изображений

## Image

+ id: 141 (required, number) - id изображения
+ path: 'https://yclients.com/uploads/masters/norm/4/41/41574b90f81d8d7_20170327194249.jpeg' (required, string) - Путь к изображению
+ width: 10 (required, number) - Ширина изображения
+ height: 20 (required, number) - Высота изображения
+ type: 'jpeg' (required, string) - Тип изображения
+ image_group_id: 20 (required, number) - Id группы изображений
+ version: 'basic' (required, string) - Версия изображения

## UsersGroupsAccess

+ settings_access: 1 (required, number) - доступ к редактированию сети
+ users_access: 0 (required, number) - доступ к редактированию пользователей
+ clients_access: 1 (required, number) - доступ к просмотру клиентской базы
+ loyalty_access: 1 (required, number) - доступ к лояльности
+ loyalty_cards_manual_transactions_access: 1 (required, number) - ручное пополнение/списание с карт лояльности
+ network_services_access: 0 (required, number) - доступ к управлению сетевыми услугами

## LicenseOption

+ id: 2 (required, number) - id опции
+ title: "KKM" (required, string) - Название опции

## ClientLabelDataItem

+ id: 3 (required, number)
+ salon_id: 3 (required, number)
+ title: "Постоянный клиент" (required, string)
+ color: "tag" (required, string)
+ entity: "tag" (required, string)
+ deleted: 1 (required, number)
+ not_editable: 0 (required, number)

## ClientLabelsCode200MetaOption

+ total: "50000" (required, number) - Всего найдено
+ total_count: "300" (required, number) - Максимальное количество записей выводимых на странице

## ClientLabelsCode200Attributes

+ success: true (required, boolean) - флаг показывающий, что ответ выполнен без ошибок (true)
+ data: [] (required, array) - метаданные (пустой массив)
+ meta: {} (required, ClientLabelsCode200MetaOption) - метаданные (пустой массив)

## LoyaltyGenerateCode200DataOption

+ code: "1" (required, string) - Сгенерированный код

## LoyaltyGenerateCode200Option

+ success: true (required, boolean) - флаг показывающий, что ответ выполнен без ошибок (true)
+ data: {} (required, LoyaltyGenerateCode200DataOption) - метаданные (пустой массив)
+ meta: [] (required, array) - метаданные (пустой массив)

## LoyaltyGenerateCodeErrorMetaOption

+ message: "Не найдено" (required, string) - Сообшение об ошибке

## LoyaltyGenerateCodeErrorOption

+ success: false (required, boolean) - Ошибка
+ data: null (required, string) - Данные об ошибке

## Document

+ id: 2 (required, number) - id опции
+ type_id: 7 (required, number) - id типа документа
+ type_title: "Визит" (required, string) - название типа документа
+ storage_id: 4 (required, number) - id склада
+ user_id: 2452 (required, number) - id пользователя
+ company_id: 4545 (required, number) - id компании
+ number: 543 (required, number) - номер документа в компании
+ comment: "" (required, string) - комментарий
+ date_created: "2018-07-03 11:00:00" (required, string) - дата создания
+ category_id: 1 (required, number) - id категории
+ visit_id: 234234 (required, number) - id визита
+ record_id: 5445 (required, number) - id записи

## SalonGroupPosition

+ id: 2 (required, number) - id должности
+ title: "Администратор" (required, string) - название должности

# Group Онлайн-запись

Для реализации клиентской части онлайн-записи используется следующий набор методов. Они адаптированы для пользовательских сценариев онлайн-записи, в отличии от других REST-методов, которые лучше использовать для интеграционных целей.

## Настройки формы бронирования/записи [/bookform/{id}]

Каждый клиент сервиса YCLIENTS, может создать неограниченное количество форм онлайн-записи с разным дизайном и для разных сценариев записи.

Обычно, id формы бронирования хранится в поддомене, например: https://w123.yclients.com, где 123 - id формы записи. С помощью этого параметра можно получить все остальные необходимые для реализации онлайн-записи параметры, понять, будет происходить запись в конкретную компанию или в сеть компаний.

Для сетевого виджета необходимо будет дополнительно обратится к методу [GET] /companies с фильтром company_id и получить список копаний, в которые будет производиться запись.


Объект содержащий настройки формы бронирование имеет следующие поля:

| Поле | Тип | Описание |
| ------------- | ------------- | ------------- |
| steps  | Массив объектов  | Шаги формы бронирования со своими настройками  |
| style  | Object  | Настройки дизайна формы бронирования  |
| group_id  | number  | Идентификатор сети компаний (0 - если форма записи для несетевой компании)  |
| company_id  | number  | Идентификатор компании (возвращается всегда, используется для получения дополнительных настроек) |
| phone_confirmation  | boolean  | Нужно ли подтверждать телефон по смс (если groupid = 0 (не групповая форма), иначе смотреть в настройки каждой компании отдельно)
| lang  | string  | Язык формы бронирования (код из массива langs)  |
| langs  | array of object  | Список языков виджета
| comment_required  | boolean | Является ли поле с комментарием к записи обязательным для заполнения
| metrika_counter_id  | string  | Идентификатор Яндекс.Метрики
| google_analytics_id  | string  | Идентификатор Google Analytics
| facebook_pixel_id  | string  | Идентификатор Facebook Pixel
| vkontakte_pixel_id  | string  | Идентификатор Вконтакте пиксель
| app_metrika_id  | string  | Идентификатор Yandex AppMetrika
| sms_enabled  | boolean  | Доступна ли отправка смс
| comment_input_name  | string (optional)  | Заголовок для поля с вводом комментария к записи (если не задано, то используется значение по умолчанию)
| booking_notify_text  | string (optional)  | Текст уведомления, которое выводится (если задано) на шаге ввода контактных данных
| is_show_privacy_policy  | boolean  | Нужно ли отображать пользователю текст соглашения о политике обработки персональных данных
| specialization_display_mode  | number  | Выводить специализацию или должность сотрудника. 0 - Специализация, 1 - Должность

Массив steps состоит из объектов которые имеют следующие поля:

| Поле  | Тип | Описание |  Для каких шагов указан |
| ------------- | ------------- | ------------- | ------------- |
| step  | string | Шаг city/company/service/master/datetime/contact/confirm |  Для всех  |
| title  | string  | Название шага для вывода в интерфейсе |  Для всех  |
| num  | number  | Каким по счету должен выводиться данный шаг (начиная с 1) |  Для всех  |
| default  | string или number  | Значение по умолчанию для данного шага, если задано | Для всех, кроме datetime |
| hidden  | boolean  | Скрыть данный шаг при бронировании или нет |  Для всех |
| date_hidden  | boolean  | Скрыть данный шаг при бронировании или нет |  Для datetime |
| time_hidden  | boolean  | Скрыть данный шаг при бронировании или нет |  Для datetime |
| date_default  | string  | Значение по умолчанию для данного шага, если задано |  Для datetime |
| time_default  | number  | Значение по умолчанию для данного шага, если задано |  Для datetime |

Объект style имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
| show_header  | boolean | Выводить шапку и меню или нет |
| logo  | string  | Путь до картинки логотипа  |
| header_background  | string  | Путь до картинки фона подзаголовка |
| menu_background  | string  | Путь до картинки фона меню  |
| primaryPalette  | string  | Главный цвет формы (все цвета из списка: red, pink, purple, deep-purple, indigo, blue, light-blue, cyan, teal, green, light-green, lime, yellow, amber, orange, deep-orange, brown, grey, blue-grey, white, black) |
| accentPalette  | string  | Второстепенный цвет формы (полупрозрачный cover подзаголовка) |
| warnPalette  | string  | Цвет кнопок формы записи |
| backgroundPalette  | string  | Цвет фона формы записи |

+ Parameters
    + id: `1` (required, number) - id формы бронирования

### Получить настройки формы бронирования [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                "steps": [
                    {
                        "step": "master",
                        "title": "Выберите спеца",
                        "num": 2,
                        "hidden": "0",
                        "default": "-1"
                    },
                    {
                        "step": "service",
                        "title": "Выберите услугу",
                        "num": 1,
                        "hidden": "1",
                        "default": "196"
                    },
                    {
                        "step": "datetime",
                        "title": "Выберите дату и время сеанса",
                        "num": 3,
                        "hidden": false,
                        "date_hidden": "0",
                        "time_hidden": "0",
                        "date_default": "2015-07-23",
                        "time_default": "27900"
                    },
                    {
                        "step": "contact",
                        "title": "",
                        "num": 3,
                        "hidden": false,
                        "default": 0
                    },
                    {
                        "step": "comfirm",
                        "title": "",
                        "num": 4,
                        "hidden": false,
                        "default": 0
                    }
                ],
                "style": {
                    "show_header": true,
                    "logo": "https://yclients.com/uploads/logo.png",
                    "header_background": "https://yclients.com/uploads/header.png",
                    "menu_background": "https://yclients.com/uploads/menu.png",
                    "main_color": "666",
                    "secondary_color": "999",
                    "buttons_color": "FFF",
                },
                "group_id": 1,
                "company_id": 1,
                "phone_confirmation": false,
                "lang": "ru-RU",
                "langs": [
                    {
                        "id": 1,
                        "code": "ru-RU",
                        "title": "Русский"
                    },
                    {
                        "id": 2,
                        "code": "en-US",
                        "title": "English"
                    },
                    {
                        "id": 4,
                        "code": "lv-LV",
                        "title": "Latviešu valoda"
                    },
                    {
                        "id": 5,
                        "code": "et-EE",
                        "title": "Eesti keel"
                    },
                    {
                        "id": 6,
                        "code": "lt-LT",
                        "title": "Летува́"
                    },
                    {
                        "id": 7,
                        "code": "uk-UK",
                        "title": "Українська"
                    },
                    {
                        "id": 8,
                        "code": "fr-FR",
                        "title": "Français"
                    },
                    {
                        "id": 9,
                        "code": "it-IT",
                        "title": "Italiano"
                    },
                    {
                        "id": 10,
                        "code": "es-ES",
                        "title": "Español"
                    },
                    {
                        "id": 13,
                        "code": "ka-KA",
                        "title": "ქართული"
                    },
                    {
                        "id": 14,
                        "code": "hy-AM",
                        "title": "Հայերեն"
                    },
                    {
                        "id": 15,
                        "code": "kk-KK",
                        "title": "қазақ тілі"
                    },
                    {
                        "id": 16,
                        "code": "hr-HR",
                        "title": "Hrvatski jezik"
                    },
                    {
                        "id": 17,
                        "code": "cs-CS",
                        "title": "český jazyk"
                    },
                    {
                        "id": 18,
                        "code": "ro-RO",
                        "title": "Limba Română"
                    },
                    {
                        "id": 19,
                        "code": "cn-CN",
                        "title": "中文"
                    },
                    {
                        "id": 20,
                        "code": "ar-AR",
                        "title": "العَرَبِيَّة"
                    },
                    {
                        "id": 21,
                        "code": "bg-BG",
                        "title": "Български"
                    },
                    {
                        "id": 22,
                        "code": "he-IL",
                        "title": "עברית"
                    },
                    {
                        "id": 23,
                        "code": "hu-HU",
                        "title": "Magyar nyelv"
                    },
                    {
                        "id": 24,
                        "code": "Lt-sr-SP",
                        "title": "Srpski jezik"
                    },
                    {
                        "id": 25,
                        "code": "sk-SK",
                        "title": "Slovenský jazyk"
                    },
                    {
                        "id": 26,
                        "code": "mn-MN",
                        "title": "Монгол хэл"
                    },
                    {
                        "id": 27,
                        "code": "az-AZ",
                        "title": "Azərbaycan dili"
                    },
                    {
                        "id": 28,
                        "code": "pl-PL",
                        "title": "Polszczyzna"
                    },
                    {
                        "id": 30,
                        "code": "sl-SL",
                        "title": "Slòvēnskī"
                    }
                ],
                "comment_required": false,
                "metrika_counter_id": "50217133",
                "google_analytics_id": "UA-125358345-1",
                "facebook_pixel_id": "2218788388343154",
                "vkontakte_pixel_id": "VK-RTRG-96471-KZ24cpR",
                "app_metrika_id": "46ab3b93-1bc6-457d-82f0-c1b51f39b01e",
                "sms_enabled": true
            ],
            "meta": []
        }


## Интернационализация формы бронирования [/i18n/{langCode}]

Перевод доступен на один из языков:
- Русский - 'ru-RU'
- Латвийский - 'lv-LV'
- Английский - 'en-US'
- Эстонский - 'ee-EE'
- Литовский - 'lt-LT'
- Немецкий - 'de-DE'
- Украинский - 'uk-UK'

+ Parameters
    + langCode: `ru-RU` (required, string) - Код языка. Один из набора 'ru-RU', 'lv-LV', 'en-US', 'ee-EE', 'lt-LT', 'de-DE', 'uk-UK'


### Получить параметры интернационализации [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)



## Коллекция услуг доступных для бронирования [/book_services/{company_id}{?staff_id,datetime,service_ids}]

Объект услуг, доступных для бронирования имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  categories  | массив объектов  | Массив категорий услуг (забронировать категорию нельзя)  |
|  services  | массив объектов  | Услуги, доступные для бронирования, с указанием категории  |

Объект из массива categories, имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор категории  |
|  title  | string  |  Название категории  |
|  sex  | number  |  Принадлежность категории к полу (1 - мужской, 2 - женский, 0 - не задано)  |
|  weight  | number  |  Вес категории. При выводе категории сортируются по весу, сначала более тяжелые  |
|  api_id  | string  |  Внешний идентификатор категории  |

Объект из массива services, имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор услуги  |
|  title  | string  |  Название услуги  |
|  category_id  | number  |  Идентификатор категории, которой принадлежит услуга  |
|  weight  | number  |  Вес категории. При выводе услуги сортируются по весу, сначала более тяжелые  |
|  price_min  | number  |  Минимальная стоимость услуги  |
|  price_max  | number  |  Максимальная стоимость услуги  |
|  discount  | number  |  Скидка по услуге  |
|  comment  | string  |  Комментарий к услуге  |
|  active  | number  |  Активная ли услуга  |
|  prepaid  | string  |  Статус онлайн-оплаты  |
|  sex  | number  |  Пол, для которого оказывается услуга  |
|  seance_length  | number  |  Длительность оказания услуги в секундах (только если задан фильтр по сотруднику)  |
|  image  | string  |  Изображение услуги |

+ Parameters
    + company_id: `4564` (required, number) - ID компании

### Получить список услуг доступных для бронирования [GET]

Если необходимо получить услуги, которые оказывает конкретный специалист, то нужно воспользоваться фильтром по специалисту

Доступны следующие фильтры:

    + staff_id: ID сотрудника. Если нужны услуги, которые оказывает только выбранный сотрудник
    + datetime: дата (в формате iso8601). Если нужны услуги, которые можно забронировать у мастера на определенное время
    + service_ids: Массив ID услуг. Если уже выбран мастер, время и услуга(и) в рамках этой записи, и необходимо выбрать еще услугу.

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id: `0` (optional, number) - ID сотрудника. Фильтр по идентификатору сотрудника
        Default: 0
    + datetime: `` (optional, string) - дата (в формате iso8601). Фильтр по дате бронирования услуги (например '2005-09-09T18:30')
        Default: ''
    + service_ids (optional, array of number) - ID услуг.
        Фильтр по списку идентификаторов уже выбранных (в рамках одной записи) услуг. Имеет смысл если задан фильтр по мастеру и дате.

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                "events": [],
                "services": [
                    {
                        "id": 1896208,
                        "title": "Мытье волос",
                        "category_id": 1895571,
                        "price_min": 0,
                        "price_max": 0,
                        "discount": 0,
                        "comment": "",
                        "weight": 0,
                        "active": 0,
                        "sex": 0,
                        "image": "",
                        "prepaid": "forbidden",
                        "seance_length": 3600
                    },
                    {
                        "id": 1896303,
                        "title": "Окрашивание",
                        "category_id": 1895574,
                        "price_min": 0,
                        "price_max": 0,
                        "discount": 0,
                        "comment": "",
                        "weight": 0,
                        "active": 0,
                        "sex": 0,
                        "image": "",
                        "prepaid": "forbidden",
                        "seance_length": 3600
                    }
                ],
                "category": [
                    {
                        "id": 1895571,
                        "title": "Уходы для волос",
                        "sex": 0,
                        "api_id": 0,
                        "weight": 60
                    },
                    {
                        "id": 1895574,
                        "title": "Окрашивание волос",
                        "sex": 0,
                        "api_id": 0,
                        "weight": 7
                    },
                ]
            ],
            "meta": []
        }

## Коллекция сотрудников доступных для бронирования [/book_staff/{company_id}{?service_ids,datetime}]
Каждый объект из массива сотрудников, доступных для бронирования имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор сотрудника  |
|  name  | string  |  Имя сотрудника  |
|  specialization  | string  |  Специализация сотрудника  |
|  position  | object  |  Должность сотрудника  |
|  bookable  | boolean  |  Есть ли у сотрудника сеансы, доступные для бронирования  |
|  weight  | number  |  Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые  |
|  show_rating  | number  |  Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)  |
|  rating  | number  |  Рейтинг сотрудника  |
|  votes_count  | number  |  Кол-во голос, оценивших сотрудника  |
|  comments_count  | number  |  Кол-во комментариев к сотруднику  |
|  avatar  | string  |  Путь к файлу аватарки сотрудника  |
|  information  | string  |  Дополнительная информация о сотруднике (HTML формат)  |
|  seance_date  | string  |  Дата ближайшего дня, на который есть доступные сеансы (только для bookable = true) |

+ Parameters
    + company_id: `4564` (required, number) - ID компании

### Получить список сотрудников доступных для бронирования [GET]

Доступны следующие фильтры:

    + service_ids: Массив ID услуг. Если нужны сотрудники, которые оказывают только выбранную услугу
    + datetime: дата (в формате iso8601). Если нужны сотрудники, у которых есть сеансы на указанную услугу в указанное время

+ Parameters

    + company_id (required, number) - ID компании
    + service_ids (optional, array of number) - ID услуг.
        Фильтр по списку идентификаторов услуг
    + datetime (optional, string) - дата в формате iso8601.
        Фильтр по дате бронирования услуги (например '2005-09-09T18:30')


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id":"16",
                    "name":"Вася",
                    "bookable": true,
                    "specialization":"Фельдшер",
                    "position": {
                        "id": 1,
                        "title": "Администратор"
                    },
                    "show_rating":"1",
                    "rating":"3",
                    "votes_count":"1",
                    "avatar":"https://yclients.com/images/no-master.png",
                    "comments_count":"0",
                    "weight":"11",
                    "information":"<span><\/span>",
                    "seance_date": "2015-09-25",
                    "seances": []
                },
                {
                    "id":"32",
                    "name":"Петя",
                    "bookable": false,
                    "specialization":"Терапевт",
                    "position": [],
                    "show_rating":"1",
                    "rating":"4",
                    "votes_count":"1",
                    "avatar":"https://yclients.com/images/no-master.png",
                    "comments_count":"0",
                    "weight":"8",
                    "information":"<span><\/span>"
                }
            ],
            "meta": []
        }

## Даты доступные для бронирования [/book_dates/{company_id}{?service_ids,staff_id,date}]


Объект даты, доступные для бронирования имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  working_days  |  массив рабочих дней сгруппированных по месяцам   | Рабочие дни сотрудника/организации  |
|  working_dates  | array of dates  | Массив дат, когда работает сотрудник/организация  |
|  booking_days  |  массив дней, когда есть свободные сеансы  | Массив дней, которые доступны для бронирования на указанные услуги   |
|  booking_dates  | array of dates  | Массив дат, когда есть свободные сеансы на услугу к выбранному сотруднику/организации   |

working days и booking_days имеют одинаковый формат:
месяц:[массив дней в этом месяце]

Например такой booking_days:
        "9": [
              "4",
              "5"]
        "10": [
              "14",
              "25"]
Означает что на 4 и 5 сентября, и на 14 и 25 октября есть свободные сеансы для бронирования

### Получить список дат доступных для бронирования [GET]

Доступны следующие фильтры:

    + service_ids: Массив ID услуг. Если нужны даты, когда можно забронировать указанные услуги
    + staff_id: ID сотрудника. Если нужны даты, когда можно забронировать указанного специалиста
    + date: Дата в рамках месяца, если нужны даты по конкретному месяцу

+ Parameters

    + company_id (required, number) - ID компании
    + service_ids (optional, array of number) - ID услуг.
        Фильтр по списку идентификаторов услуг
    + staff_id: `0` (optional, number) - ID сотрудника. Фильтр по идентификатору сотрудника
        Default: 0
    + date (optional, string) - дата в формате iso8601.
        Фильтр по месяцу бронирования (например '2015-09-01')


+ Request (application/json)

     + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "booking_days": {
                      "9": [
                      "4",
                      "5",
                      "8",
                      "9",
                      "12",
                      "13",
                      "16",
                      "17",
                      "20",
                      "21",
                      "24",
                      "25",
                      "28",
                      "29",
                      "30"
                    ],
                    "10": [
                      "1",
                      "4",
                      "5",
                      "8",
                      "9",
                      "12",
                      "13",
                      "16",
                      "17",
                      "20",
                      "21",
                      "24",
                      "25"
                    ]
                  },
                  "booking_dates": [
                    "2015-09-04",
                    "2015-09-05",
                    "2015-09-08",
                    "2015-09-09",
                    "2015-09-12",
                    "2015-09-13",
                    "2015-09-16",
                    "2015-09-17",
                    "2015-09-20",
                    "2015-09-21",
                    "2015-09-24",
                    "2015-09-25",
                    "2015-09-28",
                    "2015-09-29",
                    "2015-09-30",
                    "2015-10-01",
                    "2015-10-04",
                    "2015-10-05",
                    "2015-10-08",
                    "2015-10-09",
                    "2015-10-12",
                    "2015-10-13",
                    "2015-10-16",
                    "2015-10-17",
                    "2015-10-20",
                    "2015-10-21",
                    "2015-10-24",
                    "2015-10-25"
                  ],
                  "working_days": {
                    "9": [
                      "4",
                      "5",
                      "8",
                      "9",
                      "12",
                      "13",
                      "16",
                      "17",
                      "20",
                      "21",
                      "24",
                      "25",
                      "28",
                      "29",
                      "30"
                    ],
                    "10": [
                      "1",
                      "4",
                      "5",
                      "8",
                      "9",
                      "12",
                      "13",
                      "16",
                      "17",
                      "20",
                      "21",
                      "24",
                      "25"
                    ]
                  },
                  "working_dates": [
                    "2015-09-04",
                    "2015-09-05",
                    "2015-09-08",
                    "2015-09-09",
                    "2015-09-12",
                    "2015-09-13",
                    "2015-09-16",
                    "2015-09-17",
                    "2015-09-20",
                    "2015-09-21",
                    "2015-09-24",
                    "2015-09-25",
                    "2015-09-28",
                    "2015-09-29",
                    "2015-09-30",
                    "2015-10-01",
                    "2015-10-04",
                    "2015-10-05",
                    "2015-10-08",
                    "2015-10-09",
                    "2015-10-12",
                    "2015-10-13",
                    "2015-10-16",
                    "2015-10-17",
                    "2015-10-20",
                    "2015-10-21",
                    "2015-10-24",
                    "2015-10-25"
                  ]
            },
            "meta": []
        }

## Сеансы доступные для бронирования [/book_times/{company_id}/{staff_id}/{date}{?service_ids}]

Объект сеансы, доступные для бронирования имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  time  |  string   | Время сеанса (17:30 например)   |
|  seance_length  | number  | Длительность сеанса в секундах  |
|  datetime  |  datetime  | Дата и время сеанса в формате ISO8601 (нужно передавать при создании записи)   |


### Получить список сеансов доступных для бронирования [GET]


Доступны следующие фильтры:

    + service_ids: Массив ID услуг. Если нужны сеансы, когда можно забронировать указанные услуги

+ Parameters

    + company_id (required, number) - ID компании
    + service_ids (optional, array of number) - ID услуг.
        Фильтр по списку идентификаторов услуг
    + date (required, string) - дата в формате iso8601.
        Фильтр по дате бронирования (например '2015-09-30')
    + staff_id: `0` (optional, number) - ID сотрудника. Фильтр по идентификатору сотрудника
        Default: 0

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)


    + Attributes (Seance)


    + Body
            {
                "success": true,
                "data": [
                    {
                    "time": "12:00",
                    "seance_length": 3600,
                    "datetime": "2015-09-29T12:00:00+04:00"
                    },
                    {
                    "time": "13:00",
                    "seance_length": 3600,
                    "datetime": "2015-09-29T13:00:00+04:00"
                    },
                    {
                    "time": "14:00",
                    "seance_length": 3600,
                    "datetime": "2015-09-29T14:00:00+04:00"
                    },
                    {
                    "time": "15:00",
                    "seance_length": 3600,
                    "datetime": "2015-09-29T15:00:00+04:00"
                    },
                    {
                    "time": "16:00",
                    "seance_length": 3600,
                    "datetime": "2015-09-29T16:00:00+04:00"
                    }
                ],
                "meta": []
            }


## Список ближайших сеансов сотрудника [/book_staff_seances/{company_id}/{staff_id}/{?service_ids,datetime}]

Объект ближайших сеансов сотрудника имеет следующие поля:

| Поле | Тип | Описание |
| ------------- | ------------- | ------------- |
|  seance_date  |  string   | Ближайшая дата с доступными сеансами   |
|  seances  | Array  | Список доступных сеансов  |

### Получить список ближайших доступных сеансов [GET]

Доступны следующие фильтры:

+ service_ids: Массив ID услуг. Если нужны сеансы, когда можно забронировать указанные услуги
+ datetime: дата (в формате iso8601), за которую необходимо получить ближайшие сеансы

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (required, number) - ID сотрудника
    + service_ids (optional, array of number) - ID услуг.
        Фильтр по списку идентификаторов услуг
    + datetime (optional, string) - дата в формате iso8601.
        Фильтр по дате


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)


    + Attributes (Seance)
        + seance_date (string)
        + seances (array[Seance])


    + Body

            {
                "success": true,
                "data" : {
                    "seance_date": "2017-04-13",
                    "seances": [
                        {
                          "time": "10:00",
                          "seance_length": 3600,
                          "datetime": "2017-04-13T10:00:00+04:00"
                        },
                        {
                          "time": "10:15",
                          "seance_length": 3600,
                          "datetime": "2017-04-13T10:15:00+04:00"
                        },
                        {
                          "time": "10:30",
                          "seance_length": 3600,
                          "datetime": "2017-04-13T10:30:00+04:00"
                        },
                        {
                          "time": "10:45",
                          "seance_length": 3600,
                          "datetime": "2017-04-13T10:45:00+04:00"
                        },
                        {
                          "time": "11:00",
                          "seance_length": 3600,
                          "datetime": "2017-04-13T11:00:00+04:00"
                        }
                    ]
                },
                "meta": []
            }

## СМС код подтверждения номера телефона [/book_code/{company_id}]

+ Тело запроса
    + phone (required, string, '79991234567') - телефон, на который будет отправлен код
    + fullname (option, sring, `Вася`) - Имя клиента

### Отправить СМС код подтверждения номера телефона [POST]

+ Parameters

    + company_id: 4564 (required, number) - ID компании


+ Request (application/json)

    + Attributes
        + phone: '79161001010' (required, string) - Телефон, на который будет отправлен код (например '79161005050')
        + fullname: 'Василиса' (string) - Имя клиента

     + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

               {
                    "phone": "79991234567",
                    "fulname": "Вася"
                }

+ Response 201 (application/json)

## Проверка параметров записи на сеанс [/book_check/{company_id}]

После формирования параметров записи(ей) можно проверить их на возможность создание записей.

JSON-Объект содержащий параметры онлайн записи имеет следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| appointments  | Массив объектов  |  ДА  | Параметры записи (услуги, специалисты...) |

Массив appointments состоит из объектов, которые имеют следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| id  | number  |  Да  | Идентификатор записи для обратной связи после сохранения (смотри ответ на запрос).
| services  | array of numbers  | НЕТ  |  Массив идентификаторов услуг, на которые клиент хочет записаться |
| staff_id  | number  |  ДА  | Идентификатор специалиста, к которому клиент хочет записаться (0 если выбран любой мастер)  |
| datetime  | datetime  |  ДА  | Дата и время сеанса в формате ISO8601 (передается для каждого сеанса в ресурсе book_times)|


В ответ на запрос проверки параметров придет пустой ответ с кодом 201 если параметры записи в порядке и записи могут быть созданы:

Если в ответ придет JSON с HTTP кодом отличным от 201, значит параметры записи не в порядке, а записи не могут быть созданы.

Ошибки, которые может вернуть сервер:

1. Выбранное время одной из записей уже занято.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 433,
а так же в поле id передается идентификатор записи из массива appointments

2. Нет сотрудников доступных для записи (если был выбран мастер по умолчанию).
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 436

3. Выбранное время одной из записей пересекается с временем записи, создаваемой этим же запросом.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 437,
а так же в поле id передается идентификатор записи из массива appointments

4. Нет записи на указанную услуги. (Компания уже удалили выбранные услуги)
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 438


### Проверить параметры записи [POST]

+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Attributes

        + appointments (required, Appointment) - Параметры записей (сеанс, услуги, мастер)


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

               {
                    "appointments": [
                        {
                            "id":1,
                            "services":[331],
                            "staff_id": 6544,
                            "datetime": "2015-09-30T15:30:00+04:00"
                        },
                        {
                            "id":2,
                            "services":[99055],
                            "staff_id": 6544,
                            "datetime": "2015-09-30T16:00:00+04:00"
                        }
                    ]
                }

+ Response 422 (application/json)

    + Body

            {
                "success": false,
                "data": null,
                "meta": {
                    "message": "К сотруднику Ирина Александровна(6544) нельзя записаться на 30 сентября 2015 в 16:00. Выбранное время уже занято или является нерабочим."
                }
            }



## Запись на сеанс [/book_record/{company_id}/{record_id}]


JSON-Объект содержащий параметры онлайн записи имеет следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| phone  | string  | ДА  |  Телефон клиента (например 79161502239)  |
| fullname  | string  |  ДА  | Имя клиента  |
| email  | string  |  НЕТ  | Почтовый адрес клиента  |
| appointments  | Массив объектов  |  ДА  | Параметры записи (услуги, специалисты...) |
| code  | string  |  НЕТ  |  Код подтверждения номера телефона, высланный по СМС (нужен только в случае необходимости подтверждения номера)  |
| notify_by_sms  | number  |  НЕТ  |  За какое кол-во часов отправить смс напоминание о записи (0 если не нужно напоминать)  |
| notify_by_email  | number  |  НЕТ  |  За какое кол-во часов отправить email напоминание о записи (0 если не нужно напоминать)  |
| comment  | string  |  НЕТ  | Комментарий к записи  |
| api_id  | string  |  НЕТ  | Внешний идентификатор записи  |

Массив appointments состоит из объектов, которые имеют следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| id  | number  |  Да  | Идентификатор записи для обратной связи после сохранения (смотри ответ на запрос).
| services  | array of numbers  | НЕТ  |  Массив идентификаторов услуг, на которые клиент хочет записаться |
| staff_id  | number  |  ДА  | Идентификатор специалиста, к которому клиент хочет записаться (0 если выбран любой мастер)  |
| datetime  | datetime  |  ДА  | Дата и время сеанса в формате ISO8601 (передается для каждого сеанса в ресурсе book_times)|
| custom_fields | key-value object | НЕТ | Значения дополнительных полей записи которые возвращаются вместе с записью |

Дополнительные поля в массиве appointments

При создании дополнительных полей записи (см. раздел "Дополнительные поля") становится возможным передавать собственные значения для полей.
Дополнительные поля уникальны для каждой компании. После создания дополнительных полей, их значения для конкретной записи могут
передаваться в необязательном поле custom_fields в виде пар ключ-значение где ключ это поле "code" дополнительного поля. Пример:

* Создали дополнительное поле записи с code="my_custom_field" type="number", и второе поле code="some_another_field" type="list"

* Передали при создании записи в элементе массива appointments еще один атрибут:
appointments: [{
    ...
}, {
    ...
    custom_fields: {
        "my_custom_field": 123,
        "some_another_field": ["first value", "second value"]
    }
}]

* При получении данной записи методом GET впоследствии, это же значение дополнительных полей вернется в ответе


В ответ на запрос создания записи придет массив объектов (кол-во объектов равно кол-ву объектов в массиве appointments) со следующими полями:

| Поле | Тип | Описание |
| ------------- | ------------- | ------------- |
| id  | number  |  Идентификатор записи, переданный в массиве appointments  |
| record_id  | number  |  Идентификатор созданной в системе записи  |
| record_hash  | string  |  Идентификатор записи, для ее удаления непосредственно сразу после создания  |

Ошибки, которые необходимо обрабатывать:
1. Введенный код подтверждения номера из SMS неправильный.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 432

2. Выбранное время одной из записей уже занято.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 433,
а так же в поле id передается идентификатор записи из массива appointments

3. Пользователь с указанным телефоном в черном списке и не может записываться.
В этом случае приходит ответ с http-кодом 403 и кодом ошибки 434

4. Номер телефона пользователя в неправильном формате.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 431

5. Не указано имя клиента.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 435

6. Нет сотрудников доступных для записи (если был выбран мастер по умолчанию).
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 436

7. Выбранное время одной из записей пересекается с временем записи, создаваемой этим же запросом.
В этом случае приходит ответ с http-кодом 422 и кодом ошибки 437,
а так же в поле id передается идентификатор записи из массива appointments

### Создать запись на сеанс [POST /book_record/{company_id}]

+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Attributes
        + phone: '79161001010' (required, string) - Телефон клиента
        + fullname: 'Василиса' (required, string) - Имя клиентa
        + email: 'client@yclients.com' (optional, string) - Имя клиента
        + code: 20145 (optional, number) - Код подтверждения телефона, высланный по смс (обязателен если у компании выставлен phone_conformation = true)
        + comment: 'убрать усы' (optional, string) - Комментарий к записи
        + type: 'mobile' (optional, string) - Источник записи
        + notify_by_sms: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + notify_by_email: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы
        + appointments (required, Appointment) - Параметры записей (сеанс, услуги, мастер)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

               {
                    "phone": "79000000000",
                    "fullname": "ДИМА",
                    "email": "d@yclients.com",
                    "code": "38829",
                    "comment": "тестовая запись!",
                    "type": "mobile",
                    "notify_by_sms": 6,
                    "notify_by_email": 24,
                    "api_id": "777",
                    "appointments": [
                        {
                            "id":1,
                            "services":[331],
                            "staff_id": 6544,
                            "datetime": "2015-09-29T13:00:00+04:00",
                            "custom_fields": {
                                "my_custom_field": 123,
                                "some_another_field": ["first value", "next value"]
                            }
                        },
                        {
                            "id":2,
                            "services":[99055],
                            "staff_id": 6544,
                            "datetime": "2015-09-30T16:00:00+04:00",
                            "custom_fields": {
                                "my_custom_field": 456,
                                "some_another_field": ["next value", "last value"]
                            }
                        }
                    ]
                }

+ Response 201 (application/json)

    + Attributes
        + id: 1 (required, number) - ID записи переданный в запросе в appontments
        + record_id: 23521 (required, number) - ID записи в системе yclients. Используется для удаления записи
        + record_hash: '4мcli3ent2yclientsщщ0com' (required, string) - HASH записи в системе yclients. Используется для удаления записи неавторизованным пользователем сразу после бронирования

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 1,
                        "record_id": 2820023,
                        "record_hash": "567df655304da9b98487769426d4e76e"
                    },
                    {
                        "id": 2,
                        "record_id": 2820024,
                        "record_hash": "34a45ddabdd446d5d33bdd27fbf855b2"
                    }
                ],
                "meta": []
            }


### Перенести запись на сеанс [PUT]

+ Parameters

    + company_id (required, number) - ID компании
    + record_id (required, number) - ID записи которую необходимо перенести

+ Request (application/json)

    + Attributes
        + datetime: '79161001010' (required, string) - Дата и время на которое мы хотим перенести запись
        + comment: 'убрать усы' (optional, string) - Комментарий к записи


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

               {
                  "datetime": "2016-05-20T14:30:00",
                  "comment" : "DODO!"
                }

+ Response 200 (application/json)

    + Attributes
        + id: 12655 (required, number) - ID записи
        + services: [141, 330] (required, array[number]) - Список ID услуг
        + company (required, Company) - Параметры компании
        + staff (required, Staff) - Параметры сотрудника
        + comment: 'убрать усы' (required, string) - Комментарий к записи
        + date: '2012-04-02T12:00:00Z' (required, string) - Дата сеанса
        + create_date: '2012-04-02T12:00:00Z' (required, string) - Дата создания записи
        + length: 3600 (required, number) - Длительность сеанса
        + deleted: false (required, boolean) - Уделана ли запись (true если удалена)
        + online: false (required, boolean) - Запись онлайновая или нет (false если запись внес администратор)
        + master_requested: false (required, boolean) - Был ли указан определенный специалист при записи (false если был указан "не имеет значения")
        + notify_by_sms: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + notify_by_email: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы

    + Body

            {
                "success": true,
                "data": {
                    "id": 30358,
                    "services": [
                      {
                        "id": 2838,
                        "title": "Массаж ног",
                        "cost": 0,
                        "discount": 0
                      }
                    ],
                    "company": {
                      "id": 4564,
                      "title": "",
                      "country_id": "0",
                      "country": "",
                      "city_id": "0",
                      "city": "Москва",
                      "phone": "+7 916 684-41-22",
                      "timezone": "0",
                      "address": "",
                      "coordinate_lat": "0",
                      "coordinate_lon": "0"
                    },
                    "staff": {
                      "id": 924,
                      "name": "Евгения",
                      "spec": "о ес",
                      "show_rating": "1",
                      "rating": "5",
                      "votes_count": "1",
                      "avatar": "https://yclients.com/images/no-master.png",
                      "comments_count": "0"
                    },
                    "date": "2016-05-20T14:30:00",
                    "create_date": "2016-05-19T14:30:10",
                    "comment": "",
                    "deleted": true,
                    "length": 3600,
                    "notify_by_sms": 0,
                    "notify_by_email": 0,
                    "master_requested": false,
                    "online": true,
                    "api_id": "0"
            }

### Создать запись в групповом событии [POST /activity/{company_id}/{activity_id}/book]

+ Parameters
    + company_id (required, number) - ID компании
    + activity_id (required, number) - ID группового события

+ Attributes
    + fullname: 'Василиса' (required, string) - Имя клиентa
    + phone: '79161001010' (required, string) - Телефон клиента
    + email: 'client@yclients.com' (optional, string) - Имя клиента
    + code: 20145 (optional, number) - Код подтверждения телефона, высланный по смс (обязателен если у компании выставлен phone_conformation = true)
    + comment: 'убрать усы' (optional, string) - Комментарий к записи
    + type: 'mobile' (optional, string) - Источник записи
    + notify_by_sms: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
    + notify_by_email: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
    + api_id: 2 (optional, number) - ID записи из внешней системы
    + clients_count: 1 (optional, number) - количество занимаемых мест

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

            {
                "fullname": "Test user",
                "phone": "71110000011",
                "email": "testemail@yclients.com",
                "code": "",
                "comment": "",
                "notify_by_sms": 0,
                "notify_by_email": 0,
                "type": "mobile"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 28417878,
                    "hash": "9e6a54a1a9b118b65cc39ab6f3c3b5b4"
                },
                "meta": []
            }


# Group Записи пользователя

Для управлениями записями пользователя используются следующие методы

## Авторизация пользователя по номеру телефона и коду смс [/user/auth]

Для доступа к своим онлайн и оффлайн (сделанным по телефону) записям пользователь должен авторизоваться подтвердив свой номер телефона.
Для этого ему нужно выслать на свой номер телефона код подтверждения с помощью ресурса "СМС код подтверждения номера телефона"

### Авторизоваться по номеру телефона и коду [POST]

+ Request (application/json)

    + Attributes
        + phone: '79161001010' (required, string) - Телефон, на который будет отправлен код (например '79161005050')
        + code: 20123 (required, string) - Код подтверждения номера телефона, высланный по смс

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

                {
                    "phone": "79991234567",
                    "code": 30254
                }

+ Response 201 (application/json)

    + Attributes (object)
        + user_token: `wec23fh8cDfFV4432fc352456` (required, string) - User Access Token


## Записи пользователя [/user/records/{record_id}/{record_hash}]

JSON-Объект содержащий параметры записи пользователя имеет следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| id  | number  | ДА  |  ID записи  |
| services  | array of numbers  |  ДА  | Список ID услуг записи  |
| company  | object  |  ДА  | Параметры компании  |
| staff  | object  |  ДА  | Параметры специалиста, которые был забронирован |
| clients_count  | int  |  ДА  |  Количество клиентов  |
| date  | string  |  ДА  |  Дата сеанса  |
| datetime  | string  |  ДА  |  Дата сеанса в ISO |
| create_date  | string  |  ДА  |  Дата создания записи  |
| length  | number  |  ДА  | Длительность сеанса  |
| deleted  | boolean  |  ДА  | Уделана ли запись (true если удалена)  |
| notify_by_sms  | number  |  НЕТ  |  За какое кол-во часов отправить смс напоминание о записи (0 если не нужно напоминать)  |
| notify_by_email  | number  |  НЕТ  |  За какое кол-во часов отправить email напоминание о записи (0 если не нужно напоминать)  |
| comment  | string  |  ДА  | Комментарий к записи  |
| master_requested  | boolean  |  ДА  | Был ли указан определенный специалист при записи (false если был указан "не имеет значения")  |
| online  | boolean  |  ДА  | Запись онлайновая или нет (false если запись внес администратор)  |
| visit_attendance  | number  |  ДА  | 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит  |
| api_id  | string  |  НЕТ  | Внешний идентификатор записи  |
| last_change_date  | string  |  НЕТ  | Дата последнего редактирования записи  |
| prepaid  | boolean  |  НЕТ  | Доступна ли онлайн-оплата для записи  |
| prepaid_confirmed  | boolean  |  НЕТ  | Статус online-оплаты  |
| last_change_date  | string  |  НЕТ  | Дата последнего редактирования записи  |
| activity_id  | int  |  НЕТ  | ID чего групповой записи |

Каждый объект из массива services имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор услуги  |
|  title  | string  |  Название услуги  |
|  cost  | float  |  Стоимость услуги  |
|  price_min  | float  |  Минимальная цена услуги  |
|  price_max  | float  |  Максимальная цена услуги  |
|  discount  | float  |  Скидка  |
|  amount  | int  |  Количество заказанных услуг  |
|  seance_length  | int  |  Длительность оказания услуги в секундах (только если задан фильтр по сотруднику)  |

Объект company имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор компании  |
|  title  | string  |  Название компании  |
|  country_id  | number  |  Идентификатор страны, в которой расположена компания  |
|  country  | string  |  Название старны компании  |
|  city_id  | number  |  Идентификатор города, в котором расположена компания)  |
|  city  | string  |  Название города компании  |
|  timezone  | string  |  Timezone компании  |
|  address  | string  |  Адрес, по которому расположена компания  |
|  phone  | string  | Основной номер телефона компании  |
|  phones  | array of strings  | Все номера телефонов компании  |
|  coordinate_lat  | float  |  Широта, на которой расположена компания  |
|  coordinate_lng  | float  |  Долгота  |
|  allow_delete_record  | boolean  |  Можно ли удалять запись  |
|  allow_change_record  | boolean  |  Можно ли переносить запись  |
|  site | string | Сайт компании |
|  currency_short_title | string | Символ валюты |
|  allow_change_record_delay_step | int | Время, через которое можно переносить запись |
|  allow_delete_record_delay_step | int | Время, через которое можно удалять запись |

Объект staff имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор сотрудника  |
|  name  | string  |  Имя сотрудника  |
|  specialization  | string  |  Специализация сотрудника  |
|  position  | object  |  Должность сотрудника  |
|  show_rating  | number  |  Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)  |
|  rating  | number  |  Рейтинг сотрудника  |
|  votes_count  | number  |  Кол-во голос, оценивших сотрудника  |
|  comments_count  | number  |  Кол-во комментариев к сотруднику  |
|  avatar  | string  |  Путь к файлу аватарки сотрудника  |


### Получить записи пользователя [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 201 (application/json)

    + Attributes
        + id: 12655 (required, number) - ID записи
        + services: [141, 330] (required, array[number]) - Список ID услуг
        + company (required, Company) - Параметры компании
        + staff (required, Staff) - Параметры сотрудника
        + comment: 'убрать усы' (required, string) - Комментарий к записи
        + date: '2012-04-02T12:00:00Z' (required, string) - Дата сеанса
        + create_date: '2012-04-02T12:00:00Z' (required, string) - Дата создания записи
        + length: 3600 (required, number) - Длительность сеанса
        + deleted: false (required, boolean) - Уделана ли запись (true если удалена)
        + online: false (required, boolean) - Запись онлайновая или нет (false если запись внес администратор)
        + master_requested: false (required, boolean) - Был ли указан определенный специалист при записи (false если был указан "не имеет значения")
        + notify_by_sms: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + notify_by_email: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы


    + Body

        {
            "success": true,
            "data": [
                {
                    "id": 13132699,
                    "services": [
                        {
                            "id": 389043,
                            "title": "Коррекция нарощенных ногтей",
                            "cost": 2300,
                            "price_min": 2300,
                            "price_max": 2300,
                            "discount": 0,
                            "amount": 1,
                            "seance_length": 1800
                        }
                    ],
                    "company": {
                        "id": 4564,
                        "title": "Салон корекции ногтей",
                        "country_id": 1,
                        "country": "Россия",
                        "city_id": 2,
                        "city": "Москва",
                        "phone": "+84 9 243 31 231",
                        "phones": [
                            "+84 9 243 31 231",
                            "+84 9 243 31 231"
                        ],
                        "timezone": 12,
                        "address": "ул. Образцова, 345",
                        "coordinate_lat": 54.786441,
                        "coordinate_lon": 37.60885199999999,
                        "allow_delete_record": true,
                        "allow_change_record": true,
                        "site": "www.nogti.com",
                        "currency_short_title": "₽",
                        "allow_change_record_delay_step": 0,
                        "allow_delete_record_delay_step": 0
                    },
                    "staff": {
                        "id": 55436,
                        "name": "Наталья",
                        "specialization": "Мастер маникюра и педикюра",
                        "position": {
                            "id": 446,
                            "title": "Мастер маникюра"
                        },
                        "show_rating": 1,
                        "rating": 4.84,
                        "votes_count": 0,
                        "avatar": "http://example.com/image.png",
                        "comments_count": 37
                    },
                    "clients_count": 1,
                    "date": "2017-10-24 17:30:00",
                    "datetime": "2017-10-24T17:30:00+0000",
                    "create_date": "2017-10-20T21:40:24+0000",
                    "comment": "",
                    "deleted": true,
                    "attendance": 0,
                    "length": 1800,
                    "notify_by_sms": 0,
                    "notify_by_email": 0,
                    "master_requested": false,
                    "online": true,
                    "api_id": "",
                    "last_change_date": "2017-10-24T23:54:02+0000",
                    "prepaid": false,
                    "prepaid_confirmed": false,
                    "activity_id": 0
                },
                {
                    "id": 13133413,
                    "services": [
                        {
                            "id": 389045,
                            "title": "Массаж рук (10 мин)",
                            "cost": 300,
                            "price_min": 300,
                            "price_max": 400,
                            "discount": 0,
                            "amount": 1,
                            "seance_length": 1800
                        }
                    ],
                    "company": {
                        "id": 4564,
                        "title": "Салон корекции ногтей",
                        "country_id": 1,
                        "country": "Россия",
                        "city_id": 2,
                        "city": "Москва",
                        "phone": "+84 9 243 31 231",
                        "phones": [
                            "+84 9 243 31 231",
                            "+84 9 243 31 231"
                        ],
                        "timezone": 12,
                        "address": "ул. Образцова, 345",
                        "coordinate_lat": 54.786441,
                        "coordinate_lon": 37.60885199999999,
                        "allow_delete_record": true,
                        "allow_change_record": true,
                        "site": "www.nogti.com",
                        "currency_short_title": "₽",
                        "allow_change_record_delay_step": 0,
                        "allow_delete_record_delay_step": 0
                    },
                    "staff": {
                        "id": 55436,
                        "name": "Наталья",
                        "specialization": "Мастер маникюра и педикюра",
                        "position": {
                            "id": 446,
                            "title": "Мастер маникюра"
                        },
                        "show_rating": 1,
                        "rating": 4.84,
                        "votes_count": 0,
                        "avatar": "http://example.com/image.png",
                        "comments_count": 37
                    },
                    "clients_count": 1,
                    "date": "2017-10-24 17:30:00",
                    "datetime": "2017-10-24T17:30:00+0000",
                    "create_date": "2017-10-20T21:40:24+0000",
                    "comment": "",
                    "deleted": true,
                    "attendance": 0,
                    "length": 1800,
                    "notify_by_sms": 0,
                    "notify_by_email": 0,
                    "master_requested": false,
                    "online": true,
                    "api_id": "",
                    "last_change_date": "2017-10-24T23:54:02+0000",
                    "prepaid": false,
                    "prepaid_confirmed": false,
                    "activity_id": 0
                }
            ],
            "meta": []
        }


### Удалить запись пользователя [DELETE]


+ Parameters

    + record_id: 22123 (required, number) - ID записи (достаточно для удаления записи если пользователь авторизован)
    + record_hash: 'dawd4fs09rhf0s9fafef0' (optional, string) - HASH записи (обязательно для удаления записи если пользователь не авторизован)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)



# Group Компании
Для работы с компаниями используются следующие методы

## Коллекция компаний [/companies{?group_id,my,forBooking,active,moderated,coordinate_lat,coordinate_lon,distance,title,city_id,show_groups}]

Объект компании имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор компании  |
|  title  | string  |  Название компании (Обязательное поле для создания компании) |
|  logo  | string  |  Адрес изображения логотипа компании  |
|  short_descr  | string  |  Категория компании  |
|  country_id  | number  |  Идентификатор страны, в которой расположена компания  |
|  country  | string  |  Название старны компании  |
|  city_id  | number  |  Идентификатор города, в котором расположена компания)  |
|  city  | string  |  Название города компании  |
|  timezone  | string  |  Timezone компании  |
|  schedule  | string  |  Расписание работы компании  |
|  address  | string  |  Адрес, по которому расположена компания  |
|  phone  | string  | Номер телефона компании  |
|  coordinate_lat  | float  |  Широта, на которой расположена компания  |
|  coordinate_lon  | float  |  Долгота  |
|  app_ios  | string  |  Ссылка на приложение под ios  |
|  app_android  | string  |  Ссылка на приложение под android  |
|  phone_confirmation  | boolean  | Нужно ли подтверждать телефон по смс  |
|  active_staff_count  | number  | Кол-во сотрудников доступных для бронирования  |
|  next_slot  | datetime  | Дата и время ближайшего свободного сеанса в компании(ISO8601). Поле будет присутствовать только если передан GET параметр forBooking=1
|  booking_comment_required  | boolean | Является ли поле с комментарием к записи обязательным для заполнения
|  booking_email_required  | boolean | Является ли поле Email к записи обязательным для заполнения
|  booking_comment_input_name  | string (optional)  | Заголовок для поля с вводом комментария к записи (если не задано, то используется значение по умолчанию)
|  booking_notify_text  | string (optional)  | Текст уведомления, которое выводится (если задано) на шаге ввода контактных данных
|  reminds_sms_disabled  | boolean  | True - если у компании выключен сервис SMS напоминаний клиентам.
|  group_priority  | number  | Чем больше приоритет, тем выше компания при выводе в списке филиалов сети
|  allow_change_record  | boolean  | Изменение записи  |
|  allow_change_record_delay_step  | number  | Запретить изменять записи за период. (В секундах)
|  allow_delete_record  | boolean  | Удаление записи  |
|  allow_delete_record_delay_step  | number  | Запретить удалять записи за период. (В секундах)


### Получить список компаний [GET]

#### Фильтрация компаний
+ group_id: ID сети компаний. Если нужны компании входящие в конкретную сеть
+ my: Только для авторизованного пользователя (с использованием user_token в Headers). Если нужны компании, на управление которыми пользователь имеет права
+ active: Если нужно получить только активные для онлайн-записи компании
+ moderated: Если нужно получить только прошедшие модерацию компании. Т.е. чей контент проверен для публикации
+ forBooking: Если нужно получить поле next_slot по каждой компании
+ coordinate_lat: Широта центра поиска по координатам
+ coordinate_lon: Долгота центра поиска по координатам
+ distance: Радиус поиска
+ title: Поиск по вхождению подстроки в название компании
+ city_id: Поиск по ID города ([метод получения городов](#cities))
+ show_groups: Включить в объект компании список сетей в которые входит эта компания
+ count: 50 (optional, number) -  Количество компаний на странице
+ page: 1 (optional, number) - Номер страницы

+ Parameters

    + group_id: 83 (optional, number) - ID сети компаний.
        Фильтр по идентификатору сети компаний
        Default: 83
    + my: 1 (optional, number) - Только для авторизованного пользователя. Если нужно компании, на управление которыми пользователь имеет права
    + active: 1 (optional, number) - Если нужно получить только активные для онлайн-записи компании
    + moderated: 1 (optional, number) - Если нужно получить только прошедшие модерацию компании. Т.е. чей контент проверен для публикации
    + forBooking: 1 (optional, number) - Если нужно получить поле next_slot по каждой компании
    + show_groups: 1 (optional, number) - Включить в объект компании список сетей в которые входит эта компания
    + city_id: 2 - Поиск по ID города ([метод получения городов](#cities))
    + count: 50 (optional, number) - Количество компаний на странице
    + page: 1 (optional, number) - Номер страницы
+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": "1050",
                    "title": "Ля Визаж",
                    "short_descr": "Салон красоты",
                    "logo": "https://yclients.com/images/no-master.png",
                    "active": "1",
                    "phone": "+7 495 509-24-46",
                    "country_id": 1,
                    "schedule": "",
                    "country": "Россия",
                    "city_id": 1,
                    "city": "Москва",
                    "timezone": "Europe/Moscow",
                    "address": "Талалихина, д. 1, к. 2",
                    "coordinate_lat": "55.735662",
                    "coordinate_lon": "37.678218",
                    "phone_confirmation": true,
                    "active_staff_count": 2,
                    "next_slot": "2015-09-29T12:00:00+04:00",
                    "app_ios": "",
                    "app_android": "",
                    "currency_short_title": "р",
                    "group_priority": 900,
                },
                {
                    "id": "1051",
                    "title": "Ля Визаж 2",
                    "short_descr": "Салон красоты",
                    "logo": "https://yclients.com/images/no-master.png",
                    "active": "1",
                    "phone": "+7 495 509-24-46",
                    "country_id": 1,
                    "country": "Россия",
                    "city_id": 1,
                    "city": "Москва",
                    "timezone": "Europe/Moscow",
                    "address": "Талалихина, д. 1, к. 2",
                    "coordinate_lat": "55.835662",
                    "coordinate_lon": "37.778218",
                    "phone_confirmation": false,
                    "active_staff_count": 3,
                    "next_slot": "2015-09-29T11:00:00+04:00",
                    "app_ios": "",
                    "app_android": "",
                    "currency_short_title": "р",
                    "group_priority": 901,
                }
            ],
            "meta": []
        }

### Создать компанию [POST]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token
    + Body

               {
                    "title": "Новая компания",
                    "country_id": 1,
                    "city_id": 2,
                    "timezone": "Europe/Moscow",
                    "address": "Талалихина, д. 1, к. 2",
                    "coordinate_lat": "55.835662",
                    "coordinate_lon": "37.778218"
                }

+ Response 201 (application/json)

            {
                "success": true,
                "data": {
                    "id": "1050",
                    "title": "Новая компания",
                    "short_descr": "Салон красоты",
                    "logo": "https://yclients.com/images/no-master.png",
                    "active": "1",
                    "phone": "",
                    "country_id": 1,
                    "schedule": "",
                    "country": "Россия",
                    "city_id": 2,
                    "city": "Москва",
                    "timezone": "Europe/Moscow",
                    "address": "Талалихина, д. 1, к. 2",
                    "coordinate_lat": "55.735662",
                    "coordinate_lon": "37.678218",
                    "phone_confirmation": true,
                    "active_staff_count": 2,
                    "app_ios": "",
                    "app_android": "",
                    "currency_short_title": "р",
                },
                "meta": []
            }

## Компания [/company/{id}/{?forBooking,show_groups}]

+ Параметр
    + id (required, number, `1`) ...
    + forBooking: 1 (optional, number) - Дата и время ближайшего свободного сеанса в компании(ISO8601).
    + show_groups: 1 (optional, number) - Включить в объект компании список сетей в которые входит эта компания

### Получить компанию [GET]
+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

            {
                "success": true,
                "data": {
                    "id": 37532,
                    "title": "Новая компания",
                    "country_id": 1,
                    "country": "Россия",
                    "city_id": 1,
                    "city": "Москва",
                    "timezone" : "Europe/Moscow",
                    "address": "Большой Саввинский пер., д. 3,
                    "coordinate_lat": "55.735662",
                    "coordinate_lon": "37.678218",
                    "phone_confirmation": true,
                    "active_staff_count": 2,
                    "next_slot": "2015-09-22 10:00:00",
                    "group_priority": 900,
                    "push_notification_phone_confirm": 1
                },
                "meta": []
            }

### Изменить компанию [PUT]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token
  + Body

            {
                "title": "Новая компания",
                "country" : "Россия",
                "city" : "Москва",
                "timezone" : "Europe/Moscow",
                "address": "Большой Саввинский пер., д. 4"
            }

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id": 37532
            },
            "meta": []
        }


### Удалить компанию [DELETE]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 204

# Group Категория услуг
Для работы с категориями услуг используются следующие методы

Объект категории услуг имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор категории  |
|  salon_service_id  |  number  |  Идентификатор категории для компании в сети  |
|  title  | string  |  Название категории  |
|  api_id  | string  |  Внешний идентификатор категории  |
|  weight  | number  |  Вес категории (используется для сортировки категорий при отображении)  |
|  staff  | array  |  Список ID сотрудников, оказывающих услугу |

#### Фильтрация категорий услуг
+ staff_id: ID сотрудника. Если нужны услуги, которые оказывает конкретный мастер

## Коллекция категорий услуг [/service_categories/{company_id}/{id}{?staff_id}]

+ Параметр
    + company_id (required, number) - ID компании
    + id (optional, number) - ID категории услуг (для работы с конкретной категорией)
    + staff_id (optional, number) - ID сотрудника (для получения категорий, привязанных к сотруднику)


+ Parameters

    + company_id: 1 (required, number) - ID компании
    + id: 1 (optional, number) - ID категории услуг
    + staff_id: 1 (optional, number) - ID сотрудника (для получения категорий, привязанных к сотруднику)

### Получить список категорий услуг [GET /company/{company_id}/service_categories/{id}{?staff_id}]

+ Request (application/json)

    + Headers

        Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": 345,
                    "salon_service_id": 353,
                    "title": "Стрижки мужские",
                    "api_id" : "adw322",
                    "weight": 10,
                    "staff": [
                          5006,
                          8901,
                          26514,
                          26516,
                          26519,
                          26520
                    ]
                },
                {
                    "id": 3456,
                    "salon_service_id": 3252,
                    "title": "Стрижки женские",
                    "api_id" : "adw323",
                    "weight": 9,
                    "staff": [
                      5006,
                      8901
                    ]
                }
            ],
            meta: {
                "total_count": 2
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Необходимо продлить лицензию в филиале с id: {company_id}"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не указан филиал."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Филиал не найден."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Категория услуг не существует."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Сотрудник не найден."
            }
        }


### Устаревшее. Получить список категорий услуг [GET /service_categories/{company_id}/{id}{?staff_id}]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": 345,
                    "salon_service_id": 353,
                    "title": "Стрижки мужские",
                    "api_id" : "adw322",
                    "weight": 10,
                    "staff": [
                        5006,
                        8901,
                        26514,
                        26516,
                        26519,
                        26520
                    ]
                },
                {
                    "id": 3456,
                    "salon_service_id": 3252,
                    "title": "Стрижки женские",
                    "api_id" : "adw323",
                    "weight": 9,
                    "staff": [
                        5006,
                        8901
                    ]
                }
            ],
            "meta": []
        }

### Создать категорию услугу [POST /service_categories/{company_id}]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token
  + Body

            {
                "title": "Стрижка очень женская",
                "api_id" : "adw322",
                "weight": 111,
                "staff": [
                  5006,
                  8901
                ]
            }

+ Response 201 (application/json)

        {
            "success": true,
            "data": {
                "id": 3,
                "salon_service_id": 15,
                "title": "Стрижка очень женская",
                "api_id" : "adw322",
                "weight": 111,
                "staff": [
                  5006,
                  8901
                ]
            },
            "meta": []
        }


## Категория услуг [/service_category/{company_id}/{id}]

+ Параметры
    + company_id (required, number, `1`) - ID компании
    + id (required, number, `1`) - ID категории услуг

### Получить категорию услуг [GET]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id": 3,
                "salon_service_id": 15,
                "title": "Стрижки женские",
                "weight": 12,
                "staff": [
                    5006,
                    8901
                ]
            },
            "meta": []
        }


### Изменить категорию услуг [PUT]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token
  + Body

            {
                "title": "Стрижки женские",
                "weight": 15,
                "staff": [
                    5006
                    8901
                ]
            }

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id": 3,
                "salon_service_id": 15,
                "title": "Стрижки женские",
                "weight": 15,
                "staff": [
                    5006,
                    8901
                ]
            },
            "meta": []
        }


### Удалить категорию услуг [DELETE]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 204



# Group Услуги

Для работы с услугами используются следующие методы

Объект услуги имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор услуги  |
|  salon_service_id  |  number  |  Идентификатор услуги для компании в сети  |
|  category_id  |  number  |  Идентификатор категории, в которой состоит услуга  |
|  title  | string  |  Название категории  |
|  price_min  | number  |  Минимальная цена на услугу  |
|  price_max  | number  |  Максимальная цена на услугу |
|  active  | number  |  1 - доступна для онлайн записи, 0 - не доступна |
|  comment  | string  |  комментарий у услуге |
|  api_id  | string  |  Внешний идентификатор услуги  |
|  weight  | number  |  Вес категории (используется для сортировки категорий при отображении)  |
|  staff  | array  |  Список сотрудников, оказывающих услугу и длительность сеанса |
|  image_group | object | Группа изображений услуги |

Массив со списком сотрудников, оказывающих услугу состоит из объектов со следующими полями

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор сотрудника  |
|  seance_length  |  number  |  Длительность оказания услуги мастером. (В секундах)  |


#### Фильтрация услуг
+ staff_id: ID сотрудника. Если нужны услуги, которые оказывает конкретный мастер
+ category_id: ID категории. Если нужны услуги, из конкретной категории

## Коллекция услуг [/services/{company_id}/{service_id}{?staff_id,category_id}]

+ Параметр
    + company_id (required, number, `1`) - ID компании
    + service_id (optional, number, `1`) - ID услуги

### Получить список услуг / конкретную услугу [GET /company/{company_id}/services/{service_id}{?staff_id,category_id}]

+ Parameters

    + company_id (required, number) - ID компании
    + service_id (optional, number) - ID услуги, если нужно работать с конкретной услугой.
    + staff_id (optional, number) - ID сотрудника, если нужно отфильтровать по сотруднику
    + category_id (optional, number) - ID категории, если нужно отфильтровать по категории

+ Request (application/json)

    + Headers
            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": "79067",
                    "salon_service_id": "322888",
                    "title": "Бритье головы",
                    "category_id": "4",
                    "price_min": "1000.00",
                    "price_max": "1000.00",
                    "discount": "0",
                    "comment": "",
                    "weight": "2",
                    "active": "1",
                    "api_id": "",
                    "staff": []
                },
                {
                    "id": "83169",
                    "salon_service_id": "433222",
                    "title": "Мужская стрижка",
                    "category_id": "83167",
                    "price_min": "1300.00",
                    "price_max": "1300.00",
                    "discount": "0",
                    "comment": "",
                    "weight": "6",
                    "active": "1",
                    "api_id": "00000000042",
                    "staff": [
                        {
                            "id": "5905",
                            "seance_length": "2700"
                        },
                        {
                            "id": "5907",
                            "seance_length": "3600"
                        },
                        {
                            "id": "8973",
                            "seance_length": "3600"
                        },
                        {
                            "id": "13616",
                            "seance_length": "3600"
                        },
                        {
                            "id": "16681",
                            "seance_length": "3600"
                        },
                        {
                            "id": "17969",
                            "seance_length": "3600"
                        },
                        {
                            "id": "34006",
                            "seance_length": "3600"
                        }
                    ],
                    "image_group": {
                        "id": 72234,
                        "entity": "settings_service",
                        "entity_id": 389927,
                        "images": {
                            "basic": {
                                "id": "186791",
                                "path": "https://yclients.com/path/to/image/tagret-image.jpeg",
                                "width": "372",
                                "height": "280",
                                "type": "jpeg",
                                "image_group_id": 72234,
                                "version": "basic"
                            }
                        }
                    }
                }
            ],
            "meta": {
                "total_count": 2
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Необходимо продлить лицензию в филиале с id: {company_id}"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не указан филиал."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Филиал не найден."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Услуга не указана."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Услуга не найдена."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Категория не найдена."
            }
        }

### Устаревшее. Получить список услуг / конкретную услугу [GET /services/{company_id}/{service_id}{?staff_id,category_id}]

+ Parameters

    + company_id (required, number) - ID компании
    + service_id (optional, number) - ID услуги, если нужно работать с конкретной услугой.
    + staff_id (optional, number) - ID сотрудника, если нужно отфильтровать по сотруднику
    + category_id (optional, number) - ID категории, если нужно отфильтровать по категории

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": "79067",
                    "salon_service_id": "322888",
                    "title": "Бритье головы",
                    "category_id": "4",
                    "price_min": "1000.00",
                    "price_max": "1000.00",
                    "discount": "0",
                    "comment": "",
                    "weight": "2",
                    "active": "1",
                    "api_id": "",
                    "staff": []
                },
                {
                    "id": "83169",
                    "salon_service_id": "433222",
                    "title": "Мужская стрижка",
                    "category_id": "83167",
                    "price_min": "1300.00",
                    "price_max": "1300.00",
                    "discount": "0",
                    "comment": "",
                    "weight": "6",
                    "active": "1",
                    "api_id": "00000000042",
                    "staff": [
                      {
                        "id": "5905",
                        "seance_length": "2700"
                      },
                      {
                        "id": "5907",
                        "seance_length": "3600"
                      },
                      {
                        "id": "8973",
                        "seance_length": "3600"
                      },
                      {
                        "id": "13616",
                        "seance_length": "3600"
                      },
                      {
                        "id": "16681",
                        "seance_length": "3600"
                      },
                      {
                        "id": "17969",
                        "seance_length": "3600"
                      },
                      {
                        "id": "34006",
                        "seance_length": "3600"
                      }
                    ],
                    "image_group": {
                        "id": 72234,
                        "entity": "settings_service",
                        "entity_id": 389927,
                        "images": {
                          "basic": {
                            "id": "186791",
                            "path": "https://yclients.com/path/to/image/tagret-image.jpeg",
                            "width": "372",
                            "height": "280",
                            "type": "jpeg",
                            "image_group_id": 72234,
                            "version": "basic"
                          }
                        }
                      }
                }
            ],
            "meta": []
        }


### Создать услугу [POST /services/{company_id}]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

  + Attributes

        + title: 'Стрижка женская' (required, string) - Название услуги
        + category_id: 2 (required, number) - ID категории услуг
        + active: 0 (optional, number) - Доступна ли для онлайн записи услуга. 1 - доступна, 0 не доступна.
        + api_id: '' (optional, string) - Внешний идентификатор услуги
        + weight (optional, number) -  Вес услуги (используется для сортировки услуг при отображении)
        + comment: '' (optional, string) - Комментарий к услуге
        + price_min: 0 (optional, number) - Минимальная стоимость услуги
        + price_max: 0 (optional, number) - Максимальная стоимость услуги
        + discount: 0 (optional, number) - Скидка при оказании услуги
        + staff (optional, ServiceStaff) - Сотрудники, оказываюшие услугу и длительность оказания услуги каждым из них
        + image_group_id (optional, number) - Id группы изображений



  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

  + Body

            {
                "title": "Мужская стрижка",
                "category_id": 83167,
                "price_min": 1300.00,
                "price_max": 1300.00,
                "discount": 0,
                "comment": "",
                "weight": 6,
                "active": 1,
                "api_id": "00000000042",
                "staff": [
                  {
                    "id": 5905,
                    "seance_length": 2700
                  },
                  {
                    "id": 5907,
                    "seance_length": 3600
                  },
                  {
                    "id": 8973,
                    "seance_length": 3600
                  },
                  {
                    "id": 13616,
                    "seance_length": 3600
                  },
                  {
                    "id": 16681,
                    "seance_length": 3600
                  },
                  {
                    "id": 1796",
                    "seance_length": 3600
                  },
                  {
                    "id": 34006,
                    "seance_length": 3600
                  }
                ]
            }


+ Response 201 (application/json)

        {
            "success": true,
            "data": {
                "id": 83169,
                "salon_service_id": 322888,
                "title": "Мужская стрижка",
                "category_id": 83167,
                "price_min": 1300.00,
                "price_max": 1300.00,
                "discount": 0,
                "comment": "",
                "weight": 6,
                "active": 1,
                "api_id": "00000000042",
                "staff": [
                  {
                    "id": 5905,
                    "seance_length": 2700
                  },
                  {
                    "id": 5907,
                    "seance_length": 3600
                  },
                  {
                    "id": 8973,
                    "seance_length": 3600
                  },
                  {
                    "id": 13616,
                    "seance_length": 3600
                  },
                  {
                    "id": 16681,
                    "seance_length": 3600
                  },
                  {
                    "id": 1796,
                    "seance_length": 3600
                  },
                  {
                    "id": 34006,
                    "seance_length": 3600
                  }
                ]
            },
            "meta": []
        }


### Изменить услугу [PUT]

+ Parameters

    + company_id (required, number) - ID компании
    + service_id (required, number) - ID услуги


+ Request (application/json)

  + Attributes

        + title: 'Стрижка женская' (required, string) - Название услуги
        + category_id: 2 (required, number) - ID категории услуг
        + active: 0 (optional, number) - Доступна ли для онлайн записи услуга. 1 - доступна, 0 не доступна.
        + api_id: '' (optional, string) - Внешний идентификатор услуги
        + weight (optional, number) -  Вес услуги (используется для сортировки услуг при отображении)
        + comment: '' (optional, string) - Комментарий к услуге
        + price_min: 0 (optional, number) - Минимальная стоимость услуги
        + price_max: 0 (optional, number) - Максимальная стоимость услуги
        + discount: 0 (optional, number) - Скидка при оказании услуги
        + staff (optional, ServiceStaff) - Сотрудники, оказываюшие услугу и длительность оказания услуги каждым из них
        + image_group_id (optional, number) - Id группы изображений


  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

  + Body

            {
                "title": "Мужская стрижка",
                "category_id": 83167,
                "price_min": 1300.00,
                "price_max": 1300.00,
                "discount": 0,
                "comment": "",
                "weight": 6,
                "active": 1,
                "api_id": "00000000042",
                "staff": [
                  {
                    "id": 5905,
                    "seance_length": 2700
                  },
                  {
                    "id": 5907,
                    "seance_length": 3600
                  },
                  {
                    "id": 8973,
                    "seance_length": 3600
                  },
                  {
                    "id": 13616,
                    "seance_length": 3600
                  },
                  {
                    "id": 16681,
                    "seance_length": 3600
                  },
                  {
                    "id": 1796",
                    "seance_length": 3600
                  },
                  {
                    "id": 34006,
                    "seance_length": 3600
                  }
                ]
            }


+ Response 201 (application/json)

        {
            "success": true,
            "data": {
                "id": 83169,
                "salon_service_id": 322888,
                "title": "Мужская стрижка",
                "category_id": 83167,
                "price_min": 1300.00,
                "price_max": 1300.00,
                "discount": 0,
                "comment": "",
                "weight": 6,
                "active": 1,
                "api_id": "00000000042",
                "staff": [
                  {
                    "id": 5905,
                    "seance_length": 2700
                  },
                  {
                    "id": 5907,
                    "seance_length": 3600
                  },
                  {
                    "id": 8973,
                    "seance_length": 3600
                  },
                  {
                    "id": 13616,
                    "seance_length": 3600
                  },
                  {
                    "id": 16681,
                    "seance_length": 3600
                  },
                  {
                    "id": 1796,
                    "seance_length": 3600
                  },
                  {
                    "id": 34006,
                    "seance_length": 3600
                  }
                ]
            },
            "meta": []
        }


### Удалить услугу [DELETE]

+ Parameters

    + company_id (required, number) - ID компании
    + service_id (required, number) - ID услуги


+ Request (application/json)


  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 204 (application/json)



# Group Пользователь

## Права доступа [/user/permissions/{company_id}]


Также можно получить список прав по определенной группе.

Пример: /user/permissions/{company_id}/?group_permissions[]=settings

| Значение | Описание |
| ------------- | ------------- | ------------- |
| 'settings' |    Список прав относящиеся к группе настройки |
| 'finances' |    Список прав относящиеся к группе финансы |
| 'loyalty' |    Список прав относящиеся к группе лояльность |
| 'notification' |    Список прав относящиеся к группе уведомления |
| 'storages' |    Список прав относящиеся к группе склады |
| 'clients' |    Список прав относящиеся к группе клиенты |
| 'dashboard' |    Список прав относящиеся к группе журнал записей |



В списке прав содержатся следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
| timetable_access                                                   | boolean |    true - есть доступ к журналу записи, false - нет доступа                                                                                                          |
| master_id                                                          | number  |    0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только того сотрудника, ID которого задан                                   |
| position_id                                                        | number  |    0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только ту должность, ID которого задан                                      |
| last_days_count                                                    | number  |    0 - не ограничить доступ к истории расписаний и записям                                                                                                           |
| schedule_edit_access                                               | boolean |    true - есть доступ к графику работы сотрудника в журнале, false - нет доступа                                                                                     |
| timetable_phones_access                                            | boolean |    true - есть доступ к номеру телефона в журнале записи, false - нет доступа                                                                                        |
| timetable_transferring_record_access                               | boolean |    true - есть доступ к переносу записей, false - нет доступа                                                                                                        |
| timetable_statistics_access                                        | boolean |    true - есть доступ к просмотру статистики, false - нет доступа                                                                                                    |
| record_form_access                                                 | boolean |    true - есть доступ к окну записи, false - нет доступа                                                                                                             |
| record_form_client_access                                          | boolean |    true - есть доступ к данным клиентов, false - нет доступа                                                                                                         |
| records_autocomplete_access                                        | boolean |    true - есть доступ к выпадающему списку с данными о клиентах, false - нет доступа                                                                                 |
| create_records_access                                              | boolean |    true - есть доступ к созданию записей, false - нет доступа              Создавать записи                                                                          |
| edit_records_access                                                | boolean |    true - есть доступ к изменение записей, false - нет доступа                                                                                                       |
| edit_records_attendance_access                                     | boolean |    true - есть доступ к записям со статусом визита "клиент пришел", false - нет доступа                                                                              |
| records_services_cost_access                                       | boolean |    true - есть доступ к изменению стоимости услуг, false - нет доступа                                                                                               |
| records_services_discount_access                                   | boolean |    true - есть доступ к изменению скидки на услуги, false - нет доступа                                                                                              |
| record_edit_full_paid_access                                       | boolean |    true - есть доступ к редактированию оплаченной записи, false - нет доступа                                                                                        |
| delete_records_access                                              | boolean |    true - есть доступ к удалению записи, false - нет доступа                                                                                                         |
| delete_customer_came_records_access                                | boolean |    true - есть доступ к удалению записей со статусом "клиент пришел", false - нет доступа                                                                            |
| delete_paid_records_access                                         | boolean |    true - есть доступ к удалению оплаченных записей, false - нет доступа                                                                                             |
| records_goods_access                                               | boolean |    true - есть доступ к продажам товаров, false - нет доступа                                                                                                        |
| records_goods_create_transaction_access                            | boolean |    true - есть доступ к созданию товарных транзакций, false - нет доступа                                                                                            |
| records_goods_create_last_days_count                               | number  |    -1 - есть доступ к созданию товарных транзакций за все время, >= 0 - доступ к созданию товарных транзакций за указанное количество дней прошлое                   |
| records_goods_edit_transaction_access                              | boolean |    true - есть доступ к редактированию товарных транзакций, false - нет доступа                                                                                      |
| records_goods_edit_last_days_count                                 | number  |    -1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое     |
| records_goods_cost_access                                          | boolean |    true - есть доступ к изменению стоимость товаров, false - нет доступа                                                                                             |
| records_goods_discount_access                                      | boolean |    true - есть доступ к изменению скидки на товары, false - нет доступа                                                                                              |
| records_finances_access                                            | boolean |    true - есть доступ к оплате, false - нет доступа                                                                                                                  |
| records_finances_last_days_count                                   | number  |    -1 - есть доступ к проведению оплаты в записях за все время, >= 0 - доступ к проведению оплаты в записях за указанное количество дней прошлое                     |
| records_finances_pay_from_deposits_access                          | boolean |    true - есть доступ к проведению оплаты в записях с личного счета клиента, false - нет доступа                                                                     |
| records_group_id_access                                            | boolean |    true - есть доступ к данным клиентов по сети, false - нет доступа                                                                                                 |
| records_group_id                                                   | number  |    ID сети к которой есть доступ к данным клиентов                                                                                                                   |
| finances_access                                                    | boolean |    true - есть доступ к финансам, false - нет доступа                                                                                                                |
| finances_accounts_ids                                              | array   |    массив ID к выбранным кассам                                                                                                                                      |
| finances_transactions_access                                       | boolean |    true - есть доступ к просмотру движений средств, false - нет доступа                                                                                              |
| finances_last_days_count                                           | number  |    -1 - есть доступ к просмотру движений средств за все время, >= 0 - доступ к просмотру движений средств за указанное количество дней прошлое                       |
| finances_create_transactions_access                                | boolean |    true - есть доступ к созданию транзакций, false - нет доступа                                                                                                     |
| finances_create_last_days_count                                    | number  |    -1 - есть доступ к созданию транзакций за все время, >= 0 - доступ к созданию транзакций за указанное количество дней прошлое                                     |
| finances_edit_transactions_access                                  | boolean |    true - есть доступ к редактированию транзакций, false - нет доступа                                                                                               |
| finances_edit_last_days_count                                      | number  |    -1 - есть доступ к редактированию транзакций за все время, >= 0 - доступ к редактированию транзакций за указанное количество дней прошлое                         |
| finances_delete_transactions_access                                | boolean |    true - есть доступ к удалению транзакций, false - нет доступа                                                                                                     |
| finances_transactions_excel_access                                 | boolean |    true - есть доступ к выгрузке движений средств в Excel, false - нет доступа                                                                                       |
| finances_expenses_ids                                              | array   |    true - есть доступ к переводам между кассами, false - нет доступа                                                                                                 |
| finances_accounts_access                                           | boolean |    true - есть доступ к счетам и кассам, false - нет доступа                                                                                                         |
| finances_accounts_banalce_access                                   | boolean |    true - есть доступ к балансу, false - нет доступа                                                                                                                 |
| finances_suppliers_read_access                                     | boolean |    true - есть доступ к контрагентам, false - нет доступа                                                                                                            |
| finances_suppliers_create_access                                   | boolean |    true - есть доступ к созданию контрагентов, false - нет доступа                                                                                                   |
| finances_suppliers_update_access                                   | boolean |    true - есть доступ к изменению контрагентов, false - нет доступа                                                                                                  |
| finances_suppliers_delete_access                                   | boolean |    true - есть доступ к удалению контрагентов, false - нет доступа                                                                                                   |
| finances_suppliers_excel_access                                    | boolean |    true - есть доступ к выгрузке в Excel, false - нет доступа                                                                                                        |
| finances_expenses_read_access                                      | boolean |    true - есть доступ к статье платежей, false - нет доступа                                                                                                         |
| expenses_read_access                                               | boolean |    true - есть доступ к статье платежей, false - нет доступа                                                                                                         |
| finances_expenses_create_access                                    | boolean |    true - есть доступ к созданию статьи платежа, false - нет доступа                                                                                                 |
| expenses_create_access                                             | boolean |    true - есть доступ к созданию статьи платежа, false - нет доступа                                                                                                 |
| finances_expenses_update_access                                    | boolean |    true - есть доступ к изменению статьи платежа, false - нет доступа                                                                                                |
| expenses_update_access                                             | boolean |    true - есть доступ к изменению статьи платежа, false - нет доступа                                                                                                |
| finances_expenses_delete_access                                    | boolean |    true - есть доступ к удалению статьи платежа, false - нет доступа                                                                                                 |
| expenses_delete_access                                             | boolean |    true - есть доступ к удалению статьи платежа, false - нет доступа                                                                                                 |
| finances_kkm_transactions_access                                   | boolean |    true - есть доступ к операциям с KKM, false - нет доступа                                                                                                         |
| kkm_transactions_accounts_access                                   | boolean |    true - есть доступ к операциям с KKM, false - нет доступа                                                                                                         |
| finances_kkm_settings_read_access                                  | boolean |    true - есть доступ к настройкам KKM, false - нет доступа                                                                                                          |
| kkm_settings_reed_access                                           | boolean |    true - есть доступ к настройкам KKM, false - нет доступа                                                                                                          |
| finances_kkm_settings_update_access                                | boolean |    true - есть доступ к изменению KKM, false - нет доступа                                                                                                           |
| kkm_settings_update_access                                         | boolean |    true - есть доступ к изменению KKM, false - нет доступа                                                                                                           |
| finances_settings_invoicing_read_access                            | boolean |    true - есть доступ к онлайн-оплатам, false - нет доступа                                                                                                          |
| finances_settings_invoicing_update_access                          | boolean |    true - есть доступ к изменению онлайн-оплат, false - нет доступа                                                                                                  |
| settings_invoicing_update_access                                   | boolean |    true - есть доступ к изменению онлайн-оплат, false - нет доступа                                                                                                  |
| finances_options_read_access                                       | boolean |    true - есть доступ к настройкам оплаты, false - нет доступа                                                                                                       |
| finances_options_update_access                                     | boolean |    true - есть доступ к изменению настроек оплаты, false - нет доступа                                                                                               |
| options_update_access                                              | boolean |    true - есть доступ к изменению настроек оплаты, false - нет доступа                                                                                               |
| finances_salary_schemes_access                                     | boolean |    true - есть доступ к схемам расчета заработной платы, false - нет доступа                                                                                         |
| finances_salary_calc_access                                        | boolean |    true - есть доступ к расчету заработной платы, false - нет доступа                                                                                                |
| finances_salary_not_limitation_today_access                        | boolean |    true - есть доступ к расчету заработной платы, false - доступ к расчету заработной платы за текущий день                                                          |
| finances_payroll_calculation_create_access                         | boolean |    true - есть доступ к начислению заработной платы, false - нет доступа                                                                                             |
| finances_payroll_calculation_create_not_limitation_today_access    | boolean |    true - есть доступ к начислению заработной платы, false - доступ к начислению заработной платы за текущий день                                                    |
| finances_salary_access_master_checkbox                             | boolean |    true - есть доступ к расчету заработной платы только конкретного сотрудника, false - полный доступ                                                                |
| finances_salary_access_master_id                                   | number  |    ID сотрудника к которому есть доступ на расчет заработной платы                                                                                                   |
| get_salary_access_master_id                                        | number  |    ID сотрудника к которому есть доступ на расчет заработной платы                                                                                                   |
| finances_salary_master_not_limitation_today_access                 | boolean |    true - не ограничивать текущим днем, false - доступ только на сегодняшний день                                                                                    |
| finances_payroll_calculation_create_by_master_access               | boolean |    true - есть доступ к начислению заработной платы по конкретному сотруднику, false - без ограничений                                                               |
| calculation_create_by_master_not_limitation_today_access           | boolean |    true - есть доступ к начислению заработной платы, false - нет доступа                                                                                             |
| finances_period_report_access                                      | boolean |    true - есть доступ к отчету за период, false - нет доступа                                                                                                        |
| finances_period_report_excel_access                                | boolean |    true - есть доступ к выгрузке в Excel отчета за период, false - нет доступа                                                                                       |
| finances_year_report_access                                        | boolean |    true - есть доступ к годовому отчету, false - нет доступа                                                                                                         |
| finances_year_report_excel_access                                  | boolean |    true - есть доступ к выгрузке в Excel годового отчета, false - нет доступа                                                                                        |
| finances_print_check_access                                        | boolean |    true - есть доступ к печати чека, false - нет доступа                                                                                                             |
| finances_z_report_access                                           | boolean |    true - есть доступ к отчету по кассе за день, false - нет доступа                                                                                                 |
| finances_z_report_no_limit_today_access                            | boolean |    true - есть доступ к отчету по кассе, false - доступ к отчету по кассе за текущий день                                                                            |
| finances_z_report_excel_access                                     | boolean |    true - есть доступ к выгрузке в Excel, false - нет доступа
| clients_access                                                     | boolean |    true - есть доступ к клиентской базе, false - нет доступа                                                                                                         |
| clients_phones_email_access                                        | boolean |    true - есть доступ к номерам телефонов и email в списке клиентов, false - нет доступа                                                                                     |
| client_phones_access                                               | boolean |    true - есть доступ к номерам телефонов в списке клиентов, false - нет доступа                                                                                     |
| clients_card_phone_access                                          | boolean |    true - есть доступ к телефонам в карточке клиента, false - нет доступа                                                                                            |
| clients_delete_access                                              | boolean |    true - есть доступ к удалению клиентов, false - нет доступа                                                                                                       |
| clients_excel_access                                               | boolean |    true - есть доступ к выгрузке списка клиентов в Excel, false - нет доступа                                                                                       |
| excel_access                                                       | number  |    1 - есть доступ к выгрузке списка клиентов в Excel, 0 - нет доступа                                                                                              |
| client_comments_list_access                                        | boolean |    true - есть доступ к просмотру комментарии, false - нет доступа                                                                                                   |
| client_comments_add_access                                         | boolean |    true - есть доступ к добавлению комментарии, false - нет доступа                                                                                                  |
| client_comments_own_edit_access                                    | boolean |    true - есть доступ к изменению/удалению своих комментарии, false - нет доступа                                                                                    |
| client_comments_other_edit_access                                  | boolean |    true - есть доступ к изменению/удалению чужих комментарии, false - нет доступа                                                                                    |
| client_files_list_access                                           | boolean |    true - есть доступ к просмотрам и скачиванию файлов, false - нет доступа                                                                                           |
| client_files_upload_access                                         | boolean |    true - есть доступ к загрузке файлов, false - нет доступа                                                                                                          |
| client_files_delete_access                                         | boolean |    true - есть доступ к удалению файлов, false - нет доступа                                                                                                         |
| clients_visit_master_id                                            | number  |    ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений                                                                          |
| get_visit_master_id                                                | number  |    ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений                                                                          |
| dashboard_access                                                   | boolean |    true - есть доступ к разделу обзор, false - нет доступа                                                                                                           |
| dash_access                                                        | boolean |    true - есть доступ к разделу сводка, false - нет доступа                                                                                                          |
| dash_phones_access                                                 | boolean |    true - есть доступ к показу номера телефонов в сводке, false - нет доступа                                                                                        |
| dash_records_access                                                | boolean |    true - есть доступ к просмотру списка записей, false - нет доступа                                                                                                |
| dash_records_last_days_count                                       | number  |    -1 - есть доступ к просмотру списка записей за все время, >= 0 - доступ к просмотру списка записей за указанное количество дней прошлое                           |
| dash_records_excel_access                                          | boolean |    true - есть доступ к выгрузке списка записей в Excel, false - нет доступа                                                                                        |
| dash_records_phones_access                                         | boolean |    true - есть доступ к показу номера телефонов в записях, false - нет доступа                                                                                       |
| dash_message_access                                                | boolean |    true - есть доступ к просмотру детализаций сообщений, false - нет доступа                                                                                          |
| dash_message_excel_access                                          | boolean |    true - есть доступ к выгрузке детализаций сообщений в Excel, false - нет доступа                                                                                  |
| dash_message_phones_access                                         | boolean |    true - есть доступ к показу номера телефонов в сообщениях, false - нет доступа                                                                                    |
| dash_reviews_access                                                | boolean |    true - есть доступ к просмотру отзывов, false - нет доступа                                                                                                       |
| dash_reviews_delete_access                                         | boolean |    true - есть доступ к удалению отзывов, false - нет доступа                                                                                                        |
| dashboard_calls_access                                             | boolean |    true - есть доступ к разделу звонки, false - нет доступа                                                                                                          |
| dashboard_calls_excel_access                                       | boolean |    true - есть доступ к выгрузке звонков Excel, false - нет доступа                                                                                                  |
| dashboard_calls_phones_access                                      | boolean |    true - есть доступ к просмотру номера телефона у клиентов, false - нет доступа                                                                                    |
| notification                                                       | boolean |    true - есть доступ к Уведомления, false - нет доступа                                                                                                                |
| web_push                                                           | boolean |    true - есть доступ к показу Push уведомлений о записях в Web-версии, false - нет доступа                                                                             |
| web_phone_push                                                     | boolean |    true - есть доступ к показу Push уведомлений о звонках в Web-версии, false - нет доступа                                                                             |
| notification_sms_ending_license                                    | boolean |    true - есть доступ к отправки SMS уведомлений о скором окончании лицензии, false - нет доступа                                                                       |
| notification_sms_low_balance                                       | boolean |    true - есть доступ к отправки SMS уведомлений о низком балансе, false - нет доступа                                                                                  |
| notification_email_ending_license                                  | boolean |    true - есть доступ к отправки Email уведомлений о скором окончании лицензии, false - нет доступа                                                                     |
| loyalty_access                                                     | boolean |    true - есть доступ к лояльности, false - нет доступа                                                                                                                 |
| has_loyalty_access                                                 | boolean |    true - есть доступ к лояльности, false - нет доступа                                                                                                                 |
| loyalty_cards_manual_transactions_access                           | boolean |    true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа                                                                            |
| has_loyalty_cards_manual_transactions_access                       | boolean |    true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа                                                                            |
| loyalty_certificate_and_abonement_manual_transactions_access       | boolean |    true - есть доступ к оплате сертификатом и абонементом без кода, false - нет доступа                                                                                 |
| storages_access                                                    | boolean |    true - есть доступ к складу, false - нет доступа                                                                                                                     |
| storages_ids                                                       | boolean |    true - есть доступ к выбранным складам, false - нет доступа                                                                                                          |
| storages_transactions_access                                       | boolean |    true - есть доступ к просмотру движений товаров, false - нет доступа                                                                                                 |
| storages_last_days_count                                           | number  |    -1 - есть доступ к просмотру движений товаров за все время, >= 0 - доступ к просмотру движений товаров за указанное количество дней прошлое                          |
| storages_move_goods_access                                         | boolean |    true - есть доступ к перемещение товаров между складами, false - нет доступа                                                                                         |
| storages_create_transactions_access                                | boolean |    true - есть доступ к созданию товарных транзакций, false - нет доступа                                                                                               |
| storages_create_last_days_count                                    | number  |    -1 - есть доступ к создание товарных транзакций за все время, >= 0 - доступ к создание товарных транзакций за указанное количество дней прошлое                      |
| storages_create_transactions_buy_access                            | boolean |    true - есть доступ к оформлению прихода товаров, false - нет доступа                                                                                                 |
| storages_create_transactions_sale_access                           | boolean |    true - есть доступ к оформлению продаж товаров, false - нет доступа                                                                                                  |
| storages_edit_transactions_access                                  | boolean |    true - есть доступ к редактированию товарных транзакций, false - нет доступа                                                                                         |
| storages_edit_last_days_count                                      | number  |    -1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое          |
| storages_edit_transactions_buy_access                              | boolean |    true - есть доступ к оформлению прихода товаров, false - нет доступа                                                                                                 |
| storages_edit_transactions_sale_access                             | boolean |    true - есть доступ к оформлению продаж товаров, false - нет доступа                                                                                                  |
| storages_delete_transactions_access                                | boolean |    true - есть доступ к удалению товарных транзакций, false - нет доступа                                                                                               |
| storages_transactions_excel_access                                 | boolean |    true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа                                                                                          |
| storages_transactions_types                                        | boolean |    true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа                                                                                          |
| storages_inventory_access                                          | boolean |    true - есть доступ к инвентаризации, false - нет доступа                                                                                                             |
| storages_inventory_create_edit_access                              | boolean |    true - есть доступ к созданию и редактированию инвентаризации, false - нет доступа                                                                                   |
| storages_inventory_delete_access                                   | boolean |    true - есть доступ к удалению инвентаризации, false - нет доступа                                                                                                    |
| storages_inventory_excel_access                                    | boolean |    true - есть доступ к выгрузке инвентаризации в Excel, false - нет доступа                                                                                            |
| storages_remnants_report_access                                    | boolean |    true - есть доступ к отчету остатков на складе, false - нет доступа                                                                                                  |
| storages_remnants_report_excel_access                              | boolean |    true - есть доступ к выгрузке остатков в Excel, false - нет доступа                                                                                                  |
| storages_sales_report_access                                       | boolean |    true - есть доступ к отчету по продажам, false - нет доступа                                                                                                         |
| storages_sales_report_excel_access                                 | boolean |    true - есть доступ к выгрузке отчета по продажам в Excel, false - нет доступа                                                                                        |
| storages_consumable_report_access                                  | boolean |    true - есть доступ к отчету по списанию расходников, false - нет доступа                                                                                             |
| storages_consumable_report_excel_access                            | boolean |    true - есть доступ к выгрузке отчета по списанию расходников в Excel, false - нет доступа                                                                            |
| storages_write_off_report_access                                   | boolean |    true - есть доступ к отчету по списанию товаров, false - нет доступа                                                                                                 |
| storages_write_off_report_excel_access                             | boolean |    true - есть доступ к выгрузке отчета по списанию товаров в Excel, false - нет доступа                                                                                |
| storages_turnover_report_access                                    | boolean |    true - есть доступ к отчету по оборачиваемости, false - нет доступа                                                                                                  |
| storages_turnover_report_excel_access                              | boolean |    true - есть доступ к выгрузке отчета по оборачиваемости в Excel, false - нет доступа                                                                                 |
| storages_goods_crud_access                                         | boolean |    true - есть доступ к управлению товарами, false - нет доступа                                                                                                        |
| storages_goods_create_access                                       | boolean |    true - есть доступ к созданию товаров, false - нет доступа                                                                                                           |
| storages_goods_update_access                                       | boolean |    true - есть доступ к изменению товаров, false - нет доступа                                                                                                          |
| storages_goods_title_edit_access                                   | boolean |    true - есть доступ к названию, Артикул, Штрих-код, false - нет доступа                                                                                               |
| storages_goods_category_edit_access                                | boolean |    true - есть доступ к категориям, false - нет доступа                                                                                                                 |
| storages_goods_selling_price_edit_access                           | boolean |    true - есть доступ к ценам продажи, false - нет доступа                                                                                                              |
| storages_goods_cost_price_edit_access                              | boolean |    true - есть доступ к себестоимости, false - нет доступа                                                                                                              |
| storages_goods_units_edit_access                                   | boolean |    true - есть доступ к единицам измерения, false - нет доступа                                                                                                         |
| storages_goods_critical_balance_edit_access                        | boolean |    true - есть доступ к критичным остаткам, Желаемый остаток, false - нет доступа                                                                                      |
| storages_goods_masses_edit_access                                  | boolean |    true - есть доступ к массе, false - нет доступа                                                                                                                      |
| storages_goods_comment_edit_access                                 | boolean |    true - есть доступ к комментариям, false - нет доступа                                                                                                               |
| storages_goods_archive_access                                      | boolean |    true - есть доступ к архивации и восстановлению товаров, false - нет доступа                                                                                         |
| storages_goods_delete_access                                       | boolean |    true - есть доступ к удалению товаров, false - нет доступа                                                                                                           |
| settings_access                                                    | boolean |    true - есть доступ к разделу настройки, false - нет доступа                                                                                                          |
| settings_basis_access                                              | boolean |    true - есть доступ к разделу Основные, false - нет доступа                                                                                                           |
| settings_information_access                                        | boolean |    true - есть доступ к разделу Информация, false - нет доступа                                                                                                         |
| users_access                                                       | boolean |    true - есть доступ к управлению пользователями, false - нет доступа                                                                                                  |
| delete_users_access                                                | boolean |    true - есть доступ к удалению пользователей, false - нет доступа                                                                                                     |
| create_users_access                                                | boolean |    true - есть доступ к добавлению пользователей, false - нет доступа                                                                                                   |
| edit_users_access                                                  | boolean |    true - есть доступ к управлению правами пользователей, false - нет доступа                                                                                           |
| limited_users_access                                               | boolean |    true - есть доступ к управлению правами в рамках своего набора прав, false - нет доступа                                                                             |
| settings_services_access                                           | boolean |    true - есть доступ к разделу Услуги, false - нет доступа                                                                                                             |
| settings_services_create_access                                    | boolean |    true - есть доступ к созданию услуг, false - нет доступа                                                                                                             |
| services_edit                                                      | boolean |    true - есть доступ к редактированию услуг, false - нет доступа                                                                                                       |
| settings_services_edit_title_access                                | boolean |    true - есть доступ к названиям услуг и название для онлайн-записи, false - нет доступа                                                                               |
| settings_services_relation_category_access                         | boolean |    true - есть доступ к категориям услуги, false - нет доступа                                                                                                          |
| settings_services_edit_price_access                                | boolean |    true - есть доступ к ценам услуг, false - нет доступа                                                                                                                |
| settings_services_edit_image_access                                | boolean |    true - есть доступ к загрузкам и изменениям изображений, false - нет доступа                                                                                         |
| settings_services_edit_online_seance_date_time_access              | boolean |    true - есть доступ к отображениям услуг в виджете, false - нет доступа                                                                                               |
| settings_services_edit_online_pay_access                           | boolean |    true - есть доступ к онлайн-оплате услуги, false - нет доступа                                                                                                       |
| settings_services_edit_services_related_resource_access            | boolean |    true - есть доступ к ресурсам услуги, false - нет доступа                                                                                                            |
| settings_positions_read                                            | boolean |    true - есть доступ к разделу должности, false - нет доступа                                                                                                          |
| settings_positions_create                                          | boolean |    true - есть доступ к созданию должностей, false - нет доступа                                                                                                        |
| settings_positions_delete                                          | boolean |    true - есть доступ к удалению должностей, false - нет доступа                                                                                                        |
| edit_master_service_and_duration                                   | boolean |    true - есть доступ к изменению услуги сотрудников и их длительность, false - нет доступа                                                                             |
| tech_card_edit                                                     | boolean |    true - есть доступ к изменению технологической карты, false - нет доступа                                                                                              |
| services_delete                                                    | boolean |    true - есть доступ к удалению услуг, false - нет доступа                                                                                                             |
| settings_master_access                                             | boolean |    true - есть доступ к разделу Сотрудники, false - нет доступа                                                                                                         |
| master_create                                                      | boolean |    true - есть доступ к созданию сотрудников, false - нет доступа                                                                                                       |
| master_edit                                                        | boolean |    true - есть доступ к редактированию сотрудников, false - нет доступа                                                                                                 |
| master_delete                                                      | boolean |    true - есть доступ к удалению сотрудников, false - нет доступа                                                                                                       |
| settings_master_dismiss_access                                     | boolean |    true - есть доступ к увольнению сотрудников, false - нет доступа                                                                                                     |
| schedule_edit                                                      | boolean |    true - есть доступ к редактированию графика работы, false - нет доступа                                                                                              |
| settings_notifications_access                                      | boolean |    true - есть доступ к разделу Sms уведомления, false - нет доступа                                                                                                    |
| settings_email_notifications_access                                | boolean |    true - есть доступ к разделу Email уведомления, false - нет доступа                                                                                                  |
| settings_template_notifications_access                             | boolean |    true - есть доступ к разделу Типы уведомлений, false - нет доступа                                                                                                   |
| webhook_read_access                                                | boolean |    true - есть доступ к изменению настроек WebHook, false - нет доступа                                                                                                 |
| stat_access                                                        | boolean |    true - есть доступ к аналитике, false - нет доступа                                                                                                                  |
| billing_access                                                     | boolean |    true - есть доступ к биллингу (раздел меню баланс), false - нет доступа                                                                                              |
| send_sms                                                           | boolean |    true - есть доступ к SMS рассылки клиентам, false - нет доступа                                                                                                      |
| auth_enable_check_ip                                               | boolean |    true - есть доступ к филиалу только с IP-адресов (v4, v6), false - нет доступа                                                                                       |
| auth_list_allowed_ip                                               | array   |    список IP адресов


+ Параметр
    + company_id (required, number, `1`) - ID компании

### Получить список прав [GET]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token



+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "timetable": {
                    "timetable_access": true,
                    "master_id": 1000238,
                    "position_id": 0,
                    "last_days_count": 1000,
                    "schedule_edit_access": true,
                    "timetable_phones_access": true,
                    "timetable_transferring_record_access": true,
                    "timetable_statistics_access": true
                },
                "record_form": {
                    "record_form_access": true,
                    "record_form_client_access": true,
                    "records_autocomplete_access": true,
                    "create_records_access": true,
                    "edit_records_access": true,
                    "edit_records_attendance_access": true,
                    "records_services_cost_access": true,
                    "records_services_discount_access": true,
                    "record_edit_full_paid_access": true,
                    "delete_records_access": true,
                    "delete_customer_came_records_access": true,
                    "delete_paid_records_access": true,
                    "records_goods_access": true,
                    "records_goods_create_transaction_access": true,
                    "records_goods_create_last_days_count": -1,
                    "records_goods_edit_transaction_access": true,
                    "records_goods_edit_last_days_count": -1,
                    "records_goods_cost_access": true,
                    "records_goods_discount_access": true,
                    "records_finances_access": true,
                    "records_finances_last_days_count": -1,
                    "records_finances_pay_from_deposits_access": true,
                    "records_group_id_access": true,
                    "records_group_id": 134178
                },
                "finances": {
                    "finances_access": true,
                    "finances_accounts_ids": [],
                    "finances_transactions_access": true,
                    "finances_last_days_count": -1,
                    "finances_create_transactions_access": true,
                    "finances_create_last_days_count": -1,
                    "finances_edit_transactions_access": true,
                    "finances_edit_last_days_count": -1,
                    "finances_delete_transactions_access": true,
                    "finances_transactions_excel_access": true,
                    "finances_expenses_ids": [],
                    "finances_accounts_access": true,
                    "finances_accounts_banalce_access": true,
                    "finances_suppliers_read_access": true,
                    "finances_suppliers_create_access": true,
                    "finances_suppliers_update_access": true,
                    "finances_suppliers_delete_access": true,
                    "finances_suppliers_excel_access": true,
                    "finances_expenses_read_access": true,
                    "expenses_read_access": true,
                    "finances_expenses_create_access": true,
                    "expenses_create_access": true,
                    "finances_expenses_update_access": true,
                    "expenses_update_access": true,
                    "finances_expenses_delete_access": true,
                    "expenses_delete_access": true,
                    "finances_kkm_transactions_access": true,
                    "kkm_transactions_accounts_access": true,
                    "finances_kkm_settings_read_access": true,
                    "kkm_settings_reed_access": true,
                    "finances_kkm_settings_update_access": true,
                    "kkm_settings_update_access": true,
                    "finances_settings_invoicing_read_access": true,
                    "settings_invoicing_read_access": true,
                    "finances_settings_invoicing_update_access": true,
                    "settings_invoicing_update_access": true,
                    "finances_options_read_access": true,
                    "options_read_access": true,
                    "finances_options_update_access": true,
                    "options_update_access": true,
                    "finances_salary_schemes_access": true,
                    "finances_salary_calc_access": true,
                    "finances_salary_not_limitation_today_access": true,
                    "finances_payroll_calculation_create_access": true,
                    "finances_payroll_calculation_create_not_limitation_today_access": true,
                    "finances_salary_access_master_checkbox": true,
                    "finances_salary_access_master_id": 1000237,
                    "get_salary_access_master_id": 1000237,
                    "finances_salary_master_not_limitation_today_access": true,
                    "finances_payroll_calculation_create_by_master_access": true,
                    "calculation_create_by_master_not_limitation_today_access": true,
                    "finances_period_report_access": true,
                    "finances_period_report_excel_access": true,
                    "finances_year_report_access": true,
                    "finances_year_report_excel_access": true,
                    "finances_print_check_access": true,
                    "finances_z_report_access": true,
                    "finances_z_report_no_limit_today_access": true,
                    "finances_z_report_excel_access": true
                },
                "clients": {
                    "clients_access": true,
                    "client_phones_access": true,
                    "clients_phones_email_access": true,
                    "clients_card_phone_access": true,
                    "clients_delete_access": true,
                    "clients_excel_access": true,
                    "excel_access": true,
                    "client_comments_list_access": true,
                    "client_comments_add_access": true,
                    "client_comments_own_edit_access": true,
                    "client_comments_other_edit_access": true,
                    "client_files_list_access": true,
                    "client_files_upload_access": true,
                    "client_files_delete_access": true,
                    "clients_visit_master_id": 0,
                    "get_visit_master_id": 0
                },
                "dashboard": {
                    "dashboard_access": true,
                    "dash_access": true,
                    "dash_phones_access": true,
                    "dash_records_access": true,
                    "dash_records_last_days_count": -1,
                    "dash_records_excel_access": true,
                    "dash_records_phones_access": true,
                    "dash_message_access": true,
                    "dash_message_excel_access": true,
                    "dash_message_phones_access": true,
                    "dash_reviews_access": true,
                    "dash_reviews_delete_access": true,
                    "dashboard_calls_access": true,
                    "dashboard_calls_excel_access": true,
                    "dashboard_calls_phones_access": true
                },
                "notification": {
                    "notification": true,
                    "web_push": true,
                    "web_phone_push": true,
                    "notification_sms_ending_license": true,
                    "notification_sms_low_balance": true,
                    "notification_email_ending_license": true
                },
                "loyalty": {
                    "loyalty_access": true,
                    "has_loyalty_access": true,
                    "loyalty_cards_manual_transactions_access": true,
                    "has_loyalty_cards_manual_transactions_access": true,
                    "loyalty_certificate_and_abonement_manual_transactions_access": true
                },
                "storages": {
                    "storages_access": true,
                    "storages_ids": [],
                    "storages_transactions_access": true,
                    "storages_last_days_count": -1,
                    "storages_move_goods_access": true,
                    "storages_create_transactions_access": true,
                    "storages_create_last_days_count": -1,
                    "storages_create_transactions_buy_access": true,
                    "storages_create_transactions_sale_access": true,
                    "storages_edit_transactions_access": true,
                    "storages_edit_last_days_count": -1,
                    "storages_edit_transactions_buy_access": true,
                    "storages_edit_transactions_sale_access": true,
                    "storages_delete_transactions_access": true,
                    "storages_transactions_excel_access": true,
                    "storages_transactions_types": [],
                    "storages_inventory_access": true,
                    "storages_inventory_create_edit_access": true,
                    "storages_inventory_delete_access": true,
                    "storages_inventory_excel_access": true,
                    "storages_remnants_report_access": true,
                    "storages_remnants_report_excel_access": true,
                    "storages_sales_report_access": true,
                    "storages_sales_report_excel_access": true,
                    "storages_consumable_report_access": true,
                    "storages_consumable_report_excel_access": true,
                    "storages_write_off_report_access": true,
                    "storages_write_off_report_excel_access": true,
                    "storages_turnover_report_access": true,
                    "storages_turnover_report_excel_access": true,
                    "storages_goods_crud_access": true,
                    "storages_goods_create_access": true,
                    "storages_goods_update_access": true,
                    "storages_goods_title_edit_access": true,
                    "storages_goods_category_edit_access": true,
                    "storages_goods_selling_price_edit_access": true,
                    "storages_goods_cost_price_edit_access": true,
                    "storages_goods_units_edit_access": true,
                    "storages_goods_critical_balance_edit_access": true,
                    "storages_goods_masses_edit_access": true,
                    "storages_goods_comment_edit_access": true,
                    "storages_goods_archive_access": true,
                    "storages_goods_delete_access": true
                },
                "settings": {
                    "settings_access": true,
                    "settings_basis_access": true,
                    "settings_information_access": true,
                    "users_access": true,
                    "delete_users_access": true,
                    "create_users_access": true,
                    "edit_users_access": true,
                    "limited_users_access": false,
                    "settings_services_access": true,
                    "settings_services_create_access": true,
                    "services_edit": true,
                    "settings_services_edit_title_access": true,
                    "settings_services_relation_category_access": true,
                    "settings_services_edit_price_access": true,
                    "settings_services_edit_image_access": true,
                    "settings_services_edit_online_seance_date_time_access": true,
                    "settings_services_edit_online_pay_access": true,
                    "settings_services_edit_services_related_resource_access": true,
                    "settings_positions_read": true,
                    "settings_positions_create": true,
                    "settings_positions_delete": true,
                    "edit_master_service_and_duration": true,
                    "tech_card_edit": true,
                    "services_delete": true,
                    "settings_master_access": true,
                    "master_create": true,
                    "master_edit": true,
                    "master_delete": true,
                    "settings_master_dismiss_access": true,
                    "schedule_edit": true,
                    "settings_notifications_access": true,
                    "settings_email_notifications_access": true,
                    "settings_template_notifications_access": true,
                    "webhook_read_access": true
                },
                "other": {
                    "stat_access": true,
                    "billing_access": true,
                    "send_sms": true,
                    "auth_enable_check_ip": false,
                    "auth_list_allowed_ip": []
                }
            },
            "meta": []
        }


## Приглашение к управлению филиалом [/user/invite/{salon_id}]

Приглашение к управлению филиалом предполагает отправку по e-mail или телефону ссылки. Перейдя по этой ссылке, пользователь после регистрации получает доступ к управлению филиалом в соответствии с назначенными правами.
Назначение прав осуществляется после отправки приглашения отдельным запросом.

### Создание и отправка приглашения [POST]

+ Parameters

    + salon_id (required, number) - ID филиала

+ Attributes

    + invites (required, array) - массив контактных данных отправляемых приглашений (не более 15 одновременно). Каждый элемент массива - это объект с полями:

        + name (required, string) - имя приглашаемого пользователя
        + search (required, string) - e-mail или телефон, на который будет отправлена ссылка-приглашение
        + position (optional, string) - должность приглашаемого пользователя для отображения в списке приглашений

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "invites": [
                    {
                        "name": "Оксана",
                        "search": "oxana@email.com",
                        "position": "парикмахер"
                    },
                    {
                        "name": "Денис",
                        "search": "791234567890"
                    }
                ]
            }

+ Response 202 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Сохранено"
                }
            }




# Group Сотрудники

Для работы с сотрудниками используются следующие методы

Объект сотрудника имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор сотрудника  |
|  api_id  |  string\|null  |  Внешний идентификатор сотрудника  |
|  name  | string  |  Имя сотрудника  |
|  specialization  | string  |  Специализация сотрудника  |
|  position  | object  |  Должность сотрудника  |
|  weight  | number  |  Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые  |
|  show_rating  | number  |  Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)  |
|  rating  | number  |  Рейтинг сотрудника  |
|  votes_count  | number  |  Кол-во голос, оценивших сотрудника  |
|  comments_count  | number  |  Кол-во комментариев к сотруднику  |
|  avatar  | string  |  Путь к файлу аватарки сотрудника  |
|  avatar_big  | string  |  Путь к файлу аватарки сотрудника в более высоком разрешении |
|  information  | string  |  Дополнительная информация о сотруднике (HTML формат)  |
|  hidden  | number  |  1 - скрыт от онлайн записей, 0 - не скрыт  |
|  fired  | number  |  1 - уволен, 0 - не уволен  |
|  status  | number  |  .......... |
|  image_group | object | Группа изображений сотрудника |

## Коллекция сотрудников [/staff/{company_id}/{staff_id}]

+ Параметр
    + company_id (required, number, `1`) - ID компании
    + staff_id (optional, number, `1`) - ID сотрудника

### Получить список сотрудников / конкретного сотрудника [GET /company/{company_id}/staff/{staff_id}]

+ Parameters

    + company_id (required, number) - ID филиала
    + staff_id (optional, number) - ID сотрудника, если нужно работать с конкретным сотрудником.

+ Request (application/json)

  + Headers
        Authorization: Bearer partner_token

+ Response 200 (application/json)
    {
         "success": true,
         "data": [
             {
             "id": 1001539,
             "name": "Сотрудник 1",
             "company_id": 176275,
             "specialization": "специалист",
             "position": {
                "id": 1,
                "title": "Администратор"
             },
             "avatar": "https://yclients.com/images/no-master-sm.png",
             "avatar_big": "https://yclients.com/images/no-master.png",
             "fired": 0,
             "status": 0,
             "hidden": 0
             }
         ],
         "meta": {
            "total_count": 1
         }
    }

+ Response 403 (application/json)
{
     "success": false,
     "data": null,
     "meta": {
         "message": Необходимо продлить лицензию в филиале с id: {company_id}"
     }
}

+ Response 404 (application/json)
    {
         "success": false,
         "data": null,
         "meta": {
             "message": Не указан филиал."
         }
    }

+ Response 404 (application/json)
    {
         "success": false,
         "data": null,
         "meta": {
             "message": Не указан сотрудник."
         }
    }

+ Response 404 (application/json)
    {
         "success": false,
         "data": null,
         "meta": {
             "message": Сотрудник с ID {staff_id} не найден в филиале {company_id}."
         }
    }

### Устаревшее. Получить список сотрудников / конкретного сотрудника [GET /staff/{company_id}/{staff_id}]

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (optional, number) - ID сотрудника, если нужно работать с конкретным сотрудником.


+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                "id": "17969",
                "api_id": null,
                "name": "Василий",
                "specialization": "парикмахер",
                "position": {
                   "id": 1,
                   "title": "Администратор"
                },
                "show_rating": "0",
                "rating": "0",
                "votes_count": "0",
                "avatar": "https://yclients.com/uploads/masters/sm/20151018220924_4963.jpg",
                "avatar_big": "https://yclients.com/uploads/masters/norm/20151018220924_4963.jpg",
                "comments_count": "0",
                "weight": "10",
                "information": "<span><span><span>&nbsp;</span></span></span>",
                "hidden": "0",
                "fired": "0",
                "status": "0",
                "image_group": {
                    "id": 72250,
                    "entity": "master",
                    "entity_id": 26427,
                    "images": {
                      "sm": {
                        "id": "186817",
                        "path": "https://yclients.com/uploads/masters/sm/9/90/9041171cfdabe4c_20170327201442.jpeg",
                        "width": "100",
                        "height": "100",
                        "type": "jpeg",
                        "image_group_id": 72250,
                        "version": "sm"
                      },
                      "norm": {
                        "id": "186818",
                        "path": "https://yclients.com/uploads/masters/norm/a/aa/aa37b29b7eb322d_20170327201442.jpeg",
                        "width": "180",
                        "height": "220",
                        "type": "jpeg",
                        "image_group_id": 72250,
                        "version": "norm"
                      },
                      "origin": {
                        "id": "186819",
                        "path": "https://yclients.com/uploads/masters/origin/6/65/654dbeb4ea0bbc3_20170327201442.jpeg",
                        "width": "800",
                        "height": "600",
                        "type": "jpeg",
                        "image_group_id": 72250,
                        "version": "origin"
                      }
                    }
                },
                {
                    "id": "34006",
                    "api_id": "42",
                    "name": "Денис",
                    "specialization": "парикмахер",
                    "position": [],
                    "show_rating": "0",
                    "rating": "0",
                    "votes_count": "0",
                    "avatar": "https://yclients.com/uploads/masters/sm/20151116091208_4369.jpg",
                    "avatar_big": "https://yclients.com/uploads/masters/norm/20151116091208_4369.jpg",
                    "comments_count": "0",
                    "weight": "9",
                    "information": "<span><span>&nbsp;</span></span>",
                    "hidden": "0",
                    "fired": "0",
                    "status": "0",
                    "image_group" : []
                },
                {
                    "id": "13616",
                    "api_id": null,
                    "name": "Александр",
                    "specialization": "парикмахер",
                    "position": [],
                    "show_rating": "0",
                    "rating": "4.76921",
                    "votes_count": "0",
                    "avatar": "https://yclients.com/uploads/masters/sm/20141112123913_5162.jpg",
                    "avatar_big": "https://yclients.com/uploads/masters/norm/20141112123913_5162.jpg",
                    "comments_count": "26",
                    "weight": "8",
                    "information": "<span><span><span>&nbsp;</span></span></span>",
                    "hidden": "0",
                    "fired": "0",
                    "status": "0",
                    "image_group" : []
                }
            ],
            "meta": []
        }


### Добавить нового сотрудника [POST /staff/{company_id}]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

  + Attributes

        + name: 'Лена Зубрович' (required, string) - Имя сотрудника
        + specialization: '' (required, string) - Специализация сотрудника
        + weight (optional, number) -  Вес сотрудника (используется для сортировки сотрудников при отображении)
        + information: '' (optional, string) - Информация о сотруднике
        + api_id: '' (optional, string) - Внешний идентификатор сотрудника
        + hidden: 0 (optional, number) - Показывать ли сотрудника при онлайн записи. 1 - показывать, 0 - не показывать.
        + fired: 0 (optional, number) - Уволен ли сотрудник. 1 - уволен, 0 - не уволен.
        + image_group_id (optional, number) - Id группы изображений


  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

  + Body

            {
                "name": "Василий",
                "specialization": "парикмахер",
                "weight": 10,
                "information": "Стрижет методом трех рук",
                "api_id": "42",
                "hidden": 0,
                "fired": 0
            }


+ Response 201 (application/json)


        {
            "success": true,
            "data":  {
                "id": 17969,
                "api_id": "42",
                "name": "Василий",
                "specialization": "парикмахер",
                "position": {
                   "id": 1,
                   "title": "Администратор"
                },
                "show_rating": 0,
                "rating": 0,
                "votes_count": 0,
                "avatar": "https://yclients.com/uploads/masters/sm/20151018220924_4963.jpg",
                "avatar_big": "https://yclients.com/uploads/masters/norm/20151018220924_4963.jpg",
                "comments_count": 0,
                "weight": 10,
                "information": "<span><span><span>&nbsp;</span></span></span>",
                "hidden": 0,
                "fired": 0,
                "status": 0
            },
            "meta": []
        }


### Изменить сотрудника [PUT]

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (required, number) - ID сотрудника


+ Request (application/json)

  + Attributes

        + name: 'Лена Зубрович' (required, string) - Имя сотрудника
        + specialization: '' (optional, string) - Специализация сотрудника
        + weight (optional, number) -  Вес сотрудника (используется для сортировки сотрудников при отображении)
        + information: '' (optional, string) - Информация о сотруднике
        + api_id: '' (optional, string) - Внешний идентификатор сотрудника
        + hidden: 0 (optional, number) - Показывать ли сотрудника при онлайн записи. 1 - показывать, 0 - не показывать.
        + fired: 0 (optional, number) - Уволен ли сотрудник. 1 - уволен, 0 - не уволен.
        + image_group_id (optional, number) - Id группы изображений


  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

  + Body

            {
                "name": "Василий",
                "specialization": "парикмахер",
                "weight": 10,
                "information": "Стрижет методом трех рук",
                "api_id": "42",
                "hidden": 0,
                "fired": 0
            }


+ Response 200 (application/json)


        {
            "success": true,
            "data": {
                "id": 17969,
                "api_id": "42",
                "name": "Василий",
                "specialization": "парикмахер",
                "position": {
                   "id": 1,
                   "title": "Администратор"
                },
                "show_rating": 0,
                "rating": 0,
                "votes_count": 0,
                "avatar": "https://yclients.com/uploads/masters/sm/20151018220924_4963.jpg",
                "avatar_big": "https://yclients.com/uploads/masters/norm/20151018220924_4963.jpg",
                "comments_count": 0,
                "weight": 10,
                "information": "<span><span><span>&nbsp;</span></span></span>",
                "hidden": 0,
                "fired": 0,
                "status": 0
            },
            "meta": []
        }


### Удалить сотрудника [DELETE]

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (required, number) - ID сотрудника


+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 204 (application/json)



# Group Ресурсы

Для управления ресурсами используются следующие методы

### Получение ресурсов в филиале [GET /resources/{company_id}]

+ Parameters
    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            "success": true,
                "data": [
                    {
                        "id": 70,
                        "title": "Педикюрное кресло",
                        "instances": [
                            {
                                "id": 181,
                                "title": "Педикюрное кресло #1",
                                "resource_id": 70
                            }
                        ]
                    },
                    {
                        "id": 464,
                        "title": "Массажный кабинет",
                        "instances": [
                            {
                                "id": 1094,
                                "title": "Массажный кабинет 1 этаж",
                                "resource_id": 464
                            },
                            {
                                "id": 1162,
                                "title": "Массажный кабинет 2 этаж",
                                "resource_id": 464
                            }
                        ]
                    }
                ],
                "meta": {
                    "count": 2
                }
            }



# Group Клиенты
Для работы с клиентами

## Коллекция клиентов [/company/{company_id}/clients/search]

+ Параметр
    + company_id (required, number, `1`) - ID компании

### Получить список клиентов [POST]

+ Request (application/json)

  + Headers

        Authorization: Bearer partner_token, User user_token

  + Attributes (FullClientSearchRequest)

  + Body
        {
            "page": 1,
            "page_size": 3,
            "fields": [
                "id",
                "name"
            ],
            "order_by": "name",
            "order_by_direction": "desc",
            "operation": "AND",
            "filters": [
                {
                    "type": "id",
                    "state": {
                        "value": [1, 2, 3]
                    }
                },
                {
                    "type": "sold_amount",
                    "state": {
                        "from": 0,
                        "to": 100.77
                    }
                },
                {
                    "type": "quick_search",
                    "state": {
                        "value": "Иван"
                    }
                },
                {
                    "type": "importance",
                    "state": {
                        "value": [0, 1, 2, 3]
                    }
                },
                {
                    "type": "has_mobile_app",
                    "state": {
                        "value": true
                    }
                },
                {
                    "type": "category",
                    "state": {
                        "value": [1, 7]
                    }
                },
                {
                    "type": "has_passteam_card",
                    "state": {
                        "value": true
                    }
                },
                {
                    "type": "passteam_card_ids",
                    "state": {
                        "value": ["111122223333aaaabbbbcccc"]
                    }
                },
                {
                    "type": "birthday",
                    "state": {
                        "from": "1985-03-22",
                        "to": "1985-03-23"
                    }
                },
                {
                    "type": "gender",
                    "state": {
                        "value": [0, 1, 2]
                    }
                },
                {
                     "type": "record",
                     "state": {
                        "staff": {
                            "value": [1, 2]
                        },
                        "service": {
                            "value": [2, 3]
                        },
                        "service_category": {
                            "value": [4, 5]
                        },
                        "status": {
                            "value": [1]
                        },
                        "created": {
                            "from": "1985-03-22",
                            "to": "1985-03-23"
                        },
                        "records_count": {
                            "from": 1,
                            "to": 99999
                        },
                        "sold_amount": {
                            "from": 1.001,
                            "to": 99999.09
                        }
                     }
                },
                {
                    "type": "client",
                    "state": {
                        "id": {
                            "value": [1, 2, 3]
                        },
                        "birthday": {
                            "from": "1985-03-22",
                            "to": "1985-03-23"
                        }
                    }
                }
            ]
        }

+ Response 200 (application/json)
    + Body
        {
            "success": true,
            "data": [
                {
                    "name": "Петров",
                    "id": 2
                },
                {
                    "name": "Сидоров",
                    "id": 3
                },
                {
                    "name": "Иванов",
                    "id": 1
                },
            ],
            "meta": {
                "total_count": 908,
             }
        }

+ Response 400 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Недопустимое значение фильтра",
                "errors": {
                    "filters": [
                        "Недопустимое значение состояния фильтра"
                    ]
                }
            }
        }

+ Response 402 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Необходимо продлить лицензию в филиале с id: {company_id}"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не указан филиал."
            }
        }

+ Response 404 (application/json)
    Когда указан филиал не в виде целого числа
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не найдено",
                "errors": {
                    "filters": [
                        "Недопустимое значение состояния фильтра"
                    ]
                }
            }
        }

## Устаревшее. Коллекция клиентов [/clients/{company_id}{?fullname,phone,email,card,page,count,paid_min,paid_max,id}]

+ Параметр
    + company_id (required, number, `1`) - ID компании
    + page (number, `1`) - Номер страницы
    + count (number, `20`) - Количество клиентов на странице


#### Фильтрация клиентов
+ fullname:Joh (optional, string) - Имя (часть имени) для фильтрации клиентов
+ phone:7916 (optional, string) - Телефон (часть номера) для фильтрации клиентов
+ email:test@ (optional, string) - Email (часть) для фильтрации клиентов
+ card:5663rt (optional, string) - Card (часть) для фильтрации клиентов по номеру карты лояльности
+ paid_min:100 (optional, number) - Минимально оплачено в кассу, для фильтрации клиентов по сумме оплат
+ paid_max:0 (optional, number) - Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат
+ paid_max:0 (optional, number) - Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат
+ id:66 (optional, number) - ID одного клиента для фильтрации клиентов
+ id[]: 66 (optional, array) - ID нескольких клиентов для фильтрации
+ changed_after: '2000-01-01T00:00:00' (optional, string) - Фильтрация клиентов, измененных/созданных начиная с конкретной даты и времени
+ changed_before: '2020-12-31T23:59:59' (optional, string) - Фильтрация клиентов, измененных/созданных до конкретной даты и времени

### Устаревшее. Получить список клиентов [GET]


+ Parameters

    + company_id (required, number) - ID компании
    + fullname:Joh (optional, string) - Имя (часть имени) для фильтрации клиентов
    + phone:7916 (optional, string) - Телефон (часть номера) для фильтрации клиентов
    + email:test@ (optional, string) - Email (часть) для фильтрации клиентов
    + paid_min:1 (optional, number) - Минимально оплачено в кассу, для фильтрации клиентов по сумме оплат
    + paid_max:1 (optional, number) - Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат
    + page:1 (optional, number) - Номер страницы
    + count:20 (optional, number) - Количество клиентов на странице
    + id: 66 (optional, number) - ID одного или нескольких клиентов для фильтрации клиентов
    + changed_after: '2000-01-01T00:00:00' (optional, string) - Фильтрация клиентов, измененных/созданных начиная с конкретной даты и времени
    + changed_before: '2020-12-31T23:59:59' (optional, string) - Фильтрация клиентов, измененных/созданных до конкретной даты и времени

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data":[
                {
                    "id":66,
                    "name":"Клиент",
                    "phone":"+79112345678",
                    "email":"asdfgh@g.com",
                    "categories":[
                    {
                        "id":3,
                        "title":"Черный список",
                        "color":"#0f0f0f"
                    },
                    {
                        "id":4,
                        "title":"VIP",
                        "color":"#e8d313"
                    }
                    ],
                    "sex_id":0,
                    "sex":"Неизвестно",
                    "discount":10,
                    "importance_id":3,
                    "importance":"Золото",
                    "card":"123456789",
                    "birth_date":"2011-08-12",
                    "comment":"тест",
                    "sms_check":1,
                    "sms_not":0,
                    "spent":71842,
                    "balance":0,
                    "visits":34,
                    "last_change_date": "2020-02-01T12:00:00+0400",
                    "custom_fields": {}
                },
                {
                    "id":16,
                    "name":"Юрий",
                    "phone":"+79112345679",
                    "email":"",
                    "categories":[],
                    "sex_id":0,
                    "sex":"Неизвестно",
                    "discount":0,
                    "importance_id":0,
                    "importance":"Без класса важности",
                    "card":"",
                    "birth_date":"1970-01-01",
                    "comment":"",
                    "sms_check":0,
                    "sms_not":0,
                    "spent":0,
                    "balance":0,
                    "visits":3,
                    "last_change_date": "2020-04-01T12:00:00+0400",
                    "custom_fields": {}
                }
            ],
            "meta": {
                "page": 1,
                "total_count": 8
            }
        }

### Добавить клиента [POST]


+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

    + Attributes
        + name (required, string) - Имя клиента
        + phone (required, string) - Телефон клиента
        + email (optional, string) - Email клиента
        + sex_id: 1 (optional, number) - Пол клиента (1 - мужской, 2 - женский, 0 - не известен)
        + importance_id: 1 (optional, number) - Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)
        + discount: 10 (optional, number) - Скидка клиента
        + card: 45681444 (optional, string) - Номер карты клиента
        + birth_date: `2000-07-01` (optional, string) - Дата рождения клиента в формате yyyy-mm-dd
        + comment: капризный (optional, string) - Комментарий
        + spent: 200 (optional, number) - Сколько потратил средств в компании на момент добавления
        + balance: 200 (optional, number) - Баланс клиента
        + sms_check (optional, number) - 1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять
        + sms_not (optional, number) - 1 - Исключить клиента из SMS рассылок, 0 - не исключать
        + categories (optional, array) - Массив идентификаторов категорий клиента
        + custom_fields (optional, object) - Массив дополнительных полей клиента в виде пар "api-key": "value"


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
              "name": "Василий СОНов",
              "phone": "+79211234567",
              "email": "123456789@gmail.com",
              "sex_id": 1,
              "discount": 15,
              "importance_id": 1,
              "card": "555888666",
              "birth_date": "2000-03-03",
              "comment": "кидает понты",
              "sms_check": 0,
              "sms_not": 0,
              "spent": 1000,
              "balance": -200,
              "categories": [101,102],
              "custom_fields": {
                  "key-1": "value-1"
              }
            }

+ Response 201 (application/json)

        {
            "success": true,
            "data": {
                "id": 1121412,
                "name": "Василий СОНов",
                "phone": "+79211234567",
                "email": "123456789@gmail.com",
                "categories": [],
                "sex": "Мужской",
                "sex_id": 1,
                "discount": 15,
                "importance_id": 1,
                "importance": "Бронза",
                "card": "555888666",
                "birth_date": "2000-03-03",
                "comment": "кидает понты",
                "sms_check": 0,
                "sms_not": 0,
                "spent": 1000,
                "balance": -1200,
                "visits": 0,
                "last_change_date": "2020-05-01T12:00:00+0400",
                "custom_fields": {
                      "key-1": "value-1"
                }
            },
            "meta": []
        }

### Массовое добавление клиентов [POST /clients/{company_id}/bulk]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

    + Attributes
        + name (required, string) - Имя клиента
        + phone (required, string) - Телефон клиента
        + email (optional, string) - Email клиента
        + sex_id: 1 (optional, number) - Пол клиента (1 - мужской, 2 - женский, 0 - не известен)
        + importance_id: 1 (optional, number) - Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)
        + discount: 10 (optional, number) - Скидка клиента
        + card: 45681444 (optional, string) - Номер карты клиента
        + birth_date: `2000-07-01` (optional, string) - Дата рождения клиента в формате yyyy-mm-dd
        + comment: капризный (optional, string) - Комментарий
        + spent: 200 (optional, number) - Сколько потратил средств в компании на момент добавления
        + balance: 200 (optional, number) - Баланс клиента
        + sms_check (optional, number) - 1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять
        + sms_not (optional, number) - 1 - Исключить клиента из SMS рассылок, 0 - не исключать
        + categories (optional, array) - Массив идентификаторов категорий клиента

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        [
            {
                "name": "Василий СОНов",
                "phone": "+79213237567",
                "email": "123456789@gmail.com",
                "sex_id": 1,
                "discount": 15,
                "importance_id": 1,
                "card": "555888666",
                "birth_date": "2000-03-03",
                "comment": "кидает понты",
                "sms_check": 0,
                "sms_not": 0,
                "spent": 1000,
                "balance": -200,
                "categories": [101,102]
            },
            {
                "name": "Василий СОНов",
                "phone": "+79213237567"
            },
            {
                "phone": "+721828834101"
            },
            {
                "name": "Дмитрий Дмитрев",
                "phone": "+123"
            },
            {
                "name": "Сергей Сергеев"
            }
        ]

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "created": [
                    {
                        "id": 19153889,
                        "name": "Василий СОНов",
                        "phone": "+79213237567",
                        "email": "123456789@gmail.com",
                        "card": "555888666",
                        "birth_date": "2000-03-03",
                        "comment": "кидает понты",
                        "discount": 15,
                        "visits": 0,
                        "sex_id": 1,
                        "sex": "Мужской",
                        "sms_check": 0,
                        "sms_bot": 0,
                        "spent": 1000,
                        "paid": 0,
                        "balance": -1200,
                        "importance_id": 1,
                        "importance": "Бронза",
                        "categories": [
                            {
                                "id": 101,
                                "title": "Лояльный",
                                "color": "#bfd4f2"
                            },
                            {
                                "id": 102,
                                "title": "Постоянный",
                                "color": "#009800"
                            }
                        ],
                        "last_change_date": "2020-09-08T13:33:39+0400",
                        "custom_fields": {}
                    }
                ],
                "errors": [
                    {
                        "phone": "+79213237567",
                        "name": "Василий СОНов",
                        "error": "Клиент с указанным телефоном уже существует в базе"
                    },
                    {
                        "phone": "+721828834101",
                        "name": null,
                        "error": "Не указано имя клиента"
                    },
                    {
                        "phone": "+123",
                        "name": "Дмитрий Дмитрев",
                        "error": "Телефон должен содержать от 9 до 15 цифр"
                    },
                    {
                        "phone": null,
                        "name": "Сергей Сергеев",
                        "error": "Номер телефона клиента не может быть пустым"
                    }
                ]
            },
            "meta": []
        }


## Клиент [/client/{company_id}/{id}]

+ Параметры
    + company_id (required, number) - ID компании
    + id (required, number) - ID клиента

+ Parameters

    + company_id (required, number) - ID компании
    + id (required, number) - ID клиента

### Получить клиента [GET]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id":16,
                "name":"Юрий",
                "phone":"+79112345679",
                "email":"",
                "categories":[],
                "sex":"Неизвестно",
                "discount":0,
                "importance":"Без класса важности",
                "card":"",
                "birth_date":"1970-01-01",
                "comment":"",
                "sms_check":0,
                "sms_not":0,
                "spent":0,
                "balance":0,
                "visits":3,
                "last_change_date": "2020-03-01T12:00:00+0400",
                "custom_fields": {}
            },
            "meta": []
        }

### Редактировать клиента [PUT]

+ Request (application/json)

  + Attributes
        + name (required, string) - Имя клиента
        + phone (required, string) - Телефон клиента
        + email (optional, string) - Email клиента
        + sex_id: 1 (optional, number) - Пол клиента (1 - мужской, 2 - женский, 0 - не известен)
        + importance_id: 1 (optional, number) - Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)
        + discount: 10 (optional, number) - Скидка клиента
        + card: 45681444 (optional, string) - Номер карты клиента
        + birth_date: `2000-07-01` (optional, string) - Дата рождения клиента в формате yyyy-mm-dd
        + comment: капризный (optional, string) - Комментарий
        + spent: 200 (optional, number) - Сколько потратил средств в компании на момент добавления
        + balance: 200 (optional, number) - Баланс клиента
        + sms_check (optional, number) - 1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять
        + sms_not (optional, number) - 1 - Исключить клиента из SMS рассылок, 0 - не исключать
        + categories (optional, array) - Массив идентификаторов категорий клиента
        + custom_fields (optional, object) - Массив дополнительных полей клиента в виде пар "api-key": "value"

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
              "name": "Василий СОНов",
              "phone": "+79211234567",
              "email": "123456789@gmail.com",
              "sex_id": 1,
              "discount": 15,
              "importance_id": 1,
              "card": "555888666",
              "birth_date": "2000-03-03",
              "comment": "кидает понты",
              "sms_check": 0,
              "sms_not": 0,
              "spent": 1000,
              "balance": -200,
              "categories": [101,102],
              "custom_fields": {
                  "key-1": "value-1"
              }
            }

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id": 1121412,
                "name": "Василий СОНов",
                "phone": "+79211234567",
                "email": "123456789@gmail.com",
                "categories": [],
                "sex": "Мужской",
                "sex_id": 1,
                "discount": 15,
                "importance_id": 1,
                "importance": "Бронза",
                "card": "555888666",
                "birth_date": "2000-03-03",
                "comment": "кидает понты",
                "sms_check": 0,
                "sms_not": 0,
                "spent": 1000,
                "balance": -1200,
                "visits": 0,
                "last_change_date": "2020-06-01T12:00:00+0400",
                "custom_fields": {
                  "key-1": "value-1"
                }
            },
            "meta": []
        }

### Удалить клиента [DELETE]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 204 (application/json)

## Список файлов клиента [/company/{company_id}/clients/files/{client_id}]

Список загруженных **файлов клиента** можно получить, сделав запрос с указанием идентификатора филиала и идентификатора клиента, для которого необходимо получить список.
Идентификатор клиента можно получить из коллекции клиентов.

Список представляет собой массив [файлов клиента](#client-file).

<a name="client-file"></a>
**Файл клиента** имеет следующую структуру:

| Поле             | Тип     | Описание                                                                    |
| -----------------| ------- | --------------------------------------------------------------------------- |
|  id              | number  | Идентификатор файла                                                         |
|  client_id       | number  | Идентификатор клиента                                                       |
|  name            | string  | Имя файла с расширением                                                     |
|  description     | string  | Описание файла                                                              |
|  extension       | string  | Расширение имени файла                                                      |
|  mime            | string  | MIME-тип файла                                                              |
|  link            | string  | Ссылка на скачивание файла                                                  |
|  date_create     | string  | Дата загрузки файла в формате ISO8601                                       |
|  size            | string  | Форматированная строка размера файла                                        |
|  user_name       | string  | Имя пользователя, загрузившего файл                                         |
|  user_avatar     | string  | Аватар пользователя, загрузившего файл                                      |
|  can_edit        | boolean | Есть ли право изменять и удалять файл? true - право есть, false - права нет |


### Пример запроса на получение списка [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + client_id (required, number) - ID клиента

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 123,
                    "client_id": 123456,
                    "name": "test.txt",
                    "description": "",
                    "date_create": "2020-01-01T12:00:00+0400",
                    "extension": "txt",
                    "mime": "text/plain",
                    "link": "/client_files/download/456/123/",
                    "user_name": "Виктор Ситников",
                    "user_avatar": "/images/no-master.png",
                    "size": "9 B",
                    "can_edit": false
                },
                {
                    "id": 789,
                    "client_id": 123456,
                    "name": "фотография.jpg",
                    "description": "",
                    "date_create": "2020-01-30T12:30:00+0400",
                    "extension": "jpg",
                    "mime": "image/jpeg",
                    "link": "/client_files/download/456/789/",
                    "user_name": "Виктор Ситников",
                    "user_avatar": "/images/no-master.png",
                    "size": "96.65 KB",
                    "can_edit": true
                }
            ],
            "meta": {
                "count": 2
            }
        }

## Удаление файла клиента [/company/{company_id}/clients/files/{client_id}/{file_id}]

Удалить загруженный ранее **файл клиента** можно, сделав запрос с указанием идентификатора филиала, идентификатора клиента и идентификатора файла.
Идентификатор клиента можно получить из коллекции клиентов.
Идентификатор файла можно получить из коллекции [файлов клиента](#client-file).


### Пример запроса на удаление [DELETE]

+ Parameters
    + company_id (required, number) - ID компании
    + client_id (required, number) - ID клиента
    + file_id (required, number) - ID файла

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 202 (application/json)

    + Body
        {
            "success": true,
            "data": null,
            "meta": {
                "message": "Accepted"
            }
        }



# Group Сетевые клиенты
Для работы с клиентами

## Коллекция клиентов [/group/{group_id}/clients/{?phone}]

+ Параметр
    + group_id (required, number, `43877`) - Id сети салонов


#### Фильтрация клиентов
+ phone:'70001234567' (optional, string) - Телефон для фильтрации клиентов

### Получить сетевого клиента по номеру телефона. [GET]


+ Parameters

    + group_id (required, number) - ID сети салонов
    + phone:'79264037640' (required, string) - Телефон для фильтрации клиентов, обязательный параметр


+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "salon_group_id": 312,
                "phone": "70001234567",

                "clients": [
                    {
                        "id": 4240880,
                        "company_id": 4564,
                        "name": "lx",
                        "email": "client@example.com"
                    },
                    {
                        "id": 4243272,
                        "company_id": 24697,
                        "name": "lx",
                        "email": "client@example.com"
                    }
                ]
            },
            "meta": []
        }


# Group Записи
Для работы с записями

JSON-Объект записи содержит следующие поля:

| Поле | Тип | Обязательный | Описание |
| ------------- | ------------- | ------------- | ------------- |
| id  | number  | ДА  |  ID записи  |
| staff_id  | number  |  ДА  | (при сохранении записи) Id специалиста, которые был забронирован |
| services  | array  |  ДА  | Список параметров услуг записи (может быть пустой массив) |
| client  | object  |  ДА  |  Данные клиента (может быть пустой объект) |
| datetime  | string  |  ДА  |  Дата сеанса  |
| seance_length  | number  |  ДА  | Длительность сеанса  |
| save_if_busy  | boolean  |  ДА  | (Только для сохранения) Сохранять запись даже в случае наложения записей или нерабочего времени сотрудника  |
| send_sms  | boolean  |  ДА  |  (Только для создания) Отправить ли клиенту смс с деталями записи (если клиент указан)  |
| sms_before  | boolean  |  ДА  | Отправить ли клиенту смс с напоминанием о записи (если клиент указан)  |
| sms_remain_hours  | number  |  НЕТ  |  За сколько часов до визита клиенту отправить смс напоминание (0 - если не отправлять)  |
| email_remain_hours  | number  |  НЕТ  |  За сколько часов до визита клиенту отправить email напоминание (0 - если не отправлять)  |
| comment  | string  |  НЕТ  | Комментарий к записи  |
| master_requested  | boolean  |  НЕТ  | Был ли указан определенный специалист при записи (false если был указан "не имеет значения")  |
| attendance  | number  |  НЕТ  | 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит  |
| api_id  | string  |  НЕТ  | Внешний идентификатор записи  |
| deleted  | boolean  |  НЕТ  | (Только при чтении) Удалена ли запись (true если удалена)  |
| online  | boolean  |  НЕТ  | (Только при чтении) Запись онлайновая или нет (false если запись внес администратор)  |
| create_date  | string  |  ДА  | (Только при чтении) Дата создания записи  |
| custom_color  | string  |  НЕТ  |  Цвет записи в журнале  |
| custom_font_color  | string  |  НЕТ  | (Только при чтении) Цвет шрифта записи |
| record_labels  | array  |  НЕТ  |  Категории записи  |
| activity_id  | number  |  НЕТ  |  ID группового события  |

Массив services состоит из объектов, которые имеют следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор услуги  |
|  title  | string  |  (только при чтении) Название услуги  |
|  first_cost  | float  |  Начальная стоимость услуги (без учета скидок)  |
|  discount  | float  |  Скидка на услугу  |
|  cost  | float  |  Итоговая стоимость услуги |

Объект сlient имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  | (передается только при чтении) Идентификатор клиента  |
|  phone  | string  |  Телефон клиента  |
|  name  | string  |  Имя клиента  |
|  email  | string  |  Email клиента  |

Объект staff передается только при чтении записей/записи, и имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор сотрудника  |
|  name  | string  |  Имя сотрудника  |
|  specialization  | string  |  Специализация сотрудника  |
|  position  | object  |  Должность сотрудника  |
|  avatar  | string  |  Путь к файлу аватарки сотрудника  |

Массив record_labels состоит из объектов, которые имеют следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number  |  Идентификатор категории  |
|  title  | string  |   Название категории  |
|  color  | string  |  Цвет категории |
|  icon  | string  |  Иконка  |
|  font_color  | string  |  Цвет шрифта категории |

## Коллекция записей [/records/{company_id}{?page,count,staff_id,client_id,start_date,end_date,c_start_date,c_end_date,changed_after,changed_before,created_user_id,include_consumables,include_finance_transactions}]

+ Параметр
    + company_id (required, number) - ID компании
    + page (number, `1`) - Номер страницы
    + count (number, `300`) - Количество записей на странице

### Получить список записей [GET]
#### Фильтрация записей
+ staff_id: ID сотрудника. Если нужны записи к конкретному сотруднику
+ client_id: ID клиента. Если нужны записи конкретного клиента
+ created_user_id: ID пользователя, создавшего запись. Если нужны записи, созданные конкретным пользователем
+ start_date: Дата сеанса начиная с (фильтр по дате сеанса). Если нужны записи на сеанс начиная с конкретной даты
+ end_date: Дата сеанса по. Если нужны записи на сеанс до конкретной даты
+ c_start_date: Дата создания записи начиная с (фильтр по дате создания записи). Если нужны записи, созданные начиная с конкретной даты
+ c_end_date: Дата создания записи по (фильтр по дате создания записи).
+ changed_after: Дата изменения/создания записи. Если нужны записи созданные/измененные начиная с конкретной даты и времени
+ changed_before: Дата изменения/создания записи. Если нужны записи созданные/измененные до конкретной даты и времени
+ with_deleted: Флаг включения в ответ удаленнх записей.

+ Parameters

    + company_id (required, number) - ID компании
    + page:1 (optional, number) - Номер страницы
    + count:50 (optional, number) - Количество записей на странице
    + staff_id:7572 (optional, number) - ID сотрудника, если нужно только записи к конкретному сотруднику
    + client_id:572 (optional, number) - ID клиента. Если нужны записи к конкретному клиенту
    + created_user_id:7572 (optional, number) - ID пользователя создавшего запись. Если нужны записи созданные конкретным пользователем
    + start_date:`2016-02-23` (optional, string) - Дата сеанса начина с (фильтр по дате сеанса). Если нужны записи на сеанс начиная с конкретной даты
    + end_date:`2016-02-23` (optional, string) -  Дата сеанса по. Если нужны записи на сеанс до конкретной даты
    + c_start_date:`2016-02-23` (optional, string)  - Дата создания записи начиная с(фильтр по дате создания записи). Если нужны записи созданные начиная с конкретной даты
    + c_end_date:`2016-02-23` (optional, string) - Дата создания записи по(фильтр по дате создания записи).
    + changed_after:`2016-02-23T12:00:00` (optional, string) - Дата изменения/создания записи. Если нужны записи созданные/измененные начиная с конкретной даты и времени
    + changed_before:`2016-02-23T12:00:00` (optional, string) - Дата изменения/создания записи. Если нужны записи созданные/измененные до конкретной даты и времени
    + include_consumables: `0` (optional, number) - Флаг для включения в ответ списка расходников по записям
    + include_finance_transactions: `0` (optional, number) - флаг для включения в ответ финансовых транзакций по записям
    + with_deleted: `0` (optional, number) - флаг для включения в ответ удаленнх записей

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": 2,
                    "company_id": 4564,
                    "staff_id": 9,
                    "services": [
                        {
                            "id": 1,
                            "title": "Наращивание волос",
                            "cost": 100,
                            "manual_cost": 100,
                            "cost_per_unit": 100,
                            "discount": 0,
                            "first_cost": 100,
                            "amount": 1
                        }
                    ],
                    "goods_transactions": [],
                    "staff": {
                        "id": 9,
                        "api_id": null,
                        "name": "Оксана",
                        "specialization": "наращивание волос",
                        "position": {
                           "id": 1,
                           "title": "Администратор"
                        },
                        "avatar": "http://yclients.com/images/no-master-sm.png",
                        "avatar_big": "http://yclients.com/images/no-master.png",
                        "rating": 0,
                        "votes_count": 0
                    },
                    "client": null,
                    "date": "2019-01-16 16:00:00",
                    "datetime": "2019-01-16T16:00:00+09:00",
                    "create_date": "2019-01-16T20:35:11+0900",
                    "comment": "не записывать",
                    "online": false,
                    "visit_attendance": 0,
                    "attendance": 0,
                    "confirmed": 1,
                    "seance_length": 3600,
                    "length": 3600,
                    "sms_before": 0,
                    "sms_now": 0,
                    "sms_now_text": "",
                    "email_now": 0,
                    "notified": 0,
                    "master_request": 0,
                    "api_id": "",
                    "from_url": "",
                    "review_requested": 0,
                    "visit_id": "8262996",
                    "created_user_id": 1073232,
                    "deleted": false,
                    "paid_full": 0,
                    "prepaid": false,
                    "prepaid_confirmed": false,
                    "last_change_date": "2019-01-16T20:35:15+0900",
                    "custom_color": "",
                    "custom_font_color": "",
                    "record_labels": [],
                    "activity_id": 0,
                    "custom_fields": {},
                    "documents": [
                        {
                            "id": 8172893,
                            "type_id": 7,
                            "storage_id": 0,
                            "user_id": 746310,
                            "company_id": 4564,
                            "number": 4163,
                            "comment": "",
                            "date_created": "2018-07-03 11:00:00",
                            "category_id": 0,
                            "visit_id": 3,
                            "record_id": 2,
                            "type_title": "Визит"
                        }
                    ],
                    "consumables": [],
                    "finance_transactions": []
                },
                {
                    "id": 9,
                    "company_id": 4564,
                    "staff_id": 49,
                    "services": [],
                    "goods_transactions": [],
                    "staff": {
                        "id": 49,
                        "api_id": null,
                        "name": "Сергей",
                        "specialization": "стилист",
                        "position": {
                           "id": 1,
                           "title": "Администратор"
                        },
                        "avatar": "http://yclients.com/images/no-master-sm.png",
                        "avatar_big": "http://yclients.com/images/no-master.png",
                        "rating": 0,
                        "votes_count": 0
                    },
                    "client": null,
                    "date": "2019-01-16 16:00:00",
                    "datetime": "2019-01-16T16:00:00+09:00",
                    "create_date": "2019-01-16T20:35:11+0900",
                    "comment": "",
                    "online": true,
                    "visit_attendance": 1,
                    "attendance": 1,
                    "confirmed": 1,
                    "seance_length": 10800,
                    "length": 10800,
                    "sms_before": 0,
                    "sms_now": 0,
                    "sms_now_text": "",
                    "email_now": 0,
                    "notified": 0,
                    "master_request": 1,
                    "api_id": "",
                    "from_url": "",
                    "review_requested": 0,
                    "visit_id": "8262996",
                    "created_user_id": 1073232,
                    "deleted": false,
                    "paid_full": 0,
                    "prepaid": false,
                    "prepaid_confirmed": false,
                    "last_change_date": "2017-01-09T20:45:30+0900",
                    "custom_color": "f44336",
                    "custom_font_color": "#ffffff",
                    "record_labels": [
                        {
                            "id": "67345",
                            "title": "Сотрудник не важен",
                            "color": "#009800",
                            "icon": "unlock",
                            "font_color": "#ffffff"
                        },
                        {
                            "id": "104474",
                            "title": "важная категория",
                            "color": "#3b2c54",
                            "icon": "odnoklassniki",
                            "font_color": "#ffffff"
                        }
                    ],
                    "activity_id": 0,
                    "custom_fields": {},
                    "documents": [
                        {
                            "id": 8172893,
                            "type_id": 7,
                            "storage_id": 0,
                            "user_id": 746310,
                            "company_id": 4564,
                            "number": 4163,
                            "comment": "",
                            "date_created": "2018-07-03 11:00:00",
                            "category_id": 0,
                            "visit_id": 3,
                            "record_id": 2,
                            "type_title": "Визит"
                        }
                    ],
                    "consumables": [],
                    "finance_transactions": []
                }
            ],
            "meta": {
                "page": 1,
                "total_count": 10
            }
        }

### Создать новую запись [POST]

Для групповых событий
При создании записи в групповом событии параметр activity_id становится обязательным,
параметры staff_id, services, datetime, seance_length становятся необязательными.

Дополнительные поля
При создании дополнительных полей записи(см. раздел "Дополнительные поля") становится возможным передавать собственные значения для полей.
Дополнительные поля уникальны для каждой компании. После создания дополнительных полей, их значения для конкретной записи могут
передаваться в необязательном поле custom_fields в виде пар ключ-значение где ключ это поле "code" дополнительного поля. Пример:

* Создали дополнительное поле записи с code="my_custom_field" type="number", и второе поле code="some_another_field" type="list"

* Передали при создании записи еще один атрибут:
custom_fields: {
    "my_custom_field": 123,
    "some_another_field": ["first value", "second value"]
}

* При получении данной записи методом GET впоследствии, это же значение дополнительных полей вернется в ответе



+ Parameters

    + company_id: 24699 (required, number) - ID компании

+ Request (application/json)

    + Attributes
        + staff_id (required, number) - ID сотрудника
        + services (required, ServiceArray) - Параметры услуг (id, стоимость, скидка)
        + client (required, Client) - Параметры клиента (телефон, имя, email)
        + datetime: `2015-12-12T12:00:00+04:00` (required, string) - Дата и время записи
        + seance_length: 3600 (required, number) - Длительность записи в секундах
        + save_if_busy: true (required, boolean) - Сохранять ли запись если время занято или нерабочее, или выдать ошибку
        + send_sms: true (required, boolean) - Отправлять ли смс с деталями записи клиенту
        + comment: 'убрать усы' (optional, string) - Комментарий к записи
        + sms_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + email_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы
        + attendance (optional, number) - 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
        + custom_color (optional, string) - Цвет записи
        + record_labels (optional, array) - Массив идентификаторов категорий записи
        + activity_id (optional, number) - ID группового события
        + custom_fields (optional, object) - Дополнительные поля записи

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

                {
                    "staff_id": 8886,
                    "services": [
                        {
                            "id":331,
                            "first_cost": 9000,
                            "discount": 50,
                            "cost": 4500
                        },
                        {
                            "id":333,
                            "first_cost": 2000,
                            "discount": 10,
                            "cost": 1800
                        }
                    ],
                    "client": {
                        "phone": "79169999900",
                        "name": "Дмитрий",
                        "email": "d@yclients.com"
                    },
                    "save_if_busy": false,
                    "datetime": "2015-12-12T12:00:00+04:00",
                    "seance_length": 3600,
                    "send_sms": true,
                    "comment": "тестовая запись!",
                    "sms_remain_hours": 6,
                    "email_remain_hours": 24,
                    "attendance": 1,
                    "api_id": "777",
                    "custom_color": "f44336",
                    "record_labels": [
                        "67345", "104474"
                    ],
                    "custom_fields": {
                        "my_custom_field": 123,
                        "some_another_field": ["first value", "second value"]
                    }
                }


+ Response 201 (application/json)

    + Attributes
        + id: 1 (required, number) - ID записи
        + staff (required, Staff) - Параметры сотрудника
        + services (required, ServiceArray) - Параметры услуг (id, стоимость, скидка)
        + client (required, Client) - Параметры клиента (телефон, имя, email)
        + datetime: `2015-12-12T12:00:00+04:00` (required, string) - Дата и время записи
        + seance_length: 3600 (required, number) - Длительность записи в секундах
        + comment: 'убрать усы' (optional, string) - Комментарий к записи
        + sms_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + email_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы
        + attendance (optional, number) - 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
        + custom_color (optional, string) - Цвет записи
        + record_labels (optional, array) - Массив идентификаторов категорий записи
        + documents (required, array[Document]) - Массив документов по записи

    + Body

                {
                    "success": true,
                    "data": {
                        "id":999,
                        "services": [
                            {
                                "id":331,
                                "first_cost": 9000,
                                "discount": 50
                                "cost": 4500
                            },
                            {
                                "id":333,
                                "first_cost": 2000,
                                "discount": 10
                                "cost": 1800
                            }
                        ],
                        "client": {
                            "phone": "79169999900",
                            "name": "Дмитрий",
                            "email": "d@yclients.com",
                        },
                        "staff":{
                            "id":8886,
                            "name":"Сергей",
                            "spec":"стилист"
                        },
                        "datetime": "2015-12-12T12:00:00+04:00",
                        "seance_length": 3600,
                        "create_date":"2015-07-30 10:49:10",
                        "comment":"тестовая запись!",
                        "visit_attendance":1,
                        "confirmed":1,
                        "sms_before":6,
                        "sms_now":1,
                        "sms_now_text":"",
                        "email_now":1,
                        "notified":0,
                        "master_request":1,
                        "api_id":"",
                        "from_url":"",
                        "review_requested":0,
                        "custom_color": "f44336",
                        "custom_font_color": "#ffffff",
                        "record_labels": [
                        {
                          "id": "67345",
                          "title": "Сотрудник не важен",
                          "color": "#009800",
                          "icon": "unlock",
                          "font_color": "#ffffff"
                        },
                        {
                          "id": "104474",
                          "title": "интересная категория",
                          "color": "#3b2c54",
                          "icon": "odnoklassniki",
                          "font_color": "#ffffff"
                        }
                        ],
                        "documents": [
                            {
                              "id": 8172893,
                              "type_id": 7,
                              "storage_id": 0,
                              "user_id": 746310,
                              "company_id": 4564,
                              "number": 4163,
                              "comment": "",
                              "date_created": "2018-07-03 11:00:00",
                              "category_id": 0,
                              "visit_id": 3,
                              "record_id": 2,
                              "type_title": "Визит"
                            }
                        ]
                    },
                    "meta": [],
                }

## Коллекция записей партнёра [/records/partner/{?page,editable_length,salon_id,start_date,end_date,created_start_date,created_end_date,user_id}]

+ Параметр
    + page (optional, number, `1`) - Номер страницы
    + editable_length (optional, number, `50`) - Количество записей на странице, максимум 100

### Получить список записей партнёра [GET]
#### Фильтрация записей
+ salon_id: ID филиала
+ start_date: Дата визита начиная с (фильтр по дате визита). Если нужны записи, начиная с конкретной даты визита
+ end_date: Дата визита по (фильтр по дате визита)
+ created_start_date: Дата создания записи начиная с (фильтр по дате создания записи). Если нужны записи, созданные начиная с конкретной даты
+ created_end_date: Дата создания записи по (фильтр по дате создания записи)
+ user_id: ID пользователя

+ Parameters

    + page:1 (optional, number) - Номер страницы
    + editable_length:50 (optional, number) - Количество записей на странице, максимум 100
    + salon_id:1 (optional, number) - ID филиала
    + start_date:'17.01.2018' (optional, string) - Фильтр по дате визита с
    + end_date:'17.01.2018' (optional, string) - Фильтр по дате визита по
    + created_start_date:'17.01.2018' (optional, string) - Фильтр по дате создания записи с
    + created_end_date:'17.01.2018' (optional, string) - Фильтр по дате создания записи по
    + user_id:1 (optional, number) - ID пользователя

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

        {
            "success": true,
            "data": [
                {
                    "id": 1,
                    "date": "2018-11-17 00:00:00",
                    "datetime": "2018-11-17T00:00:00+0400",
                    "create_date": "2018-11-17T16:08:08+0400",
                    "comment": "",
                    "deleted": false,
                    "attendance": 0,
                    "length": 3600,
                    "notify_by_sms": 1,
                    "notify_by_email": 12,
                    "master_requested": true,
                    "online": false,
                    "api_id": "42",
                    "last_change_date": "2018-11-18T16:58:59+0400",
                    "prepaid": 0,
                    "prepaid_confirmed": 0,
                    "activity_id": 0,
                    "services": [
                        {
                            "id": 1,
                            "title": "Стрижка бороды",
                            "cost": 100,
                            "price_min": 500,
                            "price_max": 1500,
                            "discount": 0,
                            "amount": 1
                        }
                    ],
                    "company": {
                        "id": 1,
                        "title": "",
                        "public_title": "",
                        "business_group_id": 1,
                        "business_type_id": 1,
                        "country_id": 1,
                        "city_id": 1,
                        "timezone": 3,
                        "timezone_name": "Europe/Moscow",
                        "address": "",
                        "coordinate_lat": 0,
                        "coordinate_lon": 0,
                        "logo": "http://yclients.com/images/icon.png",
                        "zip": 0,
                        "phone": "",
                        "phones": [],
                        "site": "",
                        "allow_delete_record": true,
                        "allow_change_record": true,
                        "country": "Россия",
                        "city": "Москва"
                    },
                    "staff": {
                        "id": 1,
                        "api_id": null,
                        "name": "Иван",
                        "company_id": 1,
                        "specialization": "Барбер",
                        "position": [],
                        "rating": 0,
                        "show_rating": 1,
                        "comments_count": 0,
                        "votes_count": 0,
                        "average_score": 0,
                        "avatar": "http://yclients.com/images/no-master-sm.png",
                        "prepaid": "forbidden"
                    },
                    "client": {
                        "id": 1,
                        "name": "Петр",
                        "phone": "+7 999 123-45-67",
                        "phone_code": "7",
                        "email": "petr@example.com"
                    },
                    "custom_fields": {
                        "dop-telephone": "70001234567"
                    }
                }
            ],
            "meta": {
                "count": 1
            }
        }

## Запись [/record/{company_id}/{record_id}{?include_consumables,include_finance_transactions}]

+ Parameters
    + company_id (required, number) - ID компании
    + record_id (required, number) - ID записи
    + include_consumables (optional, number, `0`) - флаг для включения в ответ списка расходников по записи
    + include_finance_transactions (optional, number, `0`) - флаг для включения в ответ финансовых транзакций по записи


### Получить запись [GET]

+ Request (application/json)

  + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": {
                "id": 2,
                "company_id": 4564,
                "staff_id": 9,
                "services": [
                    {
                        "id": 1,
                        "title": "Наращивание волос",
                        "cost": 100,
                        "manual_cost": 100,
                        "cost_per_unit": 100,
                        "discount": 0,
                        "first_cost": 100,
                        "amount": 1
                    }
                ],
                "goods_transactions": [],
                "staff": {
                    "id": 9,
                    "api_id": null,
                    "name": "Оксана",
                    "specialization": "наращивание волос",
                    "position": {
                       "id": 1,
                       "title": "Администратор"
                    },
                    "avatar": "http://yclients.com/images/no-master-sm.png",
                    "avatar_big": "http://yclients.com/images/no-master.png",
                    "rating": 0,
                    "votes_count": 0
                },
                "client": {
                    "id": 18936825,
                    "name": "lx",
                    "phone": "+70001234567",
                    "card": "",
                    "email": "client@example.com",
                    "success_visits_count": 37,
                    "fail_visits_count": 3
                },
                "clients_count": 1,
                "date": "2019-01-17 03:30:00",
                "datetime": "2019-01-17T03:30:00+09:00",
                "create_date": "2019-01-17T19:41:44+0900",
                "comment": "не записывать",
                "visit_attendance": 0,
                "attendance": 0,
                "confirmed": 1,
                "seance_length": 3600,
                "length": 3600,
                "sms_before": 0,
                "sms_now": 0,
                "sms_now_text": "",
                "email_now": 0,
                "notified": 0,
                "master_request": 0,
                "api_id": "",
                "from_url": "",
                "review_requested": 0,
                "visit_id": "8263004",
                "created_user_id": 1073232,
                "deleted": false,
                "paid_full": 0,
                "prepaid": false,
                "prepaid_confirmed": false,
                "last_change_date": "2019-01-17T19:44:14+0900",
                "custom_color": "f44336",
                "custom_font_color": "#ffffff",
                "record_labels": [
                    {
                      "id": "67345",
                      "title": "Сотрудник не важен",
                      "color": "#009800",
                      "icon": "unlock",
                      "font_color": "#ffffff"
                    },
                    {
                      "id": "104474",
                      "title": "интересная категория",
                      "color": "#3b2c54",
                      "icon": "odnoklassniki",
                      "font_color": "#ffffff"
                    }
                ],
                "activity_id": 0,
                "custom_fields": {},
                "documents": [
                    {
                      "id": 8172893,
                      "type_id": 7,
                      "storage_id": 0,
                      "user_id": 1073232,
                      "company_id": 4564,
                      "number": 4163,
                      "comment": "",
                      "date_created": "2018-07-03 11:00:00",
                      "category_id": 0,
                      "visit_id": 3,
                      "record_id": 2,
                      "type_title": "Визит"
                    }
                ],
                "consumables": [
                    {
                        "id": 2173068,
                        "document_id": 8174153,
                        "type_id": 2,
                        "company_id": 4564,
                        "good_id": 4853087,
                        "amount": -1,
                        "cost_per_unit": 0.03,
                        "discount": 0,
                        "cost": 0.03,
                        "unit_id": 216761,
                        "operation_unit_type": 2,
                        "storage_id": 91548,
                        "supplier_id": 0,
                        "client_id": 0,
                        "master_id": 0,
                        "create_date": "2019-01-17 08:30:00",
                        "comment": "",
                        "service_id": 1,
                        "user_id": 1073232,
                        "deleted": false,
                        "pkg_amount": 0
                    }
                ],
                "finance_transactions": [
                    {
                        "id": 6024243,
                        "document_id": 8174152,
                        "date": "2019-01-16 22:30:00",
                        "type_id": 5,
                        "expense_id": 5,
                        "account_id": 90459,
                        "amount": 100,
                        "client_id": 18936825,
                        "master_id": 0,
                        "supplier_id": 0,
                        "comment": "",
                        "item_id": 1,
                        "target_type_id": 1,
                        "record_id": 2,
                        "goods_transaction_id": 0,
                        "expense": {
                            "id": 5,
                            "title": "Оказание услуг"
                        },
                        "account": {
                            "id": 90459,
                            "title": "Основная касса"
                        },
                        "client": {
                            "id": 18936825,
                            "name": "lx",
                            "phone": "70001234567"
                        },
                        "master": [],
                        "supplier": []
                    }
                ]
            },
            "meta": []
        }

### Изменить запись [PUT]

При изменении записи в групповом событии параметр activity_id становится обязательным,
параметры staff_id, services, datetime, seance_length становятся необязательными

+ Request (application/json)

    + Attributes
        + staff_id (required, number) - ID сотрудника
        + services (required, ServiceArray) - Параметры услуг (id, стоимость, скидка)
        + client (required, Client) - Параметры клиента (телефон, имя, email)
        + datetime: `2015-12-12T12:00:00+04:00` (required, string) - Дата и время записи
        + seance_length: 3600 (required, number) - Длительность записи в секундах
        + save_if_busy: true (required, boolean) - Сохранять ли запись если время занято или нерабочее, или выдать ошибку
        + send_sms: true (required, boolean) - Отправлять ли смс с деталями записи клиенту
        + comment: 'убрать усы' (optional, string) - Комментарий к записи
        + sms_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + email_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы
        + attendance (optional, number) - 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
        + activity_id (optional, number) - ID группового события
        + fast_payment (optional, number) - Быстрая оплата 1 - наличными, 2 - безналичными, 129 - наличными и распечатать, 130 - безналичными и распечатать
        + clients_count: 1 (optional, number) - Количество занимаемых в групповом событии мест (актуально только для записей в групповых событиях)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

                {
                    "staff_id": 8886,
                    "services": [
                        {
                            "id":331,
                            "first_cost": 9000,
                            "discount": 50,
                            "cost": 4500
                        },
                        {
                            "id":333,
                            "first_cost": 2000,
                            "discount": 10,
                            "cost": 1800
                        }
                    ],
                    "client": {
                        "phone": "79169999900",
                        "name": "Дмитрий",
                        "email": "d@yclients.com"
                    },
                    "clients_count": 1,
                    "save_if_busy": false,
                    "datetime": "2015-12-12T12:00:00+04:00",
                    "seance_length": 3600,
                    "send_sms": true,
                    "comment": "тестовая запись!",
                    "sms_remain_hours": 6,
                    "email_remain_hours": 24,
                    "attendance": 1,
                    "api_id": "777"
                }


+ Response 201 (application/json)

    + Attributes
        + id: 1 (required, number) - ID записи
        + staff (required, Staff) - Параметры сотрудника
        + services (required, ServiceArray) - Параметры услуг (id, стоимость, скидка)
        + client (required, Client) - Параметры клиента (телефон, имя, email)
        + datetime: `2015-12-12T12:00:00+04:00` (required, string) - Дата и время записи
        + seance_length: 3600 (required, number) - Длительность записи в секундах
        + comment: 'убрать усы' (optional, string) - Комментарий к записи
        + sms_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)
        + email_remain_hours: 2 (optional, number) - За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)
        + api_id: 2 (optional, number) - ID записи из внешней системы
        + attendance (optional, number) - 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
        + documents (required, array[Document]) - Массив документов по записи

    + Body

                {
                    "success": true,
                    "data": {
                        "id":999,
                        "services": [
                            {
                                "id":331,
                                "first_cost": 9000,
                                "discount": 50
                                "cost": 4500
                            },
                            {
                                "id":333,
                                "first_cost": 2000,
                                "discount": 10
                                "cost": 1800
                            }
                        ],
                        "client": {
                            "phone": "79169999900",
                            "name": "Дмитрий",
                            "email": "d@yclients.com",
                        },
                        "clients_count": 1,
                        "staff":{
                            "id":8886,
                            "name":"Сергей",
                            "spec":"стилист"
                        },
                        "datetime": "2015-12-12T12:00:00+04:00",
                        "seance_length": 3600,
                        "create_date":"2015-07-30 10:49:10",
                        "comment":"тестовая запись!",
                        "visit_attendance":1,
                        "confirmed":1,
                        "sms_before":6,
                        "sms_now":1,
                        "sms_now_text":"",
                        "email_now":1,
                        "notified":0,
                        "master_request":1,
                        "api_id":"",
                        "from_url":"",
                        "review_requested":0,
                        "activity_id": 0,
                        "documents": [
                            {
                              "id": 8172893,
                              "type_id": 7,
                              "storage_id": 0,
                              "user_id": 746310,
                              "company_id": 4564,
                              "number": 4163,
                              "comment": "",
                              "date_created": "2018-07-03 11:00:00",
                              "category_id": 0,
                              "visit_id": 3,
                              "record_id": 2,
                              "type_title": "Визит"
                            }
                        ]
                    },
                    "meta": []
                }

### Удалить запись [DELETE]


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 204 (application/json)


# Group Визиты
<a name="visits"></a>

Для работы с визитами

## Получить визит [GET /visits/{visit_id}]

+ Parameters
    + visit_id: ID визита (number)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "attendance": 1,
                    "datetime": "2018-03-25T15:00:00+04:00",
                    "comment": 0,
                    "records": [
                        {
                            "id": 37955315,
                            "company_id": 4564,
                            "staff_id": 55436,
                            "services": [],
                            "events": [],
                            "goods_transactions": [],
                            "staff": {
                                "id": 55436,
                                "name": "Кевин Спейси",
                                "specialization": "Мастер маникюра и педикюра",
                                "position": {
                                   "id": 1,
                                   "title": "Администратор"
                                },
                                "avatar": "https://yclients.com/uploads/masters/sm/b/bb/bb59d4cc17d9b16_20171215174158.png",
                                "avatar_big": "https://yclients.com/uploads/masters/origin/c/cf/cfb8c5cee58000b_20171215174158.png",
                                "rating": 4.89,
                                "votes_count": 0
                            },
                            "client": {
                                "id": 4240788,
                                "name": "dev1",
                                "phone": "+71000000001",
                                "card": "000000415",
                                "email": "",
                                "success_visits_count": 58,
                                "fail_visits_count": 9
                            },
                            "date": "2018-03-25 15:00:00",
                            "datetime": "2018-03-25T15:00:00+03:00",
                            "create_date": "2018-03-22T17:55:14+0300",
                            "comment": "",
                            "online": false,
                            "visit_attendance": 1,
                            "attendance": 1,
                            "confirmed": 1,
                            "seance_length": 3600,
                            "length": 3600,
                            "sms_before": 1,
                            "sms_now": 1,
                            "sms_now_text": "",
                            "email_now": 1,
                            "notified": 0,
                            "master_request": 0,
                            "api_id": "0",
                            "from_url": "",
                            "review_requested": 0,
                            "visit_id": 8260852,
                            "created_user_id": 999290,
                            "deleted": 0,
                            "paid_full": 0,
                            "prepaid": 0,
                            "prepaid_confirmed": 0,
                            "last_change_date": "2018-03-28T17:46:48+0300",
                            "custom_color": "",
                            "custom_font_color": "",
                            "record_labels": [],
                            "activity_id": 0,
                            "custom_fields": {},
                            "documents": [
                                {
                                  "id": 8172893,
                                  "type_id": 7,
                                  "storage_id": 0,
                                  "user_id": 746310,
                                  "company_id": 4564,
                                  "number": 4163,
                                  "comment": "",
                                  "date_created": "2018-07-03 11:00:00",
                                  "category_id": 0,
                                  "visit_id": 3,
                                  "record_id": 2,
                                  "type_title": "Визит"
                                }
                            ]
                        }
                    ]
                },
                "meta": []
            }


## Получить детали визита [GET /visit/details/{salon_id}/{record_id}/{visit_id}]

**Блок "kkm_transaction_details_container"**

Флаг  "last_operation_type"

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Распечатать чек возврата |
|  1  | Распечатать чек продажи |

Типы всех операций c ККМ

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Операция продажи  (активна для документа с типом "Визит") |
|  1  | Операция возврата продажи (активна для документа с типом "Визит") |
|  2  | Операция коррекции |
|  4  | Операция открытия смены |
|  5  | Операция закрытия смены |
|  9  | Операция получения статуса ККМ  |
|  11  | Операция получения статуса команды ККМ |
|  12  | Операция коррекции |
|  13  | Печать X-отчёта |
|  6  | Внесение наличных |
|  7  | Изъятие наличных |

Статусы всех операций с ККМ

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Ошибка соединения с KKM |
|  1  | Успешно |
|  2  | Отправлен на печать |
|  3  | Ошибка выполнения |
|  4  | Ошибка проверки статуса |
|  5  | Ожидание готовности KKM  |

Типы документов

| Значение  | Описание |
| ------------- | ------------- |
|  1  | Продажа товара |
|  2  | Оказание услуг |
|  3  | Приход товара |
|  4  | Списание товара |
|  5  | Движение товара |
|  6  | Инвентаризация  |
|  7  | Визит |
|  8  | Списание расходников |

+ Parameters
    + salon_id: ID филиала (number)
    + record_id: ID записи (number)
    + visit_id: ID визита (number)

+ Request (application/json)

    + Headers

            Authorization: Bearer access_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "payment_transactions": [
                        {
                            "id": 6023813,
                            "document_id": 8172806,
                            "date": "2018-06-21 17:15:00",
                            "type_id": 5,
                            "expense_id": 5,
                            "account_id": 32299,
                            "amount": 10,
                            "client_id": 4241492,
                            "master_id": 0,
                            "supplier_id": 0,
                            "comment": "",
                            "item_id": 1162679,
                            "target_type_id": 1,
                            "record_id": 13136569,
                            "goods_transaction_id": 0,
                            "expense": {
                                "id": 5,
                                "title": "Оказание услуг"
                            },
                            "account": {
                                "id": 32299,
                                "title": "Депозиты (оплата наличными)"
                            },
                            "client": {
                                "id": "4241492",
                                "name": "ModulKassaClient",
                                "phone": "71001001011"
                            },
                            "master": [],
                            "supplier": []
                        }
                    ],
                    "loyalty_transactions": [
                        {
                            "id": 10614,
                            "status_id": 1,
                            "amount": 0.5,
                            "type_id": 2,
                            "program_id": 145,
                            "card_id": 20013,
                            "salon_group_id": 646,
                            "item_id": 0,
                            "item_type_id": 0,
                            "item_record_id": 0,
                            "goods_transaction_id": 0,
                            "is_discount": false,
                            "is_loyalty_withdraw": false,
                            "type": {
                                "id": 2,
                                "title": "Начисление по программам лояльности"
                            }
                        }
                    ],
                    "kkm_transaction_details_container": {
                        "last_operation_type": 0,
                        "transactions": [
                            {
                                "id": 1047,
                                "print_date": "2018-06-25 00:45:31",
                                "printed_count": 1,
                                "sum": 13,
                                "type": {
                                    "id": 0,
                                    "title": "Операция продажи"
                                },
                                "status": {
                                    "id": 1,
                                    "title": "Успешно"
                                },
                                "document": {
                                    "id": 2045,
                                    "type": 7,
                                    "type_title": "Визит"
                                },
                                "cashier": {
                                    "id": 746310,
                                    "name": "Андрей Панов"
                                }
                            }
                        ]
                    },
                    "items": [
                        {
                            "id": 0,
                            "item_id": 1162679,
                            "item_type_id": 1,
                            "record_id": 13136569,
                            "item_title": "Стрижка у ТОП-мастера",
                            "amount": 2,
                            "first_cost": 20,
                            "manual_cost": 10,
                            "discount": 50,
                            "cost": 10,
                            "master_id": 13136569,
                            "good_id": 0,
                            "service_id": 1162679,
                            "event_id": 0,
                            "is_service": true,
                            "is_event": false,
                            "is_good": false
                        }
                    ]
                },
                "meta": []
            }

## Изменить визит [PUT /visits/{visit_id}/{record_id}]

+ Parameters
    + visit_id: ID визита (number)
    + record_id: ID запись (number)

+ Attributes
    + comment (required, string) - Коментарий
    + attendance (required, number) - 2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
    + services (optional, ServiceArray) - Параметры услуг (id, стоимость, скидка)
    + goods_transactions (optional, GoodsTransactionsArray) - Параметры транзакции
    + new_transactions (optional, newTransactionsArray) - Параметры транзакции
    + deleted_transaction_ids (optional, number) - Массив id экземпляров
    + fast_payment (optional, number) - Быстрая оплата 1 - наличными, 2 - безналичными, 129 - наличными и распечатать, 130 - безналичными и распечатать

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
              "attendance": 1,
              "comment": "",
              "new_transactions": [
                {
                  "id": 1482145166353,
                  "amount": 100,
                  "account_id": 23322
                }
              ],
              "deleted_transaction_ids": [],
              "goods_transactions": [
                {
                  "id": "2168657",
                  "title": "Vital Creme Shampoo Plus",
                  "barcode": "123",
                  "article": "120277",
                  "amount": "-1.000000000",
                  "cost_per_unit": "15.00",
                  "price": "15.00",
                  "cost": "12.00",
                  "operation_unit_type": 2,
                  "master_id": "55436",
                  "storage_id": "91303",
                  "good_id": "232658",
                  "discount": "20.0"
                }
              ],
              "services": [
                {
                  "id": 389045,
                  "title": "Массаж рук (10 мин)",
                  "cost": 255,
                  "cost_per_unit": 300,
                  "discount": 15,
                  "first_cost": 300,
                  "record_id": 10403702
                }
              ]
            }


+ Response 200 (application/json)


## Чек PDF по визиту [GET /attendance/receipt_print/{visit_id}]

+ Parameters
    + visit_id: ID визита (number)

+ Request
    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/pdf)


# Group Групповые события

Для управлениями групповыми событиями используются следующие методы

## Базовые операции [/activity/{company_id}]
### Создание группового события [POST /activity/{company_id}]

+ Parameters
    + company_id (required, number) - ID компании

+ Attributes
    + date (required, string) - дата и время
    + service_id (required, number) - ID услуги
    + staff_id (required, number) - ID мастера
    + resource_instance_ids (optional) - массив id экземпляров ресурсов
    + length (optional, number) - длительность события в секундах
    + force (required, boolean) - игнорировать ошибки (занятость мастера/ресурсов и тп)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "date": "2017-10-10 15:30",
                "service_id": 1185299,
                "staff_id": 26427,
                "capacity": 9,
                "resource_instance_ids": [3127],
                "force": false
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 108,
                    "salon_id": 4564,
                    "service_id": 1185299,
                    "staff_id": 26427,
                    "date": "2017-10-10 15:30:00",
                    "length": 3600,
                    "capacity": 9,
                    "records_count": 0,
                    "color": "",
                    "font_color": "",
                    "service": {
                        "id": 1185299,
                        "title": "Групповой маникюр",
                        "category_id": 754917
                    },
                    "staff": {
                        "id": 26427,
                        "name": "Моника Белуччи",
                        "company_id": 4564
                    },
                    "resource_instances": [
                        {
                            "id": 3127,
                            "title": "Машинка для маникюра #1",
                            "resource_id": 1364
                        }
                    ]
                },
                "meta": []
            }


### Обновление группового события [PUT /activity/{company_id}/{activity_id}]

+ Parameters
    + company_id (required, number) - ID компании
    + activity_id (required, number) - ID группового события

+ Attributes
    + date (required, string) - дата и время
    + service_id (required, number) - ID услуги
    + staff_id (required, number) - ID мастера
    + resource_instance_ids (optional) - массив id экземпляров ресурсов
    + length (optional, number) - длительность события в секундах
    + force (required, boolean) - игнорировать ошибки (занятость мастера/ресурсов и тд)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "date": "2017-10-10 15:30",
                "service_id": 1185299,
                "staff_id": 26427,
                "capacity": 9,
                "resource_instance_ids": [3127],
                "force": false
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 108,
                    "salon_id": 4564,
                    "service_id": 1185299,
                    "staff_id": 26427,
                    "date": "2017-10-10 15:30:00",
                    "length": 3600,
                    "capacity": 9,
                    "records_count": 0,
                    "color": "",
                    "font_color": "",
                    "service": {
                        "id": 1185299,
                        "title": "Групповой маникюр",
                        "category_id": 754917
                    },
                    "staff": {
                        "id": 26427,
                        "name": "Моника Белуччи",
                        "company_id": 4564
                    },
                    "resource_instances": [
                        {
                            "id": 3127,
                            "title": "Машинка для маникюра #1",
                            "resource_id": 1364
                        }
                    ]
                },
                "meta": []
            }

### Удаление группового события [DELETE /activity/{company_id}/{activity_id}]

+ Parameters
    + company_id (required, number) - ID компании
    + activity_id (required, number) - ID групповой записи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 202 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }


### Чтение группового события [GET /activity/{company_id}/{activity_id}]

+ Parameters
    + company_id (required, number) - ID компании
    + activity_id (required, number) - ID групповой записи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 108,
                    "salon_id": 4564,
                    "service_id": 1185299,
                    "staff_id": 26427,
                    "date": "2017-10-10 15:30:00",
                    "length": 3600,
                    "capacity": 9,
                    "records_count": 0,
                    "color": "",
                    "font_color": "",
                    "service": {
                        "id": 1185299,
                        "title": "Групповой маникюр",
                        "category_id": 754917
                    },
                    "staff": {
                        "id": 26427,
                        "name": "Моника Белуччи",
                        "company_id": 4564
                    },
                    "resource_instances": [
                        {
                            "id": 3127,
                            "title": "Машинка для маникюра #1",
                            "resource_id": 1364
                        }
                    ]
                },
                "meta": []
            }

### Поиск групповых событий [GET /activity/{company_id}/search/{?from,till}]

+ Parameters
    + company_id (required, number) - ID компании
    + from (required, string) - дата начала поиска (формат ГГГГ-ММ-ДД)
    + till (required, string) - дата окончания поиска (формат ГГГГ-ММ-ДД)

+ Attributes
    + staff_id (optional, number) - ID мастера
    + service_id (optional, number) - ID услуги
    + count (optional, number) - количество событий на страницу результата (default 25, max 300)
    + page (optional, number) - страница выдачи результата (начиная с 1)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 108,
                        "salon_id": 4564,
                        "service_id": 1185299,
                        "staff_id": 26427,
                        "date": "2017-10-10 15:30:00",
                        "timestamp": 1507635000,
                        "length": 3600,
                        "capacity": 9,
                        "records_count": 0,
                        "color": "",
                        "font_color": "",
                        "service": {
                            "id": 1185299,
                            "title": "Групповой маникюр",
                            "category_id": 754917
                        },
                        "staff": {
                            "id": 26427,
                            "name": "Моника Белуччи",
                            "company_id": 4564
                        },
                        "resource_instances": [
                            {
                                "id": 3127,
                                "title": "Машинка для маникюра #1",
                                "resource_id": 1364
                            }
                        ]
                    }
                ],
                "meta": [
                    "count": 1
                ]
            }

### Поиск дат групповых событий [GET /activity/{company_id}/search_dates/{?from,till}]

+ Parameters
    + company_id (required, number) - ID компании
    + from (required, string) - дата начала поиска (формат ГГГГ-ММ-ДД)
    + till (required, string) - дата окончания поиска (формат ГГГГ-ММ-ДД)

+ Attributes
    + staff_id (optional, number) - ID мастера
    + service_id (optional, number) - ID услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    "2017-09-15",
                    "2017-09-18",
                    "2017-09-20",
                    "2017-09-24",
                    "2017-09-25",
                    "2017-09-27",
                    "2017-09-21",
                    "2017-09-23",
                    "2017-09-29",
                    "2017-09-22",
                    "2017-10-09",
                    "2017-10-10"
                ],
                "meta": []
            }

## Услуги для групповых событий [/activity/{company_id}/services]

Метод для поиска групповых услуг с фильтрацией по названию либо мастеру
В ответе возвращается коллекция контейнеров услуг
Каждый объект контейнера услуги содержит в себе данные по услуге, мастерам, оказывающим данную услугу, ресурсам прикрепленным для данной услуги
### Поиск групповых услуг [GET /api/v1/activity/{company_id}/services?staff_id=1&term=test]

+ Parameters
    + company_id: 4564 (required, number) - ID компании

+ Attributes
    + staff_id: 1 (optional, number) - ID мастера для фильтрации
    + term: `test` (optional, string) - Поиск по названию или части названия услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 1209148,
                        "title": "Фитнес test",
                        "capacity": 5,
                        "price_min": 2,
                        "price_max": 3,
                        "is_multi": true,
                        "category": {
                            "id": 1285356,
                            "title": "Групповые услуги"
                        },
                        "staff": [
                            {
                                "id": 37695,
                                "name": "Ким Кардашьян",
                                "length": 7200
                            }
                        ],
                        "resources": [
                            {
                                "id": 464,
                                "title": "Массажный кабинет",
                                "salon_id": 4564
                            }
                        ]
                    }
                ],
                "meta": {
                    "count": 1
                }
            }



## Дублирование групповых событий [/api/v1/activity/{company_id}/duplication_strategy]
Дублирование событий происходит на основе набора параметров, объединенных в сущность "стратегия дублирования"
| Поле          | Тип           | Описание                                  |
| ------------- | ------------- | ----------------------------------------- |
| title         | string        | Название стратегии                        |
| repeat_mode_id| integer       | Режим повторения                          |
| days          | integer[]     | Перечень дней недели: 0 вс, 6 пт          |
| interval      | integer       | Перерыв в поиске дат, в единицах типа     |
| content_type  | integer       | Дублировать записи? 1 - нет, 2 - да       |

Режим повторения может принимать значения
| Значение | Описание | Единица измерения перерыва  |
| - | ------------- | ----------------------------- |
| 1 | Ежедневно     | День                          |
| 2 | По будням     | -                             |
| 3 | Пн Ср Пт      | -                             |
| 4 | Вт Чт         | -                             |
| 5 | Каждую неделю | Неделя                        |
| 6 | Каждый месяц  | Месяц                         |
| 7 | Каждый год    | Год                           |

Поле days актуально только для режима 5 - неделя, для указания конкретных дней повторения
Если указать repeat_mode = 5, days = [1,4], interval = 2, то событие будет
повторяться каждую 3ю неделю в пн и чт

### Получение стратегий дублирования групповых событий [GET /api/v1/activity/{company_id}/duplication_strategy]

+ Parameters
    + company_id: 4564 (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 2,
                        "company_id": 4564,
                        "title": "Тестовый шаблон",
                        "repeat_mode_id": 1,
                        "repeat_mode": {
                            "id": 1,
                            "title": "Ежедневно"
                        },
                        "days": [],
                        "interval": 0,
                        "content_type": 1
                    }
                ],
                "meta": {
                    "count": 1
                }
            }

##Создание шаблона дублирования группового события [POST /api/v1/activity/{company_id}/duplication_strategy]
+ Parameters
    + company_id (required, number) - ID компании

+ Attributes
    + title: `Test duplication strategy` (required, string) - Название
    + days: (optional, array[number]) - Дни повторений для недельного режима
        + 1
        + 4
    + repeat_mode_id: 5 (required, number) - Режим повторений
    + interval: 2 (optional, number) - Перерыв в поиске дат
    + content_type: 1 (optional, number) - Дублировать записи? 1 - нет, 2 - да

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 3,
                    "company_id": 4564,
                    "title": "Test duplication strategy",
                    "repeat_mode_id": 5,
                    "repeat_mode": {
                    "id": 5,
                    "title": "Каждую неделю"
                    },
                    "days": [ 1, 4 ],
                    "interval": 2,
                    "content_type": 1
                },
                "meta": []
            }

##Обновление шаблона дублирования группового события [POST /api/v1/activity/{company_id}/duplication_strategy/{strategy_id}]
+ Parameters
    + company_id: 4564 (required, number) - ID компании
    + strategy_id: 3 (required, number) - ID стратегии дублирования

+ Attributes
    + title: `New test duplication strategy` (required, string) - Название
    + days (optional, array) - Дни повторений для недельного режима
        + 2
        + 3
    + repeat_mode_id (required, number) - Режим повторений
    + interval (optional, number) - Перерыв в поиске дат
    + content_type (optional, number) - Дублировать записи? 1 - нет, 2 - да

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 3,
                    "company_id": 4564,
                    "title": "New test duplication strategy",
                    "repeat_mode_id": 5,
                    "repeat_mode": {
                    "id": 5,
                    "title": "Каждую неделю"
                    },
                    "days": [ 2, 3 ],
                    "interval": 3,
                    "content_type": 1
                },
                "meta": []
            }

##Удаление шаблона дублирования группового события [DELETE /api/v1/activity/{company_id}/duplication_strategy/{strategy_id}]
+ Parameters
    + company_id: 4564 (required, number) - ID компании
    + strategy_id: 3 (required, number) - ID стратегии дублирования

+ Request (application/json)

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 202 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": [
                    "message": "Accepted"
                ]
            }

##Запрос дублирования группового события [POST /api/v1/activity/{company_id}/{activity_id}/duplicate/]
Запрос на дублирование можно оформить 3 способами:
- Указав список дат и времени для дублирования
- Указав id стратегии повторения
- Указав все параметры повторения

+ Parameters
    + company_id: 1 (required, number) ID компании
    + activity_id: 2 (required, number) ID группового события

+ Request Дублирование событий по списку дат (application/json)

    + Attributes

        + dates (required, array[string]) Список дат и времени
            + `2020-10-03T13:30:00`
            + `2020-10-03T15:30:00`
        + content_type: 1 (required, number) Дублировать записи? 1 - нет, 2 - да
        + force: false (optional, boolean) Можно подтвердить на создании событий проигнорировав конфликты доступности ресурсов

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 9182,
                        "service_id": 1209148,
                        "salon_id": 4564,
                        "master_id": 1000265,
                        "date": "2020-09-28 10:30:00",
                        "length": 7200,
                        "capacity": 5,
                        "records_count": 0,
                        "color": "",
                        "instructions": "",
                        "stream_link": "",
                        "font_color": "",
                        "notified": false,
                        "timestamp": 1601274600,
                        "service": {
                            "id": 1209148,
                            "category_id": 1285356,
                            "title": "Фитнес \"test\"",
                            "price_min": 2,
                            "price_max": 3,
                            "prepaid": "forbidden"
                        },
                        "resource_instances": [
                            {
                                "id": 1094,
                                "title": "Массажный кабинет 1 этаж",
                                "resource_id": 464
                            }
                        ],
                        "master": {
                            "id": 1000265,
                            "api_id": null,
                            "name": "Master",
                            "company_id": 4564,
                            "specialization": "321",
                            "rating": 0,
                            "show_rating": 1,
                            "prepaid": "allowed",
                            "position": []
                        },
                        "records": [],
                        "labels": []
                    }
                ],
                "meta": {
                    "count": 2
                }
            }

+ Request Дублирование событий по стратегии (application/json)

    + Attributes

        + duplication_strategy_id: 1 (required, number) - ID стратегии дублирования
        + from: `2020-09-28` (string, required) - Начало диапазона поиска дат
        + till: `2020-10-28` (string, optional) - Конец диапазона поиска дат
        + count: 2  (number, optional) - Альтернативный вариант ограничения вместо till
        + hours: 10 (number, optional) - Часы, если не указано то значение из события
        + minutes: 30 (number, optional) - Минуты, если не указано то значение из события
        + force: false (optional, boolean) - можно настоять создание событий проигнорировав конфликты доступности ресурсов

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 409 (application/json)

    + Body

            {
                "success": false,
                "data": null,
                "meta": {
                    "message": "Мастер занят или не работает: 2020-10-01 10:30",
                    "conflict": true
                }
            }

+ Request Дублирование событий по параметрам (application/json)

    + Attributes

        + repeat_mode_id: 5 (required, number) - Режим повторений
        + interval: 2 (optional, number) - Перерыв в поиске дат
        + days:[ 2, 3 ] (optional, array[number]) - Дни повторений для недельного режима
        + from: `2020-09-28` (string, required) - Начало диапазона поиска дат
        + till: `2020-10-28` (string, optional) - Конец диапазона поиска дат
        + count: 2  (number, optional) - Альтернативный вариант ограничения вместо till
        + hours: 10 (number, optional) - Часы, если не указано то значение из события
        + minutes: 30 (number, optional) - Минуты, если не указано то значение из события
        + content_type (optional, number) - Дублировать записи? 1 - нет, 2 - да
        + force: false (optional, boolean) - можно настоять создание событий проигнорировав конфликты доступности ресурсов

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

+ Response 409 (application/json)

    + Body

            {
                "success": false,
                "data": null,
                "meta": {
                    "message": "Мастер занят или не работает: 2020-10-01 10:30",
                    "conflict": true
                }
            }



# Group Расписание работы сотрудника
график работы сотрудника

Расписание сотрудника передается в виде массива объектов, каждый из которых имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  date  |  string  |  Дата, на которую необходимо установить расписание  |
|  is_working  | boolean  |  true, если сотрудник работает в этот день. false, если не работает и существующие расписание нужно удалить  |
|  slots  | array  |  Массив содержащий промежутки рабочего времени сотрудника. (Может быть пустым если is_working = false)   |

Массив slots состоит из объектов, содержащих следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  from  |  string  |  Время начала рабочего промежутка сотрудника. Например "11:00" или "10:30"  |
|  to  | string  |  Время окончания рабочего промежутка сотрудника. Например "18:00" или "19:45"  |


## Коллекция расписание сотрудника [/schedule/{company_id}/{staff_id}/{start_date}/{end_date}]

+ Parameters
    + company_id (required, number) - ID компании
    + staff_id (required, number) - ID сотрудника


### Изменить расписание работы сотрудника [PUT]


+ Request (application/json)

    + Attributes
        + date (required, string) - Дата
        + is_working (required, boolean) - Рабочая дата или нет
        + slots (required, array) - Массив (from, to) промежутков рабочего времени

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

               [
                    {
                        "date": "2016-02-05",
                        "is_working": true,
                        "slots" : [
                            {
                                "from" : "10:00",
                                "to" : "14:30"
                            },
                            {
                                "from" : "15:00",
                                "to" : "22:00"
                            }
                            ]
                    },
                    {
                        "date": "2016-02-04",
                        "is_working": true,
                        "slots" : [
                            {
                                "from" : "10:00",
                                "to" : "14:00"
                            },
                            {
                                "from" : "15:00",
                                "to" : "23:15"
                            }
                            ]
                    }
                ]


+ Response 201 (application/json)

### Получить расписание сотрудника [GET]

+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (required, number) - ID сотрудника.
    + start_date:'' (required, number) -  Дата начала периода
    + end_date:'' (required, number) - Дата окончания периода

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + date (required, string) - дата в формате iso8601.
        + is_working (required, boolean) - Свободно время или нет.
        + slots (array) - Массив (from, to) промежутков рабочего времени.

    + Body

               {
                   "success": true,
                   "data": [
                        {
                            "date": "2016-02-04",
                            "is_working": 1,
                            "slots" : [
                                {
                                    "from" : "10:00",
                                    "to" : "14:00"
                                },
                                {
                                    "from" : "15:00",
                                    "to" : "23:15"
                                }
                                ]
                        },
                        {
                            "date": "2016-02-05",
                            "is_working": 1,
                            "slots" : [
                                {
                                    "from" : "10:00",
                                    "to" : "14:30"
                                },
                                {
                                    "from" : "15:00",
                                    "to" : "22:10"
                                }
                                ]
                        },
                        {
                            "date": "2016-02-06",
                            "is_working": 0,
                            "slots": []
                        },
                        {
                            "date": "2016-02-07",
                            "is_working": 1,
                            "slots" : [
                                {
                                    "from" : "10:00",
                                    "to" : "14:00"
                                },
                                {
                                    "from" : "15:00",
                                    "to" : "22:00"
                                }
                                ]
                        }
                   ],
                   "meta": []
               }



# Group Даты для журнала
Для выбора дат в журнале записи

## Коллекция дат для журнала [/timetable/dates/{company_id}/{date}{?staff_id}]

Даты для журнала представляют из себя массив с датами. (например ["2015-10-26", "2015-10-30"]).

Для получения дат нужно передать дату, относительно которой будут получен список рабочих дат салона/сотрудника.


### Получить список дат для журнала [GET]


+ Parameters

    + company_id (required, number) - ID компании
    + date (required, string) - дата в формате iso8601.
        Фильтр по дате бронирования (например '2015-09-30')
    + staff_id (optional, number) - ID сотрудника.

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data":  [
                    "2015-10-26",
                    "2015-10-30",
                    "2015-10-31",
                    "2015-11-01",
                    "2015-11-02",
                    "2015-11-13",
                    "2015-11-20"
                ],
                "meta": []
            }



# Group Сеансы для журнала
Для выбора сеансов в журнале записи

## Коллекция сеансов для журнала [/timetable/seances/{company_id}/{staff_id}/{date}]
Объект сеансы для журнала имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  time  |  string   | Время сеанса (17:30 например)   |
|  free  | boolean  | Свободно время или занято  |


### Получить список сеансов для журнала [GET]


+ Parameters

    + company_id (required, number) - ID компании
    + date (required, string) - дата в формате iso8601.
        Фильтр по дате бронирования (например '2015-09-30')
    + staff_id (required, number) - ID сотрудника.

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Attributes
        + time (required, string) - Время сеанса
        + free (required, boolean) - Свободно время или нет


    + Body

            {
                "success": true,
                "data": [
                  {
                    "time": "10:00",
                    "is_free": true
                  },
                  {
                    "time": "10:15",
                    "is_free": true
                  },
                  {
                    "time": "10:30",
                    "is_free": true
                  },
                  {
                    "time": "10:45",
                    "is_free": true
                  },
                  {
                    "time": "11:00",
                    "is_free": false
                  },
                  {
                    "time": "11:15",
                    "is_free": false
                  },
                  {
                    "time": "11:30",
                    "is_free": false
                  },
                  {
                    "time": "11:45",
                    "is_free": false
                  },
                  {
                    "time": "12:00",
                    "is_free": false
                  },
                  {
                    "time": "12:15",
                    "is_free": false
                  },
                  {
                    "time": "12:30",
                    "is_free": false
                  },
                  {
                    "time": "12:45",
                    "is_free": false
                  },
                  {
                    "time": "13:00",
                    "is_free": true
                  },
                  {
                    "time": "13:15",
                    "is_free": true
                  },
                  {
                    "time": "13:30",
                    "is_free": true
                  },
                  {
                    "time": "13:45",
                    "is_free": true
                  },
                  {
                    "time": "14:00",
                    "is_free": true
                  },
                  {
                    "time": "14:15",
                    "is_free": true
                  },
                  {
                    "time": "14:30",
                    "is_free": true
                  },
                  {
                    "time": "14:45",
                    "is_free": true
                  },
                  {
                    "time": "15:00",
                    "is_free": true
                  },
                  {
                    "time": "15:15",
                    "is_free": true
                  },
                  {
                    "time": "15:30",
                    "is_free": true
                  },
                  {
                    "time": "15:45",
                    "is_free": true
                  },
                  {
                    "time": "16:00",
                    "is_free": true
                  },
                  {
                    "time": "16:15",
                    "is_free": true
                  },
                  {
                    "time": "16:30",
                    "is_free": false
                  },
                  {
                    "time": "16:45",
                    "is_free": false
                  },
                  {
                    "time": "17:00",
                    "is_free": false
                  }
                ],
                "meta": []
            }


# Group Медицина
Для работы с модулем Медицина используются следующие методы

## Пациент [/api/v1/medicine/{company_id}/patients/{patient_type}/{patient_id}/]

Объект пациента содержит следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
| id | number | id пациента |
| patient_type | string | Тип пациента ([список возможных значений](#medicine-patient-type)) |
| full_name | string | Полное имя пациента
| sex | number | Пол пациента ([список возможных значений](#medicine-patient-sex))
| date_birthday | string | Дата рождения пациента в формате dd-mm-yyyy
| phone | string | Телефон пациента

<a name="medicine-patient-type"></a>
**Типы пациентов**

| Значение  | Описание  |
| --------- | --------- |
| сlient    | Клиент    |
| comer     | Посетитель|

<a name="medicine-patient-sex"></a>
**Пол пациента**

| Значение  | Описание  |
| --------- | --------- |
| 0         | Не указан |
| 1         | Мужской   |
| 2         | Женский   |

### Получить данные пациента [GET]
+ Parameters

    + company_id (required, number) - ID филиала
    + patient_type (required, 'clients' | 'comers') - Тип пациента
    + patient_id (required, number) - Если пациентом является клиент(patient type = 'clients'), то необходимо передать id клиента. Если пациентом является посетитель(patient type = 'comers'), то необходимо передать id посетителя

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (Patient)

    + Body
        {
            "success": true,
            "data": {
                "id": 142,
                "patient_type": "client",
                "full_name": "Олег Олегович Кучера",
                "sex": 0,
                "date_birthday": "1980-10-10",
                "phone": "+79999999999"
            },
            "meta": []
        }

## Медицинская карта [/api/v1/medicine/{company_id}/patients/{patient_type}/{patient_id}/cards/]

Объект медицинской карты содержит следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
| id | number | Id медицинской карты |
| fill_date | string | Дата заполнения медицинской карты в формате dd-mm-yyyy
| place_of_registration | string | Место регистрации пациента
| locality | string | Местность проживания пациента ([список возможных значений](#medicine-patient-locality))
| document_name | string | Документ пациента
| document_number_series | string | Серия и номер документа пациента
| polis_oms | string | Номер полиса ОМС пациента
| snils | string | СНИЛС пациента
| marital_status | string | Семейное положение пациента ([список возможных значений](#medicine-patient-marital-status))
| education | string | Образование пациента ([список возможных значений](#medicine-patient-education))
| occupation | string | Занятость пациента ([список возможных значений](#medicine-patient-occupation))
| place_of_work | string | Место работы пациента
| position | string | Должность пациента
| exemption_code | string | Код категории льготы пациента
| insurance_organization | string | Наименование страховой медицинской организации пациента
| disability | string | Данные об инвалидности пациента
| blood_type | string | Группа крови пациента ([список возможных значений](#medicine-patient-blood-type))
| rhesus_factor | string | Резус фактор пациента ([список возможных значений](#medicine-patient-rhesus-factor))
| allergies | string | Аллергические реакции пациента

<a name="medicine-patient-locality"></a>
**Возможные значения местности проживания пациента**

| Значение  | Описание   |
| --------- | ---------- |
| rural     | Сельская   |
| urban     | Городская  |
| unknown   | Неизвестно |

<a name="medicine-patient-marital-status"></a>
**Возможные значения семейного положения пациента**

| Значение  | Описание  |
| --------- | --------- |
| married   | Состоит в зарегистрированном браке |
| single    | Не состоит в браке |
| unknown   | Неизвестно|

<a name="medicine-patient-education"></a>
**Виды образования пациента**

| Значение  | Описание  |
| --------- | --------- |
| higher    | Профессиональное: высшее |
| secondary | Среднее |
| general_secondary | Общее среднее|
| basic     | Основное|
| primary   | Начальное|
| unknown   | Неизвестно|

<a name="medicine-patient-occupation"></a>
**Виды занятости пациента**

| Значение  | Описание  |
| --------- | --------- |
| employed  | Работает |
| military_service | Проходит военную службу и приравненную к  ней  службу |
| pensioner | Пенсионер(ка) |
| student   | Студент(ка) |
| unemployed| Не работает |
| other     | Прочее      |
| unknown   | Неизвестно  |

<a name="medicine-patient-blood-type"></a>
**Группы крови пациента**

| Значение     | Описание   |
| ------------ | ---------- |
| blood_type_0 | O (I)      |
| blood_type_a | A (II)     |
| blood_type_b | B (III)    |
| blood_type_ab| AB (IV)    |
| unknown      | Неизвестно |

<a name="medicine-patient-rhesus-factor"></a>
**Резус факторы пациента**

| Значение  | Описание   |
| --------- | ---------- |
| positive  | Positive   |
| negative  | Negative   |
| unknown   | Неизвестно |

### Получить медицинские карты пациента [GET]
+ Parameters

    + company_id (required, number) - ID филиала
    + patient_type (required, 'clients' | 'comers') - Тип пациента
    + patient_id (required, number) - Если пациентом является клиент(patient type = 'clients'), то необходимо передать id клиента. Если пациентом является посетитель(patient type = 'comers'), то необходимо передать id посетителя

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (array[MedicalCard])

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 10,
                    "number": "",
                    "fill_date": "2020-11-29",
                    "place_of_registration": "г. Москва, ул. Энергетическая, д. 10, к. 2",
                    "locality": "urban",
                    "document_name": "Паспорт",
                    "document_number_series": "0403",
                    "polis_oms": "231255656",
                    "snils": "123532123",
                    "marital_status": "single",
                    "education": "general_secondary",
                    "occupation": "unemployed",
                    "place_of_work": "",
                    "position": "",
                    "exemption_code": "789",
                    "insurance_organization": "ООО \"Росток\"",
                    "disability": "",
                    "blood_type": "blood_type_a",
                    "rhesus_factor": "positive",
                    "allergies": ""
                }
            ],
            "meta": []
        }

### Получить данные конкретной медицинской карты [GET /api/v1/medicine/{company_id}/patients/{patient_type}/{patient_id}/cards/{card_id}/]
+ Parameters

    + company_id (required, number) - ID филиала
    + patient_type (required, 'clients' | 'comers') - Тип пациента
    + patient_id (required, number) - Если пациентом является клиент(patient type = 'clients'), то необходимо передать id клиента. Если пациентом является посетитель(patient type = 'comers'), то необходимо передать id посетителя
    + card_id (required, number) - ID медицинской карты

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (MedicalCard)

    + Body
        {
            "success": true,
            "data": {
                "id": 10,
                "number": "",
                "fill_date": "2020-11-29",
                "place_of_registration": "г. Москва, ул. Энергетическая, д. 10, к. 2",
                "locality": "urban",
                "document_name": "Паспорт",
                "document_number_series": "0403",
                "polis_oms": "231255656",
                "snils": "123532123",
                "marital_status": "single",
                "education": "general_secondary",
                "occupation": "unemployed",
                "place_of_work": "",
                "position": "",
                "exemption_code": "789",
                "insurance_organization": "ООО \"Росток\"",
                "disability": "",
                "blood_type": "blood_type_a",
                "rhesus_factor": "positive",
                "allergies": ""
            },
            "meta": []
        }

### Добавить новую медицинскую карту [POST]
+ Parameters

    + company_id (required, number) - ID филиала
    + patient_type (required, 'clients' | 'comers') - Тип пациента
    + patient_id (required, number) - Если пациентом является клиент(patient type = 'clients'), то необходимо передать id клиента. Если пациентом является посетитель(patient type = 'comers'), то необходимо передать id посетителя

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (MedicalCard)

    + Body
        {
            "success": true,
            "data": {
                "id": 10,
                "number": "",
                "fill_date": "2020-11-29",
                "place_of_registration": "г. Москва, ул. Энергетическая, д. 10, к. 2",
                "locality": "urban",
                "document_name": "Паспорт",
                "document_number_series": "0403",
                "polis_oms": "231255656",
                "snils": "123532123",
                "marital_status": "single",
                "education": "general_secondary",
                "occupation": "unemployed",
                "place_of_work": "",
                "position": "",
                "exemption_code": "789",
                "insurance_organization": "ООО \"Росток\"",
                "disability": "",
                "blood_type": "blood_type_a",
                "rhesus_factor": "positive",
                "allergies": ""
            },
            "meta": []
        }

### Изменить данные конкретной медицинской карты [PUT /api/v1/medicine/{company_id}/patients/{patient_type}/{patient_id}/cards/{card_id}/]
+ Parameters

    + company_id (required, number) - ID филиала
    + patient_type (required, 'clients' | 'comers') - Тип пациента
    + patient_id: (required, number) - Если пациентом является клиент(patient type = 'clients'), то необходимо передать id клиента. Если пациентом является посетитель(patient type = 'comers'), то необходимо передать id посетителя
    + card_id (required, number) - ID медицинской карты

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (MedicalCard)

    + Body
        {
            "success": true,
            "data": {
                "id": 103,
                "number": "",
                "fill_date": "2020-11-29",
                "place_of_registration": "г. Краснодар, ул. Звездная, д. 10, к. 2",
                "locality": "urban",
                "document_name": "Паспорт",
                "document_number_series": "2222",
                "polis_oms": "231255656",
                "snils": "123532123",
                "marital_status": "single",
                "education": "general_secondary",
                "occupation": "unemployed",
                "place_of_work": "",
                "position": "",
                "exemption_code": "789",
                "insurance_organization": "ООО \"Росток\"",
                "disability": "",
                "blood_type": "blood_type_a",
                "rhesus_factor": "negative",
                "allergies": ""
            },
            "meta": []
        }


## Прием врача [/medicine/{company_id}/record/{record_id}/appointments]

Объект приема врача содержит следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number   |  id приема   |
|  fields  | Array of objects([Поле приема врача](#medicine-appointment-field))  | список полей приема |

<a name="medicine-appointment-field"></a>
**Поле приема врача** имеет следующую структуру:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  slug  |  string   |  идентификатор поля   |
|  value  | string  | значение поля |
|  title  | string  | лейбл поля |
|  type  | string  | тип поля |
|  is_required  | boolean  | обязательно ли заполнять поле? true - обязательно, false - не обязательно |
|  is_editable  | boolean  | можно ли редактировать поле? true - можно, false - нельзя |
|  sort_number  | number  | порядок поля на странице |


### Получить список всех приемов врача [GET]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID приема
        + fields (required, array[MedicineAppointmentField]) - Список полей приема

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 21558,
                    "fields": [
                        {
                            "slug": "symptoms",
                            "value": "Боли в эпигастрии, ноющие, натощак, с небольшим облегчением после еды. Ночью болей нет. Изжога, аппетит сохранен, вес стабилен.",
                            "title": "Жалобы",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 1
                        },
                        {
                            "slug": "morbi_anamnesis",
                            "value": "ЯБ 12 п. кишки, ЖКК в 2000 и 2007. Боли с декабря. Ухудшение 1 месяц",
                            "title": "Анамнез morbi",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 2
                        },
                        {
                            "slug": "vitae_anamnesis",
                            "value": "",
                            "title": "Анамнез Vitae",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 3
                        },
                        {
                            "slug": "past_chronic_diseases_operations_injuries",
                            "value": "",
                            "title": "Перенесенные хронические заболевания, операции, травмы",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 4
                        },
                        {
                            "slug": "epidemic_anamnesis",
                            "value": "",
                            "title": "Эпидемический анамнез",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 5
                        },
                        {
                            "slug": "expert_anamnesis",
                            "value": "",
                            "title": "Экспертный анамнез",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 6
                        },
                        {
                            "slug": "allergo_anamnesis",
                            "value": "",
                            "title": "Аллерго анамнез",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 7
                        },
                        {
                            "slug": "general_organ_and_systems_examination",
                            "value": "",
                            "title": "Общий осмотр по органам и системам",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 8
                        },
                        {
                            "slug": "manipulations_performed",
                            "value": "",
                            "title": "Выполненные манипуляции",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 9
                        },
                        {
                            "slug": "preliminary_diagnosis",
                            "value": "",
                            "title": "Предварительный диагноз",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 10
                        },
                        {
                            "slug": "prescriptions",
                            "value": "",
                            "title": "Назначения",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 11
                        },
                        {
                            "slug": "recommended_treatment",
                            "value": "",
                            "title": "Рекомендации по лечению",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 12
                        },
                        {
                            "slug": "comment",
                            "value": "",
                            "title": "Комментарий",
                            "type": "textarea",
                            "is_required": false,
                            "is_editable": true,
                            "sort_number": 13
                        }
                    ]
                },
            ],
            "meta": []
        }

### Получить данные по конкретному приему [GET /medicine/{company_id}/record/{record_id}/appointments/{appointment_id}]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи
    + appointment_id (required, number) - ID приема

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID приема
        + fields (required, array[MedicineAppointmentField]) - Список полей приема

    + Body
        {
            "success": true,
            "data": {
                "id": 21558,
                "fields": [
                    {
                        "slug": "symptoms",
                        "value": "Боли в эпигастрии, ноющие, натощак, с небольшим облегчением после еды. Ночью болей нет. Изжога, аппетит сохранен, вес стабилен.",
                        "title": "Жалобы",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 1
                    },
                    {
                        "slug": "morbi_anamnesis",
                        "value": "ЯБ 12 п. кишки, ЖКК в 2000 и 2007. Боли с декабря. Ухудшение 1 месяц",
                        "title": "Анамнез morbi",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 2
                    },
                    {
                        "slug": "vitae_anamnesis",
                        "value": "",
                        "title": "Анамнез Vitae",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 3
                    },
                    {
                        "slug": "past_chronic_diseases_operations_injuries",
                        "value": "",
                        "title": "Перенесенные хронические заболевания, операции, травмы",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 4
                    },
                    {
                        "slug": "epidemic_anamnesis",
                        "value": "",
                        "title": "Эпидемический анамнез",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 5
                    },
                    {
                        "slug": "expert_anamnesis",
                        "value": "",
                        "title": "Экспертный анамнез",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 6
                    },
                    {
                        "slug": "allergo_anamnesis",
                        "value": "",
                        "title": "Аллерго анамнез",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 7
                    },
                    {
                        "slug": "general_organ_and_systems_examination",
                        "value": "",
                        "title": "Общий осмотр по органам и системам",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 8
                    },
                    {
                        "slug": "manipulations_performed",
                        "value": "",
                        "title": "Выполненные манипуляции",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 9
                    },
                    {
                        "slug": "preliminary_diagnosis",
                        "value": "",
                        "title": "Предварительный диагноз",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 10
                    },
                    {
                        "slug": "prescriptions",
                        "value": "",
                        "title": "Назначения",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 11
                    },
                    {
                        "slug": "recommended_treatment",
                        "value": "",
                        "title": "Рекомендации по лечению",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 12
                    },
                    {
                        "slug": "comment",
                        "value": "",
                        "title": "Комментарий",
                        "type": "textarea",
                        "is_required": false,
                        "is_editable": true,
                        "sort_number": 13
                    }
                ]
            },
            "meta": []
        }

### Добавить новый прием [POST]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body
        {
            "fields": [
                {
                    "slug": "symptoms",
                    "value": "Головная боль"
                },
                {
                    "slug": "morbi_anamnesis",
                    "value": ""
                },
                {
                    "slug": "vitae_anamnesis",
                    "value": ""
                },
                {
                    "slug": "past_chronic_diseases_operations_injuries",
                    "value": ""
                },
                {
                    "slug": "epidemic_anamnesis",
                    "value": ""
                },
                {
                    "slug": "expert_anamnesis",
                    "value": ""
                },
                {
                    "slug": "allergo_anamnesis",
                    "value": ""
                },
                {
                    "slug": "general_organ_and_systems_examination",
                    "value": ""
                },
                {
                    "slug": "manipulations_performed",
                    "value": ""
                },
                {
                    "slug": "preliminary_diagnosis",
                    "value": ""
                },
                {
                    "slug": "prescriptions",
                    "value": ""
                },
                {
                    "slug": "recommended_treatment",
                    "value": ""
                },
                {
                    "slug": "comment",
                    "value": ""
                }
            ]
        }

    + Attributes
        + fields (required, array[MedicineAppointmentFieldEssential]) - список значений полей приема для сохранения

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID приема
        + fields (required, array[MedicineAppointmentField]) - Список полей приема

    + Body
        {
            "success": true,
            "data": {
                "id": 21558,
                "fields": [
                     {
                         "slug": "symptoms",
                         "value": "Головная боль",
                         "title": "Жалобы",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 1
                     },
                     {
                         "slug": "morbi_anamnesis",
                         "value": "",
                         "title": "Анамнез morbi",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 2
                     },
                     {
                         "slug": "vitae_anamnesis",
                         "value": "",
                         "title": "Анамнез Vitae",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 3
                     },
                     {
                         "slug": "past_chronic_diseases_operations_injuries",
                         "value": "",
                         "title": "Перенесенные хронические заболевания, операции, травмы",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 4
                     },
                     {
                         "slug": "epidemic_anamnesis",
                         "value": "",
                         "title": "Эпидемический анамнез",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 5
                     },
                     {
                         "slug": "expert_anamnesis",
                         "value": "",
                         "title": "Экспертный анамнез",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 6
                     },
                     {
                         "slug": "allergo_anamnesis",
                         "value": "",
                         "title": "Аллерго анамнез",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 7
                     },
                     {
                         "slug": "general_organ_and_systems_examination",
                         "value": "",
                         "title": "Общий осмотр по органам и системам",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 8
                     },
                     {
                         "slug": "manipulations_performed",
                         "value": "",
                         "title": "Выполненные манипуляции",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 9
                     },
                     {
                         "slug": "preliminary_diagnosis",
                         "value": "",
                         "title": "Предварительный диагноз",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 10
                     },
                     {
                         "slug": "prescriptions",
                         "value": "",
                         "title": "Назначения",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 11
                     },
                     {
                         "slug": "recommended_treatment",
                         "value": "",
                         "title": "Рекомендации по лечению",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 12
                     },
                     {
                         "slug": "comment",
                         "value": "",
                         "title": "Комментарий",
                         "type": "textarea",
                         "is_required": false,
                         "is_editable": true,
                         "sort_number": 13
                     }
                ]
            },
            "meta": []
        }

### Изменить данные о конкретном приеме [PUT /medicine/{company_id}/record/{record_id}/appointments/{appointment_id}]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи
    + appointment_id (required, number) - ID приема

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body
        {
            "fields": [
                {
                    "slug": "symptoms",
                    "value": "Ночные боли в животе"
                },
                {
                    "slug": "morbi_anamnesis",
                    "value": "ЖКК в 2000 и 2007"
                },
                {
                    "slug": "vitae_anamnesis",
                    "value": ""
                },
                {
                    "slug": "past_chronic_diseases_operations_injuries",
                    "value": "в 2010 году сломал руку"
                },
                {
                    "slug": "epidemic_anamnesis",
                    "value": ""
                },
                {
                    "slug": "expert_anamnesis",
                    "value": ""
                },
                {
                    "slug": "allergo_anamnesis",
                    "value": ""
                },
                {
                    "slug": "general_organ_and_systems_examination",
                    "value": ""
                },
                {
                    "slug": "manipulations_performed",
                    "value": ""
                },
                {
                    "slug": "preliminary_diagnosis",
                    "value": ""
                },
                {
                    "slug": "prescriptions",
                    "value": ""
                },
                {
                    "slug": "recommended_treatment",
                    "value": ""
                },
                {
                    "slug": "comment",
                    "value": ""
                }
            ]
        }

    + Attributes
        + fields (required, array[MedicineAppointmentFieldEssential]) - список значений полей приема для изменения

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID приема
        + fields (required, array[MedicineAppointmentField]) - Список полей приема

    + Body
        {
            "success": true,
            "data": {
                "id": 21558,
                "fields": [
                    {
                       "slug": "symptoms",
                       "value": "Ночные боли в животе",
                       "title": "Жалобы",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 1
                    },
                    {
                       "slug": "morbi_anamnesis",
                       "value": "ЖКК в 2000 и 2007",
                       "title": "Анамнез morbi",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 2
                    },
                    {
                       "slug": "vitae_anamnesis",
                       "value": "",
                       "title": "Анамнез Vitae",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 3
                    },
                    {
                       "slug": "past_chronic_diseases_operations_injuries",
                       "value": "",
                       "title": "Перенесенные хронические заболевания, операции, травмы",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 4
                    },
                    {
                       "slug": "epidemic_anamnesis",
                       "value": "",
                       "title": "Эпидемический анамнез",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 5
                    },
                    {
                       "slug": "expert_anamnesis",
                       "value": "",
                       "title": "Экспертный анамнез",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 6
                    },
                    {
                       "slug": "allergo_anamnesis",
                       "value": "",
                       "title": "Аллерго анамнез",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 7
                    },
                    {
                       "slug": "general_organ_and_systems_examination",
                       "value": "",
                       "title": "Общий осмотр по органам и системам",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 8
                    },
                    {
                       "slug": "manipulations_performed",
                       "value": "",
                       "title": "Выполненные манипуляции",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 9
                    },
                    {
                       "slug": "preliminary_diagnosis",
                       "value": "",
                       "title": "Предварительный диагноз",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 10
                    },
                    {
                       "slug": "prescriptions",
                       "value": "",
                       "title": "Назначения",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 11
                    },
                    {
                       "slug": "recommended_treatment",
                       "value": "",
                       "title": "Рекомендации по лечению",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 12
                    },
                    {
                       "slug": "comment",
                       "value": "",
                       "title": "Комментарий",
                       "type": "textarea",
                       "is_required": false,
                       "is_editable": true,
                       "sort_number": 13
                    }
                ]
            },
            "meta": []
        }


# Group Комментарии
Комментарии пользователей к компаниии и сотрудникам

## Коллекция комментариев [/comments/{company_id}/{?staff_id,comment_id,start_date,end_date,rating}]

Объект комментарии имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number   | Id комментария   |
|  type  | number  | 1 - комментарий к мастеру, 0 - к салону  |
|  master_id  | number  | ID мастера, если type = 1  |
|  text  | string  | Текст комментария |
|  date  | string  | Дата, когда был оставлен комментарий |
|  rating  | number  | Оценка ( от 1 до 5) |
|  user_id  | number  | Id пользователя, оставившего комментарий |
|  user_name  | string  | Имя пользователя, оставившего комментарий |
|  user_avatar  | string  | Аватар пользователя, оставившего комментарий |


### Получить комментарии [GET]


+ Parameters

    + company_id (required, number) - ID компании
    + start_date (optional, string) - дата в формате iso8601.
        Фильтр по дате с (например '2015-09-30')
    + end_date (optional, string) - дата в формате iso8601.
        Фильтр по дате по (например '2015-09-30')
    + staff_id (optional, number) - ID сотрудника
    + rating (optional, number) - Оценка в рейтинге. Фильтр по отзывам с конкретной оценкой.

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [
                  {
                    "type": "1",
                    "master_id": "8864",
                    "id": "18437",
                    "text": "Отлично!",
                    "date": "2015-08-03 20:31:05",
                    "rating": "4",
                    "user_id": "157169",
                    "user_name": "Виктор Ситников",
                    "user_avatar": "/images/no-master.png"
                  },
                  {
                    "type": "0",
                    "master_id": "0",
                    "id": "20314",
                    "text": "COOL",
                    "date": "2015-07-24 11:00:00",
                    "rating": "5",
                    "user_id": "81846",
                    "user_name": null,
                    "user_avatar": "/images/no-master.png"
                  }
                ],
                "meta": []
            }

### Оставить комментарии [POST /comments/{company_id}/{staff_id}]


+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (optional, number) - ID сотрудника, указывать при создании отзыва к сотруднику

+ Request (application/json)

    + Attributes
        + mark (required, number) - Оценка от 1 до 5
        + text (required, string) - Текст отзыва
        + name (required, string) - Имя пользователя, которое будет отображено на странице с отзывами


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                 "mark" : "4",
                 "text" : "Все очень плохо!",
                 "name" : "Виктор"
            }

+ Response 201 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "type": "1",
                    "master_id": "8864",
                    "id": "18437",
                    "text": "Все очень плохо!",
                    "date": "2016-05-23 20:31:05",
                    "rating": "4",
                    "user_id": "157169",
                    "user_name": "Виктор",
                    "user_avatar": "/images/no-master.png"
                },
                "meta": []
            }


### Редактировать комментарии [PUT]


+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (optional, number) - ID сотрудника, указывать при создании отзыва к сотруднику
    + comment_id (required, number) - ID отзыва/комментария

+ Request (application/json)

    + Attributes
        + mark (required, number) - Оценка от 1 до 5
        + text (required, string) - Текст отзыва
        + name (required, string) - Имя пользователя, которое будет отображено на странице с отзывами


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                 "mark" : "5",
                 "text" : "Все очень не плохо!",
                 "name" : "Виктор"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "type": "1",
                    "master_id": "8864",
                    "id": "18437",
                    "text": "Все очень не плохо!",
                    "date": "2016-05-23 20:31:05",
                    "rating": "5",
                    "user_id": "157169",
                    "user_name": "Виктор",
                    "user_avatar": "/images/no-master.png"
                },
                "meta": []
            }

### Удалить комментарии [DELETE]


+ Parameters

    + company_id (required, number) - ID компании
    + staff_id (optional, number) - ID сотрудника, указывать при создании отзыва к сотруднику
    + comment_id (required, number) - ID отзыва/комментария

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 204 (application/json)




# Group Пользователи компании
Пользователи, имеющие доступ к управлению определенной компанией

## Коллекция пользователей [/company_users/{company_id}]

Объект пользователь компании имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number   | Id пользователя   |
|  firstname  | string  | Имя пользователя  |
|  login  | string  | login пользователя для авторизации в системе (для авторизации так же можно в качестве логина поля phone и email) |
|  email  | string  | Почтовый адрес пользователя |
|  phone  | string  | Телефон пользоватя |
|  access  | object  | Объект прав доступа пользоватей к модулям системы |

Объект access имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
| timetable_access                                                   | boolean |    true - есть доступ к журналу записи, false - нет доступа                                                                                                          |
| master_id                                                          | number  |    0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только того сотрудника, ID которого задан                                   |
| position_id                                                        | number  |    0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только ту должность, ID которого задан                                      |
| last_days_count                                                    | number  |    0 - не ограничить доступ к истории расписаний и записям                                                                                                           |
| schedule_edit_access                                               | boolean |    true - есть доступ к графику работы сотрудника в журнале, false - нет доступа                                                                                     |
| timetable_phones_access                                            | boolean |    true - есть доступ к номеру телефона в журнале записи, false - нет доступа                                                                                        |
| timetable_transferring_record_access                               | boolean |    true - есть доступ к переносу записей, false - нет доступа                                                                                                        |
| timetable_statistics_access                                        | boolean |    true - есть доступ к просмотру статистики, false - нет доступа                                                                                                    |
| record_form_access                                                 | boolean |    true - есть доступ к окну записи, false - нет доступа                                                                                                             |
| record_form_client_access                                          | boolean |    true - есть доступ к данным клиентов, false - нет доступа                                                                                                         |
| records_autocomplete_access                                        | boolean |    true - есть доступ к выпадающему списку с данными о клиентах, false - нет доступа                                                                                 |
| create_records_access                                              | boolean |    true - есть доступ к созданию записей, false - нет доступа              Создавать записи                                                                          |
| edit_records_access                                                | boolean |    true - есть доступ к изменение записей, false - нет доступа                                                                                                       |
| edit_records_attendance_access                                     | boolean |    true - есть доступ к записям со статусом визита "клиент пришел", false - нет доступа                                                                              |
| records_services_cost_access                                       | boolean |    true - есть доступ к изменению стоимости услуг, false - нет доступа                                                                                               |
| records_services_discount_access                                   | boolean |    true - есть доступ к изменению скидки на услуги, false - нет доступа                                                                                              |
| record_edit_full_paid_access                                       | boolean |    true - есть доступ к редактированию оплаченной записи, false - нет доступа                                                                                        |
| delete_records_access                                              | boolean |    true - есть доступ к удалению записи, false - нет доступа                                                                                                         |
| delete_customer_came_records_access                                | boolean |    true - есть доступ к удалению записей со статусом "клиент пришел", false - нет доступа                                                                            |
| delete_paid_records_access                                         | boolean |    true - есть доступ к удалению оплаченных записей, false - нет доступа                                                                                             |
| records_goods_access                                               | boolean |    true - есть доступ к продажам товаров, false - нет доступа                                                                                                        |
| records_goods_create_transaction_access                            | boolean |    true - есть доступ к созданию товарных транзакций, false - нет доступа                                                                                            |
| records_goods_create_last_days_count                               | number  |    -1 - есть доступ к созданию товарных транзакций за все время, >= 0 - доступ к созданию товарных транзакций за указанное количество дней прошлое                   |
| records_goods_edit_transaction_access                              | boolean |    true - есть доступ к редактированию товарных транзакций, false - нет доступа                                                                                      |
| records_goods_edit_last_days_count                                 | number  |    -1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое     |
| records_goods_cost_access                                          | boolean |    true - есть доступ к изменению стоимость товаров, false - нет доступа                                                                                             |
| records_goods_discount_access                                      | boolean |    true - есть доступ к изменению скидки на товары, false - нет доступа                                                                                              |
| records_finances_access                                            | boolean |    true - есть доступ к оплате, false - нет доступа                                                                                                                  |
| records_finances_last_days_count                                   | number  |    -1 - есть доступ к проведению оплаты в записях за все время, >= 0 - доступ к проведению оплаты в записях за указанное количество дней прошлое                     |
| records_finances_pay_from_deposits_access                          | boolean |    true - есть доступ к проведению оплаты в записях с личного счета клиента, false - нет доступа                                                                     |
| records_group_id_access                                            | boolean |    true - есть доступ к данным клиентов по сети, false - нет доступа                                                                                                 |
| records_group_id                                                   | number  |    ID сети к которой есть доступ к данным клиентов                                                                                                                   |
| finances_access                                                    | boolean |    true - есть доступ к финансам, false - нет доступа                                                                                                                |
| finances_accounts_ids                                              | array   |    массив ID к выбранным кассам                                                                                                                                      |
| finances_transactions_access                                       | boolean |    true - есть доступ к просмотру движений средств, false - нет доступа                                                                                              |
| finances_last_days_count                                           | number  |    -1 - есть доступ к просмотру движений средств за все время, >= 0 - доступ к просмотру движений средств за указанное количество дней прошлое                       |
| finances_create_transactions_access                                | boolean |    true - есть доступ к созданию транзакций, false - нет доступа                                                                                                     |
| finances_create_last_days_count                                    | number  |    -1 - есть доступ к созданию транзакций за все время, >= 0 - доступ к созданию транзакций за указанное количество дней прошлое                                     |
| finances_edit_transactions_access                                  | boolean |    true - есть доступ к редактированию транзакций, false - нет доступа                                                                                               |
| finances_edit_last_days_count                                      | number  |    -1 - есть доступ к редактированию транзакций за все время, >= 0 - доступ к редактированию транзакций за указанное количество дней прошлое                         |
| finances_delete_transactions_access                                | boolean |    true - есть доступ к удалению транзакций, false - нет доступа                                                                                                     |
| finances_transactions_excel_access                                 | boolean |    true - есть доступ к выгрузке движений средств в Excel, false - нет доступа                                                                                       |
| finances_expenses_ids                                              | array   |    true - есть доступ к переводам между кассами, false - нет доступа                                                                                                 |
| finances_accounts_access                                           | boolean |    true - есть доступ к счетам и кассам, false - нет доступа                                                                                                         |
| finances_accounts_banalce_access                                   | boolean |    true - есть доступ к балансу, false - нет доступа                                                                                                                 |
| finances_suppliers_read_access                                     | boolean |    true - есть доступ к контрагентам, false - нет доступа                                                                                                            |
| finances_suppliers_create_access                                   | boolean |    true - есть доступ к созданию контрагентов, false - нет доступа                                                                                                   |
| finances_suppliers_update_access                                   | boolean |    true - есть доступ к изменению контрагентов, false - нет доступа                                                                                                  |
| finances_suppliers_delete_access                                   | boolean |    true - есть доступ к удалению контрагентов, false - нет доступа                                                                                                   |
| finances_suppliers_excel_access                                    | boolean |    true - есть доступ к выгрузке в Excel, false - нет доступа                                                                                                        |
| finances_expenses_read_access                                      | boolean |    true - есть доступ к статье платежей, false - нет доступа                                                                                                         |
| expenses_read_access                                               | boolean |    true - есть доступ к статье платежей, false - нет доступа                                                                                                         |
| finances_expenses_create_access                                    | boolean |    true - есть доступ к созданию статьи платежа, false - нет доступа                                                                                                 |
| expenses_create_access                                             | boolean |    true - есть доступ к созданию статьи платежа, false - нет доступа                                                                                                 |
| finances_expenses_update_access                                    | boolean |    true - есть доступ к изменению статьи платежа, false - нет доступа                                                                                                |
| expenses_update_access                                             | boolean |    true - есть доступ к изменению статьи платежа, false - нет доступа                                                                                                |
| finances_expenses_delete_access                                    | boolean |    true - есть доступ к удалению статьи платежа, false - нет доступа                                                                                                 |
| expenses_delete_access                                             | boolean |    true - есть доступ к удалению статьи платежа, false - нет доступа                                                                                                 |
| finances_kkm_transactions_access                                   | boolean |    true - есть доступ к операциям с KKM, false - нет доступа                                                                                                         |
| kkm_transactions_accounts_access                                   | boolean |    true - есть доступ к операциям с KKM, false - нет доступа                                                                                                         |
| finances_kkm_settings_read_access                                  | boolean |    true - есть доступ к настройкам KKM, false - нет доступа                                                                                                          |
| kkm_settings_reed_access                                           | boolean |    true - есть доступ к настройкам KKM, false - нет доступа                                                                                                          |
| finances_kkm_settings_update_access                                | boolean |    true - есть доступ к изменению KKM, false - нет доступа                                                                                                           |
| kkm_settings_update_access                                         | boolean |    true - есть доступ к изменению KKM, false - нет доступа                                                                                                           |
| finances_settings_invoicing_read_access                            | boolean |    true - есть доступ к онлайн-оплатам, false - нет доступа                                                                                                          |
| finances_settings_invoicing_update_access                          | boolean |    true - есть доступ к изменению онлайн-оплат, false - нет доступа                                                                                                  |
| settings_invoicing_update_access                                   | boolean |    true - есть доступ к изменению онлайн-оплат, false - нет доступа                                                                                                  |
| finances_options_read_access                                       | boolean |    true - есть доступ к настройкам оплаты, false - нет доступа                                                                                                       |
| finances_options_update_access                                     | boolean |    true - есть доступ к изменению настроек оплаты, false - нет доступа                                                                                               |
| options_update_access                                              | boolean |    true - есть доступ к изменению настроек оплаты, false - нет доступа                                                                                               |
| finances_salary_schemes_access                                     | boolean |    true - есть доступ к схемам расчета заработной платы, false - нет доступа                                                                                         |
| finances_salary_calc_access                                        | boolean |    true - есть доступ к расчету заработной платы, false - нет доступа                                                                                                |
| finances_salary_not_limitation_today_access                        | boolean |    true - есть доступ к расчету заработной платы, false - доступ к расчету заработной платы за текущий день                                                          |
| finances_payroll_calculation_create_access                         | boolean |    true - есть доступ к начислению заработной платы, false - нет доступа                                                                                             |
| finances_payroll_calculation_create_not_limitation_today_access    | boolean |    true - есть доступ к начислению заработной платы, false - доступ к начислению заработной платы за текущий день                                                    |
| finances_salary_access_master_checkbox                             | boolean |    true - есть доступ к расчету заработной платы только конкретного сотрудника, false - полный доступ                                                                |
| finances_salary_access_master_id                                   | number  |    ID сотрудника к которому есть доступ на расчет заработной платы                                                                                                   |
| get_salary_access_master_id                                        | number  |    ID сотрудника к которому есть доступ на расчет заработной платы                                                                                                   |
| finances_salary_master_not_limitation_today_access                 | boolean |    true - не ограничивать текущим днем, false - доступ только на сегодняшний день                                                                                    |
| finances_payroll_calculation_create_by_master_access               | boolean |    true - есть доступ к начислению заработной платы по конкретному сотруднику, false - без ограничений                                                               |
| calculation_create_by_master_not_limitation_today_access           | boolean |    true - есть доступ к начислению заработной платы, false - нет доступа                                                                                             |
| finances_period_report_access                                      | boolean |    true - есть доступ к отчету за период, false - нет доступа                                                                                                        |
| finances_period_report_excel_access                                | boolean |    true - есть доступ к выгрузке в Excel отчета за период, false - нет доступа                                                                                       |
| finances_year_report_access                                        | boolean |    true - есть доступ к годовому отчету, false - нет доступа                                                                                                         |
| finances_year_report_excel_access                                  | boolean |    true - есть доступ к выгрузке в Excel годового отчета, false - нет доступа                                                                                        |
| finances_print_check_access                                        | boolean |    true - есть доступ к печати чека, false - нет доступа                                                                                                             |
| finances_z_report_access                                           | boolean |    true - есть доступ к отчету по кассе за день, false - нет доступа                                                                                                 |
| finances_z_report_no_limit_today_access                            | boolean |    true - есть доступ к отчету по кассе, false - доступ к отчету по кассе за текущий день                                                                            |
| finances_z_report_excel_access                                     | boolean |    true - есть доступ к выгрузке в Excel, false - нет доступа
| clients_access                                                     | boolean |    true - есть доступ к клиентской базе, false - нет доступа                                                                                                         |
| clients_phones_email_access                                        | boolean |    true - есть доступ к номерам телефонов и email в списке клиентов, false - нет доступа                                                                                     |
| client_phones_access                                               | boolean |    true - есть доступ к номерам телефонов в списке клиентов, false - нет доступа                                                                                     |
| clients_card_phone_access                                          | boolean |    true - есть доступ к телефонам в карточке клиента, false - нет доступа                                                                                            |
| clients_delete_access                                              | boolean |    true - есть доступ к удалению клиентов, false - нет доступа                                                                                                       |
| clients_excel_access                                               | boolean |    true - есть доступ к выгрузке списка клиентов в Excel, false - нет доступа                                                                                       |
| excel_access                                                       | number  |    1 - есть доступ к выгрузке списка клиентов в Excel, 0 - нет доступа                                                                                              |
| client_comments_list_access                                        | boolean |    true - есть доступ к просмотру комментарии, false - нет доступа                                                                                                   |
| client_comments_add_access                                         | boolean |    true - есть доступ к добавлению комментарии, false - нет доступа                                                                                                  |
| client_comments_own_edit_access                                    | boolean |    true - есть доступ к изменению/удалению своих комментарии, false - нет доступа                                                                                    |
| client_comments_other_edit_access                                  | boolean |    true - есть доступ к изменению/удалению чужих комментарии, false - нет доступа                                                                                    |
| client_files_list_access                                           | boolean |    true - есть доступ к просмотрам и скачиванию файлов, false - нет доступа                                                                                           |
| client_files_upload_access                                         | boolean |    true - есть доступ к загрузке файлов, false - нет доступа                                                                                                          |
| client_files_delete_access                                         | boolean |    true - есть доступ к удалению файлов, false - нет доступа                                                                                                         |
| clients_visit_master_id                                            | number  |    ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений                                                                          |
| get_visit_master_id                                                | number  |    ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений                                                                          |
| dashboard_access                                                   | boolean |    true - есть доступ к разделу обзор, false - нет доступа                                                                                                           |
| dash_access                                                        | boolean |    true - есть доступ к разделу сводка, false - нет доступа                                                                                                          |
| dash_phones_access                                                 | boolean |    true - есть доступ к показу номера телефонов в сводке, false - нет доступа                                                                                        |
| dash_records_access                                                | boolean |    true - есть доступ к просмотру списка записей, false - нет доступа                                                                                                |
| dash_records_last_days_count                                       | number  |    -1 - есть доступ к просмотру списка записей за все время, >= 0 - доступ к просмотру списка записей за указанное количество дней прошлое                           |
| dash_records_excel_access                                          | boolean |    true - есть доступ к выгрузке списка записей в Excel, false - нет доступа                                                                                        |
| dash_records_phones_access                                         | boolean |    true - есть доступ к показу номера телефонов в записях, false - нет доступа                                                                                       |
| dash_message_access                                                | boolean |    true - есть доступ к просмотру детализаций сообщений, false - нет доступа                                                                                          |
| dash_message_excel_access                                          | boolean |    true - есть доступ к выгрузке детализаций сообщений в Excel, false - нет доступа                                                                                  |
| dash_message_phones_access                                         | boolean |    true - есть доступ к показу номера телефонов в сообщениях, false - нет доступа                                                                                    |
| dash_reviews_access                                                | boolean |    true - есть доступ к просмотру отзывов, false - нет доступа                                                                                                       |
| dash_reviews_delete_access                                         | boolean |    true - есть доступ к удалению отзывов, false - нет доступа                                                                                                        |
| dashboard_calls_access                                             | boolean |    true - есть доступ к разделу звонки, false - нет доступа                                                                                                          |
| dashboard_calls_excel_access                                       | boolean |    true - есть доступ к выгрузке звонков Excel, false - нет доступа                                                                                                  |
| dashboard_calls_phones_access                                      | boolean |    true - есть доступ к просмотру номера телефона у клиентов, false - нет доступа                                                                                    |
| notification                                                       | boolean |    true - есть доступ к Уведомления, false - нет доступа                                                                                                                |
| web_push                                                           | boolean |    true - есть доступ к показу Push уведомлений о записях в Web-версии, false - нет доступа                                                                             |
| web_phone_push                                                     | boolean |    true - есть доступ к показу Push уведомлений о звонках в Web-версии, false - нет доступа                                                                             |
| notification_sms_ending_license                                    | boolean |    true - есть доступ к отправки SMS уведомлений о скором окончании лицензии, false - нет доступа                                                                       |
| notification_sms_low_balance                                       | boolean |    true - есть доступ к отправки SMS уведомлений о низком балансе, false - нет доступа                                                                                  |
| notification_email_ending_license                                  | boolean |    true - есть доступ к отправки Email уведомлений о скором окончании лицензии, false - нет доступа                                                                     |
| loyalty_access                                                     | boolean |    true - есть доступ к лояльности, false - нет доступа                                                                                                                 |
| has_loyalty_access                                                 | boolean |    true - есть доступ к лояльности, false - нет доступа                                                                                                                 |
| loyalty_cards_manual_transactions_access                           | boolean |    true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа                                                                            |
| has_loyalty_cards_manual_transactions_access                       | boolean |    true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа                                                                            |
| loyalty_certificate_and_abonement_manual_transactions_access       | boolean |    true - есть доступ к оплате сертификатом и абонементом без кода, false - нет доступа                                                                                 |
| storages_access                                                    | boolean |    true - есть доступ к складу, false - нет доступа                                                                                                                     |
| storages_ids                                                       | boolean |    true - есть доступ к выбранным складам, false - нет доступа                                                                                                          |
| storages_transactions_access                                       | boolean |    true - есть доступ к просмотру движений товаров, false - нет доступа                                                                                                 |
| storages_last_days_count                                           | number  |    -1 - есть доступ к просмотру движений товаров за все время, >= 0 - доступ к просмотру движений товаров за указанное количество дней прошлое                          |
| storages_move_goods_access                                         | boolean |    true - есть доступ к перемещение товаров между складами, false - нет доступа                                                                                         |
| storages_create_transactions_access                                | boolean |    true - есть доступ к созданию товарных транзакций, false - нет доступа                                                                                               |
| storages_create_last_days_count                                    | number  |    -1 - есть доступ к создание товарных транзакций за все время, >= 0 - доступ к создание товарных транзакций за указанное количество дней прошлое                      |
| storages_create_transactions_buy_access                            | boolean |    true - есть доступ к оформлению прихода товаров, false - нет доступа                                                                                                 |
| storages_create_transactions_sale_access                           | boolean |    true - есть доступ к оформлению продаж товаров, false - нет доступа                                                                                                  |
| storages_edit_transactions_access                                  | boolean |    true - есть доступ к редактированию товарных транзакций, false - нет доступа                                                                                         |
| storages_edit_last_days_count                                      | number  |    -1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое          |
| storages_edit_transactions_buy_access                              | boolean |    true - есть доступ к оформлению прихода товаров, false - нет доступа                                                                                                 |
| storages_edit_transactions_sale_access                             | boolean |    true - есть доступ к оформлению продаж товаров, false - нет доступа                                                                                                  |
| storages_delete_transactions_access                                | boolean |    true - есть доступ к удалению товарных транзакций, false - нет доступа                                                                                               |
| storages_transactions_excel_access                                 | boolean |    true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа                                                                                          |
| storages_transactions_types                                        | boolean |    true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа                                                                                          |
| storages_inventory_access                                          | boolean |    true - есть доступ к инвентаризации, false - нет доступа                                                                                                             |
| storages_inventory_create_edit_access                              | boolean |    true - есть доступ к созданию и редактированию инвентаризации, false - нет доступа                                                                                   |
| storages_inventory_delete_access                                   | boolean |    true - есть доступ к удалению инвентаризации, false - нет доступа                                                                                                    |
| storages_inventory_excel_access                                    | boolean |    true - есть доступ к выгрузке инвентаризации в Excel, false - нет доступа                                                                                            |
| storages_remnants_report_access                                    | boolean |    true - есть доступ к отчету остатков на складе, false - нет доступа                                                                                                  |
| storages_remnants_report_excel_access                              | boolean |    true - есть доступ к выгрузке остатков в Excel, false - нет доступа                                                                                                  |
| storages_sales_report_access                                       | boolean |    true - есть доступ к отчету по продажам, false - нет доступа                                                                                                         |
| storages_sales_report_excel_access                                 | boolean |    true - есть доступ к выгрузке отчета по продажам в Excel, false - нет доступа                                                                                        |
| storages_consumable_report_access                                  | boolean |    true - есть доступ к отчету по списанию расходников, false - нет доступа                                                                                             |
| storages_consumable_report_excel_access                            | boolean |    true - есть доступ к выгрузке отчета по списанию расходников в Excel, false - нет доступа                                                                            |
| storages_write_off_report_access                                   | boolean |    true - есть доступ к отчету по списанию товаров, false - нет доступа                                                                                                 |
| storages_write_off_report_excel_access                             | boolean |    true - есть доступ к выгрузке отчета по списанию товаров в Excel, false - нет доступа                                                                                |
| storages_turnover_report_access                                    | boolean |    true - есть доступ к отчету по оборачиваемости, false - нет доступа                                                                                                  |
| storages_turnover_report_excel_access                              | boolean |    true - есть доступ к выгрузке отчета по оборачиваемости в Excel, false - нет доступа                                                                                 |
| storages_goods_crud_access                                         | boolean |    true - есть доступ к управлению товарами, false - нет доступа                                                                                                        |
| storages_goods_create_access                                       | boolean |    true - есть доступ к созданию товаров, false - нет доступа                                                                                                           |
| storages_goods_update_access                                       | boolean |    true - есть доступ к изменению товаров, false - нет доступа                                                                                                          |
| storages_goods_title_edit_access                                   | boolean |    true - есть доступ к названию, Артикул, Штрих-код, false - нет доступа                                                                                               |
| storages_goods_category_edit_access                                | boolean |    true - есть доступ к категориям, false - нет доступа                                                                                                                 |
| storages_goods_selling_price_edit_access                           | boolean |    true - есть доступ к ценам продажи, false - нет доступа                                                                                                              |
| storages_goods_cost_price_edit_access                              | boolean |    true - есть доступ к себестоимости, false - нет доступа                                                                                                              |
| storages_goods_units_edit_access                                   | boolean |    true - есть доступ к единицам измерения, false - нет доступа                                                                                                         |
| storages_goods_critical_balance_edit_access                        | boolean |    true - есть доступ к критичным остаткам, Желаемый остаток, false - нет доступа                                                                                      |
| storages_goods_masses_edit_access                                  | boolean |    true - есть доступ к массе, false - нет доступа                                                                                                                      |
| storages_goods_comment_edit_access                                 | boolean |    true - есть доступ к комментариям, false - нет доступа                                                                                                               |
| storages_goods_archive_access                                      | boolean |    true - есть доступ к архивации и восстановлению товаров, false - нет доступа                                                                                         |
| storages_goods_delete_access                                       | boolean |    true - есть доступ к удалению товаров, false - нет доступа                                                                                                           |
| settings_access                                                    | boolean |    true - есть доступ к разделу настройки, false - нет доступа                                                                                                          |
| settings_basis_access                                              | boolean |    true - есть доступ к разделу Основные, false - нет доступа                                                                                                           |
| settings_information_access                                        | boolean |    true - есть доступ к разделу Информация, false - нет доступа                                                                                                         |
| users_access                                                       | boolean |    true - есть доступ к управлению пользователями, false - нет доступа                                                                                                  |
| delete_users_access                                                | boolean |    true - есть доступ к удалению пользователей, false - нет доступа                                                                                                     |
| create_users_access                                                | boolean |    true - есть доступ к добавлению пользователей, false - нет доступа                                                                                                   |
| edit_users_access                                                  | boolean |    true - есть доступ к управлению правами пользователей, false - нет доступа                                                                                           |
| limited_users_access                                               | boolean |    true - есть доступ к управлению правами в рамках своего набора прав, false - нет доступа                                                                             |
| settings_services_access                                           | boolean |    true - есть доступ к разделу Услуги, false - нет доступа                                                                                                             |
| settings_services_create_access                                    | boolean |    true - есть доступ к созданию услуг, false - нет доступа                                                                                                             |
| services_edit                                                      | boolean |    true - есть доступ к редактированию услуг, false - нет доступа                                                                                                       |
| settings_services_edit_title_access                                | boolean |    true - есть доступ к названиям услуг и название для онлайн-записи, false - нет доступа                                                                               |
| settings_services_relation_category_access                         | boolean |    true - есть доступ к категориям услуги, false - нет доступа                                                                                                          |
| settings_services_edit_price_access                                | boolean |    true - есть доступ к ценам услуг, false - нет доступа                                                                                                                |
| settings_services_edit_image_access                                | boolean |    true - есть доступ к загрузкам и изменениям изображений, false - нет доступа                                                                                         |
| settings_services_edit_online_seance_date_time_access              | boolean |    true - есть доступ к отображениям услуг в виджете, false - нет доступа                                                                                               |
| settings_services_edit_online_pay_access                           | boolean |    true - есть доступ к онлайн-оплате услуги, false - нет доступа                                                                                                       |
| settings_services_edit_services_related_resource_access            | boolean |    true - есть доступ к ресурсам услуги, false - нет доступа                                                                                                            |
| settings_positions_read                                            | boolean |    true - есть доступ к разделу должности, false - нет доступа                                                                                                          |
| settings_positions_create                                          | boolean |    true - есть доступ к созданию должностей, false - нет доступа                                                                                                        |
| settings_positions_delete                                          | boolean |    true - есть доступ к удалению должностей, false - нет доступа                                                                                                        |
| edit_master_service_and_duration                                   | boolean |    true - есть доступ к изменению услуги сотрудников и их длительность, false - нет доступа                                                                             |
| tech_card_edit                                                     | boolean |    true - есть доступ к изменению технологической карты, false - нет доступа                                                                                              |
| services_delete                                                    | boolean |    true - есть доступ к удалению услуг, false - нет доступа                                                                                                             |
| settings_master_access                                             | boolean |    true - есть доступ к разделу Сотрудники, false - нет доступа                                                                                                         |
| master_create                                                      | boolean |    true - есть доступ к созданию сотрудников, false - нет доступа                                                                                                       |
| master_edit                                                        | boolean |    true - есть доступ к редактированию сотрудников, false - нет доступа                                                                                                 |
| master_delete                                                      | boolean |    true - есть доступ к удалению сотрудников, false - нет доступа                                                                                                       |
| settings_master_dismiss_access                                     | boolean |    true - есть доступ к увольнению сотрудников, false - нет доступа                                                                                                     |
| schedule_edit                                                      | boolean |    true - есть доступ к редактированию графика работы, false - нет доступа                                                                                              |
| settings_notifications_access                                      | boolean |    true - есть доступ к разделу Sms уведомления, false - нет доступа                                                                                                    |
| settings_email_notifications_access                                | boolean |    true - есть доступ к разделу Email уведомления, false - нет доступа                                                                                                  |
| settings_template_notifications_access                             | boolean |    true - есть доступ к разделу Типы уведомлений, false - нет доступа                                                                                                   |
| webhook_read_access                                                | boolean |    true - есть доступ к изменению настроек WebHook, false - нет доступа                                                                                                 |
| stat_access                                                        | boolean |    true - есть доступ к аналитике, false - нет доступа                                                                                                                  |
| billing_access                                                     | boolean |    true - есть доступ к биллингу (раздел меню баланс), false - нет доступа                                                                                              |
| send_sms                                                           | boolean |    true - есть доступ к SMS рассылки клиентам, false - нет доступа                                                                                                      |
| auth_enable_check_ip                                               | boolean |    true - есть доступ к филиалу только с IP-адресов (v4, v6), false - нет доступа                                                                                       |
| auth_list_allowed_ip                                               | array   |    список IP адресов


### Получить пользователей компании [GET]


+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": 224348,
                    "firstname": "прор",
                    "login": "79284400000",
                    "email": "aser@mail.ru",
                    "phone": "79284400000",
                    "access": {
                      "stat_access": true,
                      "schedule_edit_access": false,
                      "client_phones_access": false,
                      "clients_access": false,
                      "settings_access": false,
                      "edit_records_access": false,
                      "timetable_access": true,
                      "billing_access": false,
                      "users_access": false,
                      "excel_access": false,
                      "finances_access": false,
                      "storages_access": false,
                      "send_sms": true,
                      "master_id": 0
                    }
                  },
                  {
                    "id": 11,
                    "firstname": "Test user",
                    "login": "71112222221",
                    "email": "moresalonov@yandex.ru",
                    "phone": "71112222221",
                    "access": {
                      "stat_access": true,
                      "schedule_edit_access": true,
                      "client_phones_access": true,
                      "clients_access": true,
                      "settings_access": true,
                      "edit_records_access": true,
                      "timetable_access": true,
                      "billing_access": true,
                      "users_access": false,
                      "excel_access": true,
                      "finances_access": true,
                      "storages_access": true,
                      "send_sms": true,
                      "master_id": 0
                    }
                  }
                ],
                "meta": []
            }



# Group Кассы
<a name="accounts"></a>

## Коллекция касс [/accounts/{company_id}]

Объект кассы компании имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number   | Id  кассы  |
|  title  | string  | Название  |
|  type  | number  | 1 - для безналичных платежей, 0 для наличных |
|  comment  | string  | Описание к кассе |


### Получить кассы компании [GET]


+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": 13881,
                    "title": "Основная касса",
                    "type": 0,
                    "comment": "Стоит на ресепшене"
                  },
                  {
                    "id": 13882,
                    "title": "Расчетный счет",
                    "type": 1,
                    "comment": "Для безналичных расчетов"
                  },
                  {
                    "id": 21961,
                    "title": "Авансы",
                    "type": 0,
                    "comment": ""
                  }
                ],
                "meta": []
            }



# Group Склады

## Коллекция склады [/storages/{company_id}]

Объект склада компании имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  |  number   | ID  склада  |
|  title  | string  | Название  |
|  for_services  | number  | 1 - если используется для автоматического списания расходников |
|  for_sale  | number  | 1 - если склад по умолчанию для продажи товаров |
|  comment  | string  | Описание к складу |


### Получить склады компании [GET]


+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": 1,
                    "title": "Расходники",
                    "for_service": 1,
                    "for_sale": 0,
                    "comment": "Для учета расходных материалов"
                  },
                  {
                    "id": 2,
                    "title": "Товары",
                    "for_service": 0,
                    "for_sale": 1,
                    "comment": "Для учета продаж в магазине"
                  },
                  {
                    "id": 23061,
                    "title": "Орс",
                    "for_service": 0,
                    "for_sale": 1,
                    "comment": "Нз"
                  }
                ],
                "meta": []
            }


# Group SMS рассылка

## SMS рассылка по списку клиентов [/sms/clients/by_id/{company_id}]

Объект для создания SMS рассылки имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  client_ids  |  array of number   | Массив ID клиентов  |
|  text  | string  | Текст SMS сообщения  |


### Отправить SMS рассылку по списку клиентов [POST]


+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

              {
                "client_ids": [1, 2, 3, 4, 5],
                "text": "Уважаемые клиенты, поздравляем Вас с тем, что вы наши клиенты! Вам очень повезло!",
              }


+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [],
                "meta": []
            }


## SMS рассылка по клиентам, подходящим под фильтры [/sms/clients/by_filter/{company_id}{?fullname,phone,email,card}]

Объект для создания SMS рассылки имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  text  | string  | Текст SMS сообщения  |

#### Фильтрация клиентов
+ fullname:'Joh' (optional, string) - Имя (часть имени) для фильтрации клиентов
+ phone:'7916' (optional, string) - Телефон (часть номера) для фильтрации клиентов
+ email:'test@' (optional, string) - Email (часть) для фильтрации клиентов
+ card:'5663rt' (optional, string) - Card (часть) для фильтрации клиентов по номеру карты лояльности

Внимание: При отсутствии фильтров SMS рассылка уйдет по всей базе!

### Отправить SMS рассылку по клиентам, подходящим под фильтры [POST]

+ Parameters

    + company_id (required, number) - ID компании
    + fullname:'Joh' (optional, string) - Имя (часть имени) для фильтрации клиентов
    + phone:'7916' (optional, string) - Телефон (часть номера) для фильтрации клиентов
    + email:'test@' (optional, string) - Email (часть) для фильтрации клиентов

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

              {
                "text": "Уважаемые клиенты, поздравляем Вас с тем, что вы наши клиенты! Вам очень повезло!",
              }


+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [],
                "meta": []
            }


# Group Email рассылка

## Устаревшее. Email рассылка по списку клиентов [/email/clients/by_id/{company_id}]

Объект для создания Email рассылки имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  client_ids  |  array of number   | Массив ID клиентов  |
|  text  | string  | Текст Email сообщения  |
|  subject  | string  | Тема Email сообщения  |


### Отправить Email рассылку по списку клиентов [POST]


+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

              {
                "client_ids": [1, 2, 3, 4, 5],
                "subject": "Важно!",
                "text": "Уважаемые клиенты, поздравляем Вас с тем, что вы наши клиенты! Вам очень повезло!",
              }


+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [],
                "meta": []
            }


## Устаревшее. Email рассылка по клиентам, подходящим под фильтры [/email/clients/by_filter/{company_id}{?fullname,phone,email,card}]

Объект для создания Email рассылки имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  text  | string  | Текст Email сообщения  |
|  subject  | string  | Тема Email сообщения  |

#### Фильтрация клиентов
+ fullname:'Joh' (optional, string) - Имя (часть имени) для фильтрации клиентов
+ phone:'7916' (optional, string) - Телефон (часть номера) для фильтрации клиентов
+ email:'test@' (optional, string) - Email (часть) для фильтрации клиентов
+ card:'5663rt' (optional, string) - Card (часть) для фильтрации клиентов по номеру карты лояльности

Внимание: При отсутствии фильтров Email рассылка уйдет по всей базе!

### Отправить Email рассылку по клиентам, подходящим под фильтры [POST]

+ Parameters

    + company_id (required, number) - ID компании
    + fullname:'Joh' (optional, string) - Имя (часть имени) для фильтрации клиентов
    + phone:'7916' (optional, string) - Телефон (часть номера) для фильтрации клиентов
    + email:'test@' (optional, string) - Email (часть) для фильтрации клиентов

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

              {
                "subject": "Важно!",
                "text": "Уважаемые клиенты, поздравляем Вас с тем, что вы наши клиенты! Вам очень повезло!",
              }


+ Response 200 (application/json)


    + Body

            {
                "success": true,
                "data": [],
                "meta": []
            }


# Group ККМ транзакции
<a name="kkm-transactions"></a>

## Получение транзакций, подходящих под фильтры [/kkm_transactions/{salon_id}{?page,editable_length,type,status,start_date,end_date}]
### Получить транзакции [GET]

Фильтры

| Параметр  | Описание |
| ------------- | ------------- |
|  page  | Номер страницы |
|  editable_length  | Количество клиентов на странице |
|  type  | Тип операции |
|  status  | Статус операции |
|  start_date  | Дата начала периода |
|  end_date  | Дата окончания периода |

<a name="kkm-transaction-types"></a>
Типы всех операций c ККМ

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Операция продажи  (активна для документа с типом "Визит") |
|  1  | Операция возврата продажи (активна для документа с типом "Визит") |
|  2  | Операция коррекции |
|  4  | Операция открытия смены |
|  5  | Операция закрытия смены |
|  9  | Операция получения статуса ККМ  |
|  11  | Операция получения статуса команды ККМ |
|  12  | Операция коррекции |
|  13  | Печать X-отчёта |
|  6  | Внесение наличных |
|  7  | Изъятие наличных |

Статусы всех операций с ККМ

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Ошибка соединения с KKM |
|  1  | Успешно |
|  2  | Отправлен на печать |
|  3  | Ошибка выполнения |
|  4  | Ошибка проверки статуса |
|  5  | Ожидание готовности KKM  |

Типы документов

| Значение  | Описание |
| ------------- | ------------- |
|  1  | Продажа товара |
|  2  | Оказание услуг |
|  3  | Приход товара |
|  4  | Списание товара |
|  5  | Движение товара |
|  6  | Инвентаризация  |
|  7  | Визит |
|  8  | Списание расходников |
|  9  | Пополнение депозита |

+ Parameters

    + salon_id (required, number) - ID филиала
    + page:1 (optional, number) - Номер страницы
    + editable_length:25 (optional, number) - Количество клиентов на странице
    + type:20 (optional, number) - Тип операции
    + status:6 (optional, number) - Статус операции
    + start_date:'' (optional, number) -  Дата начала периода
    + end_date:'' (optional, number) - Дата окончания периода

+ Request (application/json)

    + Headers

            Authorization: Bearer access_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 1059,
                        "print_date": "2018-06-26 01:10:19",
                        "printed_count": 1,
                        "sum": 10,
                        "type": {
                            "id": 1,
                            "title": "Операция возврата продажи"
                        },
                        "status": {
                            "id": 3,
                            "title": "Ошибка выполнения"
                        },
                        "document": {
                            "id": 2045,
                            "type": 7,
                            "type_title": "Визит"
                        },
                        "cashier": {
                            "id": 746310,
                            "name": "Андрей Панов"
                        }
                    }
                ],
                "meta": {
                    "count": 1
                }
            }


## Печать чека по документу [/kkm_transactions/{salon_id}/print_document_bill]

### Напечатать чек [POST]

Типы всех операций c ККМ

| Значение  | Описание |
| ------------- | ------------- |
|  0  | Операция продажи  (активна для документов с типами "Визит" и "Пополнение депозита") |
|  1  | Операция возврата продажи (активна для документов с типами "Визит" и "Пополнение депозита") |
|  2  | Операция коррекции |
|  4  | Операция открытия смены |
|  5  | Операция закрытия смены |
|  9  | Операция получения статуса ККМ  |
|  11  | Операция получения статуса команды ККМ |
|  12  | Операция коррекции |
|  13  | Печать X-отчёта |
|  6  | Внесение наличных |
|  7  | Изъятие наличных |

Типы документов

| Значение  | Описание |
| ------------- | ------------- |
|  1  | Продажа товара |
|  2  | Оказание услуг |
|  3  | Приход товара |
|  4  | Списание товара |
|  5  | Движение товара |
|  6  | Инвентаризация  |
|  7  | Визит |
|  8  | Списание расходников |
|  9  | Пополнение депозита |

+ Parameters

    + salon_id (required, number) - ID филиала

+ Attributes

    + document_id (required, number) - ID документа
    + type (required, number) - тип операции с ККМ (см. таблицу типов всех операций)
    + is_pos_enabled (optional, boolean) - задействовать POS-терминал (по умолчанию false)

+ Request (application/json)

    + Headers

             Authorization: Bearer access_token, User user_token

+ Response 200 (application/json)

    + Body

             {
                 "success": true,
                 "data": {
                     "kkm_type": 0,
                     "kkm_transactions": [
                         {
                             "id": 1954,
                             "print_date": "2019-10-21 18:46:56",
                             "printed_count": 0,
                             "sum": 0,
                             "type": {
                                 "id": 0,
                                 "title": "Операция продажи"
                             },
                             "status": {
                                 "id": 2,
                                 "title": "Отправлен на печать"
                             },
                             "document": {
                                 "id": 164,
                                 "type": 9,
                                 "type_title": "Пополнение депозита"
                             },
                             "cashier": {
                                 "id": 1138453,
                                 "name": "Андрей Панов"
                             }
                         },
                     ],
                     "status": 2,
                     "bill_json": [
                         {}
                     ]
                 },
                 "meta": []
             }

# Group Операция продажи

Объект операции продажи имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  state           | [state](#sale-state-type)          | Состояние продажи        |
|  kkm_state       | [kkm_state](#sale-kkm_state-type)  | Состояние ККМ            |
|  payment_methods | [payment_method](#sale-payment_method-type)[] | Доступные методы оплаты  |

<a name="sale-state-type"></a>
Тип **state** имеет следующие поля:

| Поле             | Тип             | Описание                 |
| -----------------| --------------- | ------------------------ |
|  items           | [sale_item](#sale-sale_item-type)[]     | Продаваемая единица      |
|  loyalty_transactions | [loyalty_transaction](#loyalty-transactions)[] | Транзакция оплаты с помощью лояльности |
|  payment_transactions | [payment_transaction](#payments-transactions)[] | Транзакция оплаты в кассу |

<a name="sale-kkm_state-type"></a>
Тип **kkm_state** имеет следующие поля:

| Поле             | Тип             | Описание                 |
| -----------------| --------------- | ------------------------ |
|  last_operation_type | [integer](#kkm-transaction-types) | [Тип последней операции ККМ](#kkm-transaction-types)|
|  transactions | [kkm_transaction](#kkm-transactions)[] | Транзакция ККМ |

<a name="sale-payment_method-type"></a>
Тип **payment_method** имеет следующие поля:

| Поле             | Тип             | Описание                 |
| -----------------| --------------- | ------------------------ |
|  slug    | [slug](#sale-payment_method-slugs)(string) | Тип метода оплаты |
|  is_applicable | boolean | Возможно ли применить данный метод |
|  applicable_amount | float | Возможная сумма, приминимая к оплате  |
|  applicable_count | int | Возможное количество посещений (в случае абонемента) |
|  applicable_value | float | Применимый бонус (в случае программ лояльности) |
|  account_id | integer(optional) | ID кассы (зависит от [slug](#sale-payment_method-slugs)) |
|  deposit_id | integer(optional) | ID депозитного счета (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_card_id | integer(optional) | ID карты лояльности (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_program_id | integer(optional) | ID программы лояльности (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_certificate_id | integer(optional) | ID сертификата (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_abonement_id | integer(optional) | ID абонемента (зависит от [slug](#sale-payment_method-slugs)) |
|  account | [account](#accounts)(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |
|  deposit | object(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_card | object(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_program | object(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_certificate | object(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |
|  loyalty_abonement | object(optional) | Связанная сущность (зависит от [slug](#sale-payment_method-slugs)) |

<a name="sale-payment_method-slugs"></a>
Все типы методов оплаты делятся на две группы:

1 - Оплата в кассу:

| Значение  | Описание |
| ------------- | ------------- |
|  account  | Оплата в кассу |

2 - Оплата лояльностью:

| Значение  | Описание |
| ------------- | ------------- |
|  deposit  | Списание с личного счета |
|  loyalty_program  | Использование программы лояльности |
|  loyalty_card  | Списание с карты лояльности |
|  loyalty_certificate  | Списание с сертификата |
|  loyalty_abonement  | Использование абонемента (применяется только к [визиту](#visits)) |
|  referral_loyalty_program  | Использование реферальной программы (применяется только к [визиту](#visits)) |

<a name="sale-sale_item-type"></a>
Тип **sale_item** имеет следующие поля:

| Поле             | Тип             | Описание                 |
| -----------------| --------------- | ------------------------ |
|  id           | integer | ID продаваемой единицы      |
|  type           | string | Тип ("**service**"/"**good**") |
|  title           | string | Название  |
|  amount           | integer | Количество |
|  default_cost_per_unit | float | Цена за единицу по умолчанию |
|  default_cost_total | float | Общая цена по умолчанию |
|  cost_to_pay_total | float | Цена к оплате |
|  client_discount_percent | float | Процент скидки |

## Работа с операцией продажи [/company/{salon_id}/sale/{document_id}]
### Получение Операции продажи [GET]

+ Parameters
    + salon_id (required, integer) - ID салона
    + document_id: (required, integer) - ID документа продажи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

{
    "success": true,
    "data": {
       "state":{
          "items":[
             {
                "id":2181520,
                "type":"good",
                "title":"товар 12",
                "amount":1,
                "default_cost_per_unit":1300,
                "default_cost_total":1300,
                "client_discount_percent":10,
                "cost_to_pay_total":1170
             },
             {
               "id":22017,
               "type":"service",
               "document_id":8200391,
               "title":"Маникюр",
               "amount":1,
               "default_cost_per_unit":500,
               "default_cost_total":500,
               "client_discount_percent":10,
               "cost_to_pay_total":450
            }
          ],
          "loyalty_transactions":[
          {
             "id":25042,
             "document_id":8201102,
             "sale_item_id":2181521,
             "sale_item_type":"good",
             "amount":9.9,
             "type_id":11,
             "created_at":"2020-04-30 16:52:24",
             "deposit_transaction_id":775,
             "chain":{
                "id":500,
                "title":"Сеть YC BE"
             },
             "type":{
                "id":11,
                "title":"Списание с личного счета"
             },
             "deposit":{
                "id":220,
                "balance":990.1,
                "type":{
                   "id":5,
                   "title":"депозит 1"
                }
             }
          },
          {
             "id":25043,
             "document_id":8201102,
             "sale_item_id":null,
             "sale_item_type":null,
             "amount":0.1,
             "type_id":2,
             "created_at":"2020-04-30 16:55:21",
             "loyalty_card_id":185395,
             "loyalty_program_id":264,
             "chain":{
                "id":231,
                "title":"Yclients."
             },
             "type":{
                "id":2,
                "title":"Начисление по программам лояльности"
             },
             "loyalty_card":{
                "id":185395,
                "type_id":265,
                "number":"0000023100185395",
                "balance":50.15,
                "type":{
                   "id":265,
                   "type":"Тест шаблонов программ лояльности"
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                }
             },
             "loyalty_program":{
                "id":264,
                "title":"CASHBACK BigBro",
                "type_id":7,
                "is_value_percent":true,
                "type":{
                   "id":7,
                   "title":"Накопительный кэшбэк (оплачено)"
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                }
             }
          },
          {
             "id":25050,
             "document_id":8201102,
             "sale_item_id":2181521,
             "sale_item_type":"good",
             "amount":100,
             "type_id":8,
             "created_at":"2020-04-30 18:32:43",
             "loyalty_certificate_id":339,
             "chain":{
                "id":79,
                "title":"Bank 24"
             },
             "type":{
                "id":8,
                "title":"Списание с сертификата"
             },
             "loyalty_certificate":{
                "id":339,
                "balance":0,
                "applicable_balance":0,
                "type":{
                   "id":20,
                   "title":"Тестовый сертификат",
                   "is_code_required":true
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                }
             }
          }
       ],
          "payment_transactions":[
             {
                "id":6033940,
                "document_id":8200904,
                "sale_item_id":2181442,
                "sale_item_type":"good",
                "expense_id":7,
                "account_id":90218,
                "amount":32,
                "created_at":null,
                "account":{
                    "id":90218,
                    "title":"Наличная касса по умолчанию",
                    "is_cash":true,
                    "is_default": true
                },
                "expense":{
                    "id":7,
                    "title":"Продажа товаров"
                }
             },
             {
                "id":6033941,
                "document_id":8200904,
                "sale_item_id":2181442,
                "sale_item_type":"good",
                "expense_id":7,
                "account_id":90218,
                "amount":27,
                "created_at":null,
                "account":{
                   "id":90218,
                   "title":"Наличная касса",
                   "is_cash":true,
                   "is_default": false
                },
                "expense":{
                   "id":7,
                   "title":"Продажа товаров"
                }
             },
             {
                 "id": 6034121,
                 "document_id": 8201102,
                 "sale_item_id": 2181521,
                 "sale_item_type": "good",
                 "expense_id": 7,
                 "account_id": 23182,
                 "amount": 43,
                 "account": {
                     "id": 23182,
                     "title": "Карты - эквайринг по умолчанию",
                     "is_cash": false,
                     "is_default": true
                 },
                 "expense": {
                     "id": 7,
                     "title": "Продажа товаров"
                 }
             },
             {
                 "id": 6034122,
                 "document_id": 8201102,
                 "sale_item_id": 2181521,
                 "sale_item_type": "good",
                 "expense_id": 7,
                 "account_id": 23182,
                 "amount": 12,
                 "account": {
                     "id": 23182,
                     "title": "Карты - эквайринг",
                     "is_cash": false,
                     "is_default": false
                 },
                 "expense": {
                     "id": 7,
                     "title": "Продажа товаров"
                 }
             }
          ]
       },
       "kkm_state":{
          "last_operation_type":1,
          "transactions":[
             {
                "id":2424,
                "document_id":8200904,
                "print_date":"2020-04-22 11:53:12",
                "printed_count":0,
                "sum":0,
                "type":{
                   "id":0,
                   "title":"Операция продажи"
                },
                "status":{
                   "id":1,
                   "title":"Успешно"
                },
                "document":{
                   "id":7215,
                   "type":1,
                   "type_title":"Продажа товара"
                },
                "cashier":{
                   "id":746310,
                   "name":"Андрей Панов"
                }
             }
          ]
       },
       "payment_methods":[
          {
             "slug":"account",
             "is_applicable":false,
             "applicable_amount":1170,
             "applicable_count":0,
             "applicable_value":0,
             "account_id":36785,
             "account":{
                "id":36785,
                "title":"Касса - безналичные",
                "is_cash":false
             }
          },
          {
             "slug":"loyalty_card",
             "is_applicable":true,
             "applicable_amount":51.65,
             "applicable_count":0,
             "applicable_value":0,
             "loyalty_card_id":19283,
             "loyalty_card":{
                "id":19283,
                "type_id":155,
                "number":"0000031200019283",
                "balance":51.65,
                "type":{
                   "id":155,
                   "type":"скидочная карта"
                },
                "chain":{
                   "id":312,
                   "title":"Trinity group"
                }
             }
          },
          {
             "slug":"loyalty_program",
             "is_applicable":true,
             "applicable_amount":234,
             "applicable_count":0,
             "applicable_value":20,
             "loyalty_card_id":19283,
             "loyalty_program_id":183,
             "loyalty_card":{
                "id":19283,
                "type_id":155,
                "number":"0000031200019283",
                "balance":51.65,
                "type":{
                   "id":155,
                   "type":"скидочная карта"
                },
                "chain":{
                   "id":312,
                   "title":"Trinity group"
                }
             },
             "loyalty_program":{
                "id":183,
                "title":"скидка постоянная",
                "type_id":1,
                "is_value_percent":true,
                "type":{
                   "id":1,
                   "title":"Фиксированная скидка"
                },
                "chain":{
                   "id":312,
                   "title":"Trinity group"
                }
             }
          },
          {
             "slug":"loyalty_abonement",
             "is_applicable":false,
             "applicable_amount":0,
             "applicable_count":0,
             "applicable_value":0,
             "loyalty_abonement_id":27,
             "loyalty_abonement":{
                "id":27,
                "is_united_balance":false,
                "united_balance":0,
                "type":{
                   "id":7,
                   "title":"абонемент на 5000 QA net",
                   "is_code_required":true
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                },
                "balance_container":{
                   "links":[
                      {
                         "count":5,
                         "category":{
                            "id":229680,
                            "category_id":1,
                            "title":"Маникюр"
                         }
                      },
                      {
                         "count":5,
                         "category":{
                            "id":429813,
                            "category_id":429812,
                            "title":"1 Занятие"
                         }
                      }
                   ]
                }
             }
          },
          {
             "slug":"loyalty_certificate",
             "is_applicable":true,
             "applicable_amount":1170,
             "applicable_count":0,
             "applicable_value":0,
             "loyalty_certificate_id":338,
             "loyalty_certificate":{
                "id":338,
                "balance":10000,
                "applicable_balance":10000,
                "type":{
                   "id":130,
                   "title":"test",
                   "is_code_required":true
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                }
             }
          },
          {
             "slug":"referral_loyalty_program",
             "is_applicable":false,
             "applicable_amount":0,
             "applicable_count":0,
             "applicable_value":0,
             "loyalty_program_id":424,
             "loyalty_program":{
                "id":424,
                "title":"Фиксированная скидка",
                "type_id":1,
                "is_value_percent":true,
                "type":{
                   "id":1,
                   "title":"Фиксированная скидка"
                },
                "chain":{
                   "id":231,
                   "title":"Yclients."
                }
             }
          },
          {
             "slug":"deposit",
             "is_applicable":true,
             "applicable_amount":9.9,
             "applicable_count":0,
             "applicable_value":0,
             "deposit_id":220,
             "deposit":{
                "id":220,
                "balance":1000,
                "type":{
                   "id":5,
                   "title":"депозит 1"
                }
             }
          }
       ]
    },
    "meta": []
}

## Процесс оплаты [/company/{salon_id}/sale/{document_id}/payment]
Оплата может быть произведена следующими способами:

1. Оплата в кассу
2. Оплата лояльностью

Способ определяется передаваемым в запросе параметром - "**slug**" (string), который определяет [метод оплаты](#sale-payment_method-slugs).
В запросе также необходимо указать ID связанной с методом оплаты сущности.
В случае оплаты сертификатом и абонементом, если у пользователя нет права "*Оплата сертификатом и абонементом без кода*" в теле запроса
также необходимо передать пераметр "**number**" (string), содержащий код сертификата/абонемента.

### Оплата в кассу [POST]

В качестве ответа возвращается информация об [Операции продажи](#sale-operation)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "account",
                    account_id: 90218
                },
                amount: 123
            }
        }


+ Response 200 (application/json)

    + Body

        {
            "success": true,
            "data": {
                "state":{
                  "items":[
                     {
                        "id":2181520,
                        "type":"good",
                        "title":"товар 12",
                        "amount":1,
                        "default_cost_per_unit":1300,
                        "default_cost_total":1300,
                        "client_discount_percent":10,
                        "cost_to_pay_total":1170
                     },
                     {
                       "id":22017,
                       "type":"service",
                       "document_id":8200391,
                       "title":"Маникюр",
                       "amount":1,
                       "default_cost_per_unit":500,
                       "default_cost_total":500,
                       "client_discount_percent":10,
                       "cost_to_pay_total":450
                    }
                  ],
                  "loyalty_transactions":[
                  {
                     "id":25042,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":9.9,
                     "type_id":11,
                     "created_at":"2020-04-30 16:52:24",
                     "deposit_transaction_id":775,
                     "chain":{
                        "id":500,
                        "title":"Сеть YC BE"
                     },
                     "type":{
                        "id":11,
                        "title":"Списание с личного счета"
                     },
                     "deposit":{
                        "id":220,
                        "balance":990.1,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  },
                  {
                     "id":25043,
                     "document_id":8201102,
                     "sale_item_id":null,
                     "sale_item_type":null,
                     "amount":0.1,
                     "type_id":2,
                     "created_at":"2020-04-30 16:55:21",
                     "loyalty_card_id":185395,
                     "loyalty_program_id":264,
                     "chain":{
                        "id":231,
                        "title":"Yclients."
                     },
                     "type":{
                        "id":2,
                        "title":"Начисление по программам лояльности"
                     },
                     "loyalty_card":{
                        "id":185395,
                        "type_id":265,
                        "number":"0000023100185395",
                        "balance":50.15,
                        "type":{
                           "id":265,
                           "type":"Тест шаблонов программ лояльности"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     },
                     "loyalty_program":{
                        "id":264,
                        "title":"CASHBACK BigBro",
                        "type_id":7,
                        "is_value_percent":true,
                        "type":{
                           "id":7,
                           "title":"Накопительный кэшбэк (оплачено)"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "id":25050,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":100,
                     "type_id":8,
                     "created_at":"2020-04-30 18:32:43",
                     "loyalty_certificate_id":339,
                     "chain":{
                        "id":79,
                        "title":"Bank 24"
                     },
                     "type":{
                        "id":8,
                        "title":"Списание с сертификата"
                     },
                     "loyalty_certificate":{
                        "id":339,
                        "balance":0,
                        "applicable_balance":0,
                        "type":{
                           "id":20,
                           "title":"Тестовый сертификат",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  }
               ],
                  "payment_transactions":[
                     {
                        "id":6033940,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":32,
                        "created_at":null,
                        "account":{
                            "id":90218,
                            "title":"Наличная касса по умолчанию",
                            "is_cash":true,
                            "is_default": true
                        },
                        "expense":{
                            "id":7,
                            "title":"Продажа товаров"
                        }
                     },
                     {
                        "id":6033941,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":27,
                        "created_at":null,
                        "account":{
                           "id":90218,
                           "title":"Наличная касса",
                           "is_cash":true,
                           "is_default": false
                        },
                        "expense":{
                           "id":7,
                           "title":"Продажа товаров"
                        }
                     },
                     {
                         "id": 6034121,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 43,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг по умолчанию",
                             "is_cash": false,
                             "is_default": true
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     },
                     {
                         "id": 6034122,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 12,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг",
                             "is_cash": false,
                             "is_default": false
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     }
                  ]
               },
               "kkm_state":{
                  "last_operation_type":1,
                  "transactions":[
                     {
                        "id":2424,
                        "document_id":8200904,
                        "print_date":"2020-04-22 11:53:12",
                        "printed_count":0,
                        "sum":0,
                        "type":{
                           "id":0,
                           "title":"Операция продажи"
                        },
                        "status":{
                           "id":1,
                           "title":"Успешно"
                        },
                        "document":{
                           "id":7215,
                           "type":1,
                           "type_title":"Продажа товара"
                        },
                        "cashier":{
                           "id":746310,
                           "name":"Андрей Панов"
                        }
                     }
                  ]
               },
               "payment_methods":[
                  {
                     "slug":"account",
                     "is_applicable":false,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "account_id":36785,
                     "account":{
                        "id":36785,
                        "title":"Касса - безналичные",
                        "is_cash":false
                     }
                  },
                  {
                     "slug":"loyalty_card",
                     "is_applicable":true,
                     "applicable_amount":51.65,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_card_id":19283,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_program",
                     "is_applicable":true,
                     "applicable_amount":234,
                     "applicable_count":0,
                     "applicable_value":20,
                     "loyalty_card_id":19283,
                     "loyalty_program_id":183,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     },
                     "loyalty_program":{
                        "id":183,
                        "title":"скидка постоянная",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_abonement",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_abonement_id":27,
                     "loyalty_abonement":{
                        "id":27,
                        "is_united_balance":false,
                        "united_balance":0,
                        "type":{
                           "id":7,
                           "title":"абонемент на 5000 QA net",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        },
                        "balance_container":{
                           "links":[
                              {
                                 "count":5,
                                 "category":{
                                    "id":229680,
                                    "category_id":1,
                                    "title":"Маникюр"
                                 }
                              },
                              {
                                 "count":5,
                                 "category":{
                                    "id":429813,
                                    "category_id":429812,
                                    "title":"1 Занятие"
                                 }
                              }
                           ]
                        }
                     }
                  },
                  {
                     "slug":"loyalty_certificate",
                     "is_applicable":true,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_certificate_id":338,
                     "loyalty_certificate":{
                        "id":338,
                        "balance":10000,
                        "applicable_balance":10000,
                        "type":{
                           "id":130,
                           "title":"test",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"referral_loyalty_program",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_program_id":424,
                     "loyalty_program":{
                        "id":424,
                        "title":"Фиксированная скидка",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"deposit",
                     "is_applicable":true,
                     "applicable_amount":9.9,
                     "applicable_count":0,
                     "applicable_value":0,
                     "deposit_id":220,
                     "deposit":{
                        "id":220,
                        "balance":1000,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  }
               ]
            },
            "meta": []
        }

### Оплата лояльностью (различными методами) [POST]

В качестве ответа возвращается информация об [Операции продажи](#sale-operation)

+ Request Оплата при помощи личного счета - депозита (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "deposit",
                    deposit_id: 220
                },
                amount: 123
            }
        }

+ Request Оплата при помощи сертификата (application/json)
 В случае оплаты сертификатом, если у пользователя нет права "*Оплата сертификатом и абонементом без кода*" в теле запроса
 также необходимо передать пераметр "**number**" (string), содержащий код сертификата.

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "loyalty_certificate",
                    loyalty_certificate_id: 325
                },
                amount: 123,
                number: "123123"
            }
        }


+ Request Оплата при помощи абонемента - работает только для визита. (application/json)
 В случае оплаты абонементом, если у пользователя нет права "*Оплата сертификатом и абонементом без кода*" в теле запроса
 также необходимо передать пераметр "**number**" (string), содержащий код абонемента.

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "loyalty_abonement",
                    loyalty_abonement_id: 275
                },
                number: "123123"
            }
        }

+ Request Оплата при помощи реферальной программы - работает только для визита (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "referral_loyalty_program",
                    loyalty_program_id: 717
                },
                referrer_phone: "71000004260"
            }
        }

+ Request Оплата при помощи карты лояльности (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "loyalty_card",
                    loyalty_card_id: 185395
                },
                amount: 123
            }
        }

+ Request Оплата при помощи программы лояльности (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

        {
            payment: {
                method: {
                    slug: "loyalty_program",
                    loyalty_program_id: 339,
                    loyalty_card_id: 185395
                }
            }
        }

+ Response 200 (application/json)

    + Body

        {
            "success": true,
            "data": {
               "state":{
                  "items":[
                     {
                        "id":2181520,
                        "type":"good",
                        "title":"товар 12",
                        "amount":1,
                        "default_cost_per_unit":1300,
                        "default_cost_total":1300,
                        "client_discount_percent":10,
                        "cost_to_pay_total":1170
                     },
                     {
                       "id":22017,
                       "type":"service",
                       "document_id":8200391,
                       "title":"Маникюр",
                       "amount":1,
                       "default_cost_per_unit":500,
                       "default_cost_total":500,
                       "client_discount_percent":10,
                       "cost_to_pay_total":450
                    }
                  ],
                  "loyalty_transactions":[
                  {
                     "id":25042,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":9.9,
                     "type_id":11,
                     "created_at":"2020-04-30 16:52:24",
                     "deposit_transaction_id":775,
                     "chain":{
                        "id":500,
                        "title":"Сеть YC BE"
                     },
                     "type":{
                        "id":11,
                        "title":"Списание с личного счета"
                     },
                     "deposit":{
                        "id":220,
                        "balance":990.1,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  },
                  {
                     "id":25043,
                     "document_id":8201102,
                     "sale_item_id":null,
                     "sale_item_type":null,
                     "amount":0.1,
                     "type_id":2,
                     "created_at":"2020-04-30 16:55:21",
                     "loyalty_card_id":185395,
                     "loyalty_program_id":264,
                     "chain":{
                        "id":231,
                        "title":"Yclients."
                     },
                     "type":{
                        "id":2,
                        "title":"Начисление по программам лояльности"
                     },
                     "loyalty_card":{
                        "id":185395,
                        "type_id":265,
                        "number":"0000023100185395",
                        "balance":50.15,
                        "type":{
                           "id":265,
                           "type":"Тест шаблонов программ лояльности"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     },
                     "loyalty_program":{
                        "id":264,
                        "title":"CASHBACK BigBro",
                        "type_id":7,
                        "is_value_percent":true,
                        "type":{
                           "id":7,
                           "title":"Накопительный кэшбэк (оплачено)"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "id":25050,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":100,
                     "type_id":8,
                     "created_at":"2020-04-30 18:32:43",
                     "loyalty_certificate_id":339,
                     "chain":{
                        "id":79,
                        "title":"Bank 24"
                     },
                     "type":{
                        "id":8,
                        "title":"Списание с сертификата"
                     },
                     "loyalty_certificate":{
                        "id":339,
                        "balance":0,
                        "applicable_balance":0,
                        "type":{
                           "id":20,
                           "title":"Тестовый сертификат",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  }
               ],
                  "payment_transactions":[
                     {
                        "id":6033940,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":32,
                        "created_at":null,
                        "account":{
                            "id":90218,
                            "title":"Наличная касса по умолчанию",
                            "is_cash":true,
                            "is_default": true
                        },
                        "expense":{
                            "id":7,
                            "title":"Продажа товаров"
                        }
                     },
                     {
                        "id":6033941,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":27,
                        "created_at":null,
                        "account":{
                           "id":90218,
                           "title":"Наличная касса",
                           "is_cash":true,
                           "is_default": false
                        },
                        "expense":{
                           "id":7,
                           "title":"Продажа товаров"
                        }
                     },
                     {
                         "id": 6034121,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 43,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг по умолчанию",
                             "is_cash": false,
                             "is_default": true
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     },
                     {
                         "id": 6034122,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 12,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг",
                             "is_cash": false,
                             "is_default": false
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     }
                  ]
               },
               "kkm_state":{
                  "last_operation_type":1,
                  "transactions":[
                     {
                        "id":2424,
                        "document_id":8200904,
                        "print_date":"2020-04-22 11:53:12",
                        "printed_count":0,
                        "sum":0,
                        "type":{
                           "id":0,
                           "title":"Операция продажи"
                        },
                        "status":{
                           "id":1,
                           "title":"Успешно"
                        },
                        "document":{
                           "id":7215,
                           "type":1,
                           "type_title":"Продажа товара"
                        },
                        "cashier":{
                           "id":746310,
                           "name":"Андрей Панов"
                        }
                     }
                  ]
               },
               "payment_methods":[
                  {
                     "slug":"account",
                     "is_applicable":false,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "account_id":36785,
                     "account":{
                        "id":36785,
                        "title":"Касса - безналичные",
                        "is_cash":false
                     }
                  },
                  {
                     "slug":"loyalty_card",
                     "is_applicable":true,
                     "applicable_amount":51.65,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_card_id":19283,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_program",
                     "is_applicable":true,
                     "applicable_amount":234,
                     "applicable_count":0,
                     "applicable_value":20,
                     "loyalty_card_id":19283,
                     "loyalty_program_id":183,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     },
                     "loyalty_program":{
                        "id":183,
                        "title":"скидка постоянная",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_abonement",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_abonement_id":27,
                     "loyalty_abonement":{
                        "id":27,
                        "is_united_balance":false,
                        "united_balance":0,
                        "type":{
                           "id":7,
                           "title":"абонемент на 5000 QA net",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        },
                        "balance_container":{
                           "links":[
                              {
                                 "count":5,
                                 "category":{
                                    "id":229680,
                                    "category_id":1,
                                    "title":"Маникюр"
                                 }
                              },
                              {
                                 "count":5,
                                 "category":{
                                    "id":429813,
                                    "category_id":429812,
                                    "title":"1 Занятие"
                                 }
                              }
                           ]
                        }
                     }
                  },
                  {
                     "slug":"loyalty_certificate",
                     "is_applicable":true,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_certificate_id":338,
                     "loyalty_certificate":{
                        "id":338,
                        "balance":10000,
                        "applicable_balance":10000,
                        "type":{
                           "id":130,
                           "title":"test",
                           "is_code_required":true
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"referral_loyalty_program",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_program_id":424,
                     "loyalty_program":{
                        "id":424,
                        "title":"Фиксированная скидка",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"deposit",
                     "is_applicable":true,
                     "applicable_amount":9.9,
                     "applicable_count":0,
                     "applicable_value":0,
                     "deposit_id":220,
                     "deposit":{
                        "id":220,
                        "balance":1000,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  }
               ]
            },
            "meta": []
        }

## Транзакциии оплаты в кассу [/company/{salon_id}/sale/{document_id}/payment/payment_transaction/{payment_transaction_id}]
<a name="payments-transactions"></a>

Объект Транзакции оплаты в кассу имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  id           | integer             | ID Транзакции оплаты |
|  document_id  | integer        | ID документа            |
|  sale_item_id | integer | ID [проданной единицы](#sale-sale_item-type) |
|  sale_item_type | string | Тип проданной единицы  |
|  expense_id | integer | ID cтатьи платежа |
|  account_id | integer | ID кассы |
|  amount | float | Сумма транзакции |
|  created_at | string |  Дата создания |
|  account | [account](#accounts) |  Касса |
|  account.id | integer |  ID кассы |
|  account.title | string |  Название кассы |
|  account.is_cash | boolean |  Является ли наличной |
|  account.is_default | boolean |  Является ли кассой по умолчанию |
|  expense | [expense](#payment-transactions-expenses-types) |  Cтатья платежа |
|  expense.id | integer |  ID статьи платежа |
|  expense.title | string | Название статьи платежа |


<a name="payment-transactions-expenses-types"></a>
Типы статей платежа

| Значение  | Описание |
| ------------- | ------------- |
|  1  | Закупка материалов. Используется при оплате расходных материалов |
|  2  | Закупка товаров. Используется при оплате товаров для продажи |
|  3  | Зарплата персонала. Используется при выплате зарплаты персоналу |
|  4  | Налоги и сборы. Используется при оплате налогов и сборов |
|  5  | Оказание услуг. Используется при приеме оплаты услуг у клиентов |
|  6  | Продажа абонементов. Используется при продаже абонементов |
|  7  | Продажа товаров. Используется при продаже товаров клиентам |
|  8  | Прочие доходы. Используется для приема прочих оплат |
|  9  | Прочие расходы. Используется для прочих выплат |
|  10 | Пополнение счета. Используется при внесении клиентом средств на личный счет |
|  11 | Комиссия за эквайринг |

### Удаление транзакции оплаты в кассу [DELETE]

В качестве ответа возвращается информация об [Операции продажи](#sale-operation)

+ Parameters
    + salon_id (required, integer) - ID салона
    + document_id: (required, integer) - ID документа продажи
    + payment_transaction_id: (required, integer) - ID транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

        {
            "success": true,
            "data": {
               "state":{
                  "items":[
                     {
                        "id":2181520,
                        "type":"good",
                        "title":"товар 12",
                        "amount":1,
                        "default_cost_per_unit":1300,
                        "default_cost_total":1300,
                        "client_discount_percent":10,
                        "cost_to_pay_total":1170
                     },
                     {
                       "id":22017,
                       "type":"service",
                       "document_id":8200391,
                       "title":"Маникюр",
                       "amount":1,
                       "default_cost_per_unit":500,
                       "default_cost_total":500,
                       "client_discount_percent":10,
                       "cost_to_pay_total":450
                    }
                  ],
                  "loyalty_transactions":[
                  {
                     "id":25042,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":9.9,
                     "type_id":11,
                     "created_at":"2020-04-30 16:52:24",
                     "deposit_transaction_id":775,
                     "chain":{
                        "id":500,
                        "title":"Сеть YC BE"
                     },
                     "type":{
                        "id":11,
                        "title":"Списание с личного счета"
                     },
                     "deposit":{
                        "id":220,
                        "balance":990.1,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  },
                  {
                     "id":25043,
                     "document_id":8201102,
                     "sale_item_id":null,
                     "sale_item_type":null,
                     "amount":0.1,
                     "type_id":2,
                     "created_at":"2020-04-30 16:55:21",
                     "loyalty_card_id":185395,
                     "loyalty_program_id":264,
                     "chain":{
                        "id":231,
                        "title":"Yclients."
                     },
                     "type":{
                        "id":2,
                        "title":"Начисление по программам лояльности"
                     },
                     "loyalty_card":{
                        "id":185395,
                        "type_id":265,
                        "number":"0000023100185395",
                        "balance":50.15,
                        "type":{
                           "id":265,
                           "type":"Тест шаблонов программ лояльности"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     },
                     "loyalty_program":{
                        "id":264,
                        "title":"CASHBACK BigBro",
                        "type_id":7,
                        "is_value_percent":true,
                        "type":{
                           "id":7,
                           "title":"Накопительный кэшбэк (оплачено)"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "id":25050,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":100,
                     "type_id":8,
                     "created_at":"2020-04-30 18:32:43",
                     "loyalty_certificate_id":339,
                     "chain":{
                        "id":79,
                        "title":"Bank 24"
                     },
                     "type":{
                        "id":8,
                        "title":"Списание с сертификата"
                     },
                     "loyalty_certificate":{
                        "id":339,
                        "balance":0,
                        "applicable_balance":0,
                        "type":{
                           "id":20,
                           "title":"Тестовый сертификат",
                           "is_code_required":true
                        }
                     }
                  }
               ],
                  "payment_transactions":[
                     {
                        "id":6033940,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":32,
                        "created_at":null,
                        "account":{
                            "id":90218,
                            "title":"Наличная касса по умолчанию",
                            "is_cash":true,
                            "is_default": true
                        },
                        "expense":{
                            "id":7,
                            "title":"Продажа товаров"
                        }
                     },
                     {
                        "id":6033941,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":27,
                        "created_at":null,
                        "account":{
                           "id":90218,
                           "title":"Наличная касса",
                           "is_cash":true,
                           "is_default": false
                        },
                        "expense":{
                           "id":7,
                           "title":"Продажа товаров"
                        }
                     },
                     {
                         "id": 6034121,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 43,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг по умолчанию",
                             "is_cash": false,
                             "is_default": true
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     },
                     {
                         "id": 6034122,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 12,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг",
                             "is_cash": false,
                             "is_default": false
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     }
                  ]
               },
               "kkm_state":{
                  "last_operation_type":1,
                  "transactions":[
                     {
                        "id":2424,
                        "document_id":8200904,
                        "print_date":"2020-04-22 11:53:12",
                        "printed_count":0,
                        "sum":0,
                        "type":{
                           "id":0,
                           "title":"Операция продажи"
                        },
                        "status":{
                           "id":1,
                           "title":"Успешно"
                        },
                        "document":{
                           "id":7215,
                           "type":1,
                           "type_title":"Продажа товара"
                        },
                        "cashier":{
                           "id":746310,
                           "name":"Андрей Панов"
                        }
                     }
                  ]
               },
               "payment_methods":[
                  {
                     "slug":"account",
                     "is_applicable":false,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "account_id":36785,
                     "account":{
                        "id":36785,
                        "title":"Касса - безналичные",
                        "is_cash":false
                     }
                  },
                  {
                     "slug":"loyalty_card",
                     "is_applicable":true,
                     "applicable_amount":51.65,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_card_id":19283,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_program",
                     "is_applicable":true,
                     "applicable_amount":234,
                     "applicable_count":0,
                     "applicable_value":20,
                     "loyalty_card_id":19283,
                     "loyalty_program_id":183,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     },
                     "loyalty_program":{
                        "id":183,
                        "title":"скидка постоянная",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_abonement",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_abonement_id":27,
                     "loyalty_abonement":{
                        "id":27,
                        "is_united_balance":false,
                        "united_balance":0,
                        "type":{
                           "id":7,
                           "title":"абонемент на 5000 QA net",
                           "is_code_required":true
                        },
                        "balance_container":{
                           "links":[
                              {
                                 "count":5,
                                 "category":{
                                    "id":229680,
                                    "category_id":1,
                                    "title":"Маникюр"
                                 }
                              },
                              {
                                 "count":5,
                                 "category":{
                                    "id":429813,
                                    "category_id":429812,
                                    "title":"1 Занятие"
                                 }
                              }
                           ]
                        }
                     }
                  },
                  {
                     "slug":"loyalty_certificate",
                     "is_applicable":true,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_certificate_id":338,
                     "loyalty_certificate":{
                        "id":338,
                        "balance":10000,
                        "applicable_balance":10000,
                        "type":{
                           "id":130,
                           "title":"test",
                           "is_code_required":true
                        }
                     }
                  },
                  {
                     "slug":"referral_loyalty_program",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_program_id":424,
                     "loyalty_program":{
                        "id":424,
                        "title":"Фиксированная скидка",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"deposit",
                     "is_applicable":true,
                     "applicable_amount":9.9,
                     "applicable_count":0,
                     "applicable_value":0,
                     "deposit_id":220,
                     "deposit":{
                        "id":220,
                        "balance":1000,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  }
               ]
            },
            "meta": []
        }

## Транзакции оплаты лояльностью [/company/{salon_id}/sale/{document_id}/payment/loyalty_transaction/{payment_transaction_id}]
<a name="loyalty-transactions"></a>

Объект Транзакции оплаты лояльностью имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  id           | integer             | ID Транзакции лояльности |
|  document_id  | integer        | ID документа            |
|  sale_item_id | integer | ID проданной единицы |
|  sale_item_type | string | Тип проданной единицы  |
|  amount | float | Сумма транзакции |
|  type_id | integer | ID типа транзакции |
|  created_at | string |  Дата создания |
|  chain | object |   |
|  chain.id | integer | ID сети салонов |
|  chain.title | string | Название сети салонов |
|  type | object | [Тип транзакции](#sale-payment_method-slugs) |
|  type.id | integer | ID типа транзакции |
|  type.title | string | Название типа транзакции |
|  deposit | object(optional) | Связанная сущность (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_card | object(optional) | Связанная сущность (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_program | object(optional) | Связанная сущность (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_certificate | object(optional) | Связанная сущность (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_abonement | object(optional) | Связанная сущность (зависит от [типа](#sale-payment_method-slugs)) |
|  deposit_transaction_id | integer(optional) | ID транзакции (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_card_id | integer(optional) | ID карты лояльности (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_program_id | integer(optional) | ID программы лояльности (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_certificate_id | integer(optional) | ID сертификата (зависит от [типа](#sale-payment_method-slugs)) |
|  loyalty_abonement_id | integer(optional) | ID абонемента (зависит от [типа](#sale-payment_method-slugs)) |

### Удаление транзакции оплаты лояльностью [DELETE]

В качестве ответа возвращается информация об [Операции продажи](#sale-operation)

+ Parameters
    + salon_id (required, integer) - ID салона
    + document_id: (required, integer) - ID документа продажи
    + payment_transaction_id: (required, integer) - ID транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

        {
            "success": true,
            "data": {
               "state":{
                  "items":[
                     {
                        "id":2181520,
                        "type":"good",
                        "title":"товар 12",
                        "amount":1,
                        "default_cost_per_unit":1300,
                        "default_cost_total":1300,
                        "client_discount_percent":10,
                        "cost_to_pay_total":1170
                     },
                     {
                       "id":22017,
                       "type":"service",
                       "document_id":8200391,
                       "title":"Маникюр",
                       "amount":1,
                       "default_cost_per_unit":500,
                       "default_cost_total":500,
                       "client_discount_percent":10,
                       "cost_to_pay_total":450
                    }
                  ],
                  "loyalty_transactions":[
                  {
                     "id":25042,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":9.9,
                     "type_id":11,
                     "created_at":"2020-04-30 16:52:24",
                     "deposit_transaction_id":775,
                     "chain":{
                        "id":500,
                        "title":"Сеть YC BE"
                     },
                     "type":{
                        "id":11,
                        "title":"Списание с личного счета"
                     },
                     "deposit":{
                        "id":220,
                        "balance":990.1,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  },
                  {
                     "id":25043,
                     "document_id":8201102,
                     "sale_item_id":null,
                     "sale_item_type":null,
                     "amount":0.1,
                     "type_id":2,
                     "created_at":"2020-04-30 16:55:21",
                     "loyalty_card_id":185395,
                     "loyalty_program_id":264,
                     "chain":{
                        "id":231,
                        "title":"Yclients."
                     },
                     "type":{
                        "id":2,
                        "title":"Начисление по программам лояльности"
                     },
                     "loyalty_card":{
                        "id":185395,
                        "type_id":265,
                        "number":"0000023100185395",
                        "balance":50.15,
                        "type":{
                           "id":265,
                           "type":"Тест шаблонов программ лояльности"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     },
                     "loyalty_program":{
                        "id":264,
                        "title":"CASHBACK BigBro",
                        "type_id":7,
                        "is_value_percent":true,
                        "type":{
                           "id":7,
                           "title":"Накопительный кэшбэк (оплачено)"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "id":25050,
                     "document_id":8201102,
                     "sale_item_id":2181521,
                     "sale_item_type":"good",
                     "amount":100,
                     "type_id":8,
                     "created_at":"2020-04-30 18:32:43",
                     "loyalty_certificate_id":339,
                     "chain":{
                        "id":79,
                        "title":"Bank 24"
                     },
                     "type":{
                        "id":8,
                        "title":"Списание с сертификата"
                     },
                     "loyalty_certificate":{
                        "id":339,
                        "balance":0,
                        "applicable_balance":0,
                        "type":{
                           "id":20,
                           "title":"Тестовый сертификат",
                           "is_code_required":true
                        }
                     }
                  }
               ],
                  "payment_transactions":[
                     {
                        "id":6033940,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":32,
                        "created_at":null,
                        "account":{
                            "id":90218,
                            "title":"Наличная касса по умолчанию",
                            "is_cash":true,
                            "is_default": true
                        },
                        "expense":{
                            "id":7,
                            "title":"Продажа товаров"
                        }
                     },
                     {
                        "id":6033941,
                        "document_id":8200904,
                        "sale_item_id":2181442,
                        "sale_item_type":"good",
                        "expense_id":7,
                        "account_id":90218,
                        "amount":27,
                        "created_at":null,
                        "account":{
                           "id":90218,
                           "title":"Наличная касса",
                           "is_cash":true,
                           "is_default": false
                        },
                        "expense":{
                           "id":7,
                           "title":"Продажа товаров"
                        }
                     },
                     {
                         "id": 6034121,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 43,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг по умолчанию",
                             "is_cash": false,
                             "is_default": true
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     },
                     {
                         "id": 6034122,
                         "document_id": 8201102,
                         "sale_item_id": 2181521,
                         "sale_item_type": "good",
                         "expense_id": 7,
                         "account_id": 23182,
                         "amount": 12,
                         "account": {
                             "id": 23182,
                             "title": "Карты - эквайринг",
                             "is_cash": false,
                             "is_default": false
                         },
                         "expense": {
                             "id": 7,
                             "title": "Продажа товаров"
                         }
                     }
                  ]
               },
               "kkm_state":{
                  "last_operation_type":1,
                  "transactions":[
                     {
                        "id":2424,
                        "document_id":8200904,
                        "print_date":"2020-04-22 11:53:12",
                        "printed_count":0,
                        "sum":0,
                        "type":{
                           "id":0,
                           "title":"Операция продажи"
                        },
                        "status":{
                           "id":1,
                           "title":"Успешно"
                        },
                        "document":{
                           "id":7215,
                           "type":1,
                           "type_title":"Продажа товара"
                        },
                        "cashier":{
                           "id":746310,
                           "name":"Андрей Панов"
                        }
                     }
                  ]
               },
               "payment_methods":[
                  {
                     "slug":"account",
                     "is_applicable":false,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "account_id":36785,
                     "account":{
                        "id":36785,
                        "title":"Касса - безналичные",
                        "is_cash":false
                     }
                  },
                  {
                     "slug":"loyalty_card",
                     "is_applicable":true,
                     "applicable_amount":51.65,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_card_id":19283,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_program",
                     "is_applicable":true,
                     "applicable_amount":234,
                     "applicable_count":0,
                     "applicable_value":20,
                     "loyalty_card_id":19283,
                     "loyalty_program_id":183,
                     "loyalty_card":{
                        "id":19283,
                        "type_id":155,
                        "number":"0000031200019283",
                        "balance":51.65,
                        "type":{
                           "id":155,
                           "type":"скидочная карта"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     },
                     "loyalty_program":{
                        "id":183,
                        "title":"скидка постоянная",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":312,
                           "title":"Trinity group"
                        }
                     }
                  },
                  {
                     "slug":"loyalty_abonement",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_abonement_id":27,
                     "loyalty_abonement":{
                        "id":27,
                        "is_united_balance":false,
                        "united_balance":0,
                        "type":{
                           "id":7,
                           "title":"абонемент на 5000 QA net",
                           "is_code_required":true
                        },
                        "balance_container":{
                           "links":[
                              {
                                 "count":5,
                                 "category":{
                                    "id":229680,
                                    "category_id":1,
                                    "title":"Маникюр"
                                 }
                              },
                              {
                                 "count":5,
                                 "category":{
                                    "id":429813,
                                    "category_id":429812,
                                    "title":"1 Занятие"
                                 }
                              }
                           ]
                        }
                     }
                  },
                  {
                     "slug":"loyalty_certificate",
                     "is_applicable":true,
                     "applicable_amount":1170,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_certificate_id":338,
                     "loyalty_certificate":{
                        "id":338,
                        "balance":10000,
                        "applicable_balance":10000,
                        "type":{
                           "id":130,
                           "title":"test",
                           "is_code_required":true
                        }
                     }
                  },
                  {
                     "slug":"referral_loyalty_program",
                     "is_applicable":false,
                     "applicable_amount":0,
                     "applicable_count":0,
                     "applicable_value":0,
                     "loyalty_program_id":424,
                     "loyalty_program":{
                        "id":424,
                        "title":"Фиксированная скидка",
                        "type_id":1,
                        "is_value_percent":true,
                        "type":{
                           "id":1,
                           "title":"Фиксированная скидка"
                        },
                        "chain":{
                           "id":231,
                           "title":"Yclients."
                        }
                     }
                  },
                  {
                     "slug":"deposit",
                     "is_applicable":true,
                     "applicable_amount":9.9,
                     "applicable_count":0,
                     "applicable_value":0,
                     "deposit_id":220,
                     "deposit":{
                        "id":220,
                        "balance":1000,
                        "type":{
                           "id":5,
                           "title":"депозит 1"
                        }
                     }
                  }
               ]
            },
            "meta": []
        }

# Group Финансовые транзакции

Объект транзакции имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID транзакции  |
|  document_id | number | ID документа |
|  expense  | expense  | Тип платежа  |
|  date  | string  | Дата создания транзакции  |
|  amount  | float  | Сумма транзакции  |
|  comment  | string | Комментарий  |
|  master  | master  | Сотрудник |
|  supplier  | supplier  | Контрагент  |
|  account  | account  |  Касса  |
|  client  | client  | Клиент  |
|  last_change_date  | string  | Дата последнего изменения  |

Объекты expense, master, account, supplier имеют следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID  |
|  title  | string  | Описание  |

Объект client имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID  |
|  name  | string  | Имя  |
|  phone  | string  | Номер телефона  |

## Получение транзакций, подходящих под фильтры [/transactions/{company_id}{?page,count,account_id,supplier_id,user_id,client_id,master_id,type,real_money,deleted,start_date,client,end_date,balance_is,document_id}]
### Получить транзакции [GET]
#### Фильтрация транзакций
+ page: Номер страницы
+ count: Количество клиентов на странице
+ account_id: ID кассы
+ supplier_id: ID контрагента
+ client_id: ID клиента
+ user_id: ID пользователя
+ master_id: ID сотрудника
+ type: тип транзакции
+ real_money: транзакция реальными деньгами
+ deleted: была ли удалена транзакция
+ start_date:  дата начала периода
+ end_date: дата окончания периода
+ balance_is: 0 - любой баланс, 1 - положительный, 2 - оттрицательный
+ document_id: идентификатор документа

+ Parameters

    + company_id (required, number) - ID компании
    + page:1 (optional, number) - Номер страницы
    + count:50 (optional, number) - Количество клиентов на странице
    + account_id:0 (optional, number) - ID кассы
    + supplier_id:0 (optional, number) - ID контрагента
    + client_id:0 (optional, number) - ID клиента
    + user_id:0 (optional, number) - ID пользователя
    + master_id:0 (optional, number) - ID сотрудника
    + type:0 (optional, number) - тип транзакции
    + real_money:0 (optional, number) - транзакция реальными деньгами
    + deleted:0 (optional, number) - была ли удалена транзакция
    + start_date:`2020-02-23` (optional, string) - дата начала периода
    + end_date:`2020-02-24` (optional, string) - дата окончания периода
    + balance_is:0 (optional, number) - 0 - любой баланс, 1 - положительный, 2 - оттрицательный
    + document_id:0 (optional, number) - идентификатор документа
    + changed_after:`2000-01-01T00:00:00` (optional, string) - Фильтрация товарных транзакций, измененных/созданных начиная с конкретной даты и времени
    + changed_before:`2020-12-31T23:59:59` (optional, string) - Фильтрация товарных транзакций, измененных/созданных до конкретной даты и времени

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "4815162342",
                    "document_id": 22256641,
                    "expense": {
                      "id": "5",
                      "title": "Оказание услуг"
                    },
                    "date": "2016-04-13T15:34:31+0400",
                    "amount": "1000.00",
                    "comment": "Comment",
                    "master": {
                      "id": "1926",
                      "title": "Суини Тодд"
                    },
                    "supplier": {
                      "id": "1968",
                      "title": "George"
                    },
                    "account": {
                      "id": "23182",
                      "title": "Карты"
                    },
                    "client": {
                      "id": "481516",
                      "name": "John Turk",
                      "phone": "+79876543210"
                    },
                    "last_change_date": "2020-02-01T12:00:00+0400"
                  }
                ],
                "meta": []
            }


## Получение транзакций, по ID визита или записи [/timetable/transactions/{company_id}{?record_id,visit_id}]
### Получить транзакции [GET]
#### Фильтрация транзакций
+ record_id: ID записи
+ visit_id: ID визита

+ Parameters

    + company_id (required, number) - ID компании
    + record_id:0 (optional, number) - ID записи
    + visit_id:0 (optional, number) - ID визита

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token


+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "4815162342",
                    "document_id": 22256641,
                    "expense": {
                      "id": "5",
                      "title": "Оказание услуг"
                    },
                    "date": "2016-04-13T15:34:31+0400",
                    "amount": "1000.00",
                    "comment": "Comment",
                    "master": {
                      "id": "1926",
                      "title": "Суини Тодд"
                    },
                    "supplier": {
                      "id": "1968",
                      "title": "George"
                    },
                    "account": {
                      "id": "23182",
                      "title": "Карты"
                    },
                    "client": {
                      "id": "481516",
                      "name": "John Turk",
                      "phone": "+79876543210"
                    },
                    "last_change_date": "2020-02-01T12:00:00+0400"
                  }
                ],
                "meta": []
            }

## Создание финансовой транзакции [/finance_transactions/{company_id}]
### Создание финансовой транзакции  [POST]

+ Parameters
    + company_id (required, number) - ID компании

+ Attributes
    + expense_id (required, number) - ID типа транзакции, статья платежа
    + amount (required, number) - сумма
    + account_id (required, number) - ID кассы
    + client_id (optional, number) - ID клиента
    + master_id (optional, number) - ID мастера
    + supplier_id (optional, number) - ID контрагента
    + comment (optional, number) - комментарий
    + date (required, number) - дата проведения транзакции
    + document_id (optional, number) - ID документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "expense_id": 2640,
                "amount": 100,
                "account_id": 39105,
                "client_id": 4240788,
                "supplier_id": 0,
                "master_id": 0,
                "comment": "Transaction comment",
                "date": "2017-04-04 20:00:00"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 9053737,
                    "date": "2017-04-04 20:00:00",
                    "type_id": 2640,
                    "expense_id": 2640,
                    "account_id": 35501,
                    "amount": 434,
                    "client_id": 4240788,
                    "master_id": 0,
                    "supplier_id": 0,
                    "comment": "Transaction comment",
                    "item_id": 0,
                    "target_type_id": 0,
                    "record_id": 0,
                    "expense": {
                        "id": 2640,
                        "title": "Оказание корпоративных услуг"
                    },
                    "account": {
                        "id": 35501,
                        "title": "Касса",
                        "type_id": 0,
                        "type": 0,
                        "comment": "",
                        "company_id": 4564
                    },
                    "client": {
                        "id": "4240788",
                        "name": "Client",
                        "phone": "71000000001"
                    },
                    "last_change_date": "2020-02-01T12:00:00+0400"
                    "master": [],
                    "supplier": []
                },
                "meta": []
            }

## Операции над финансовой транзакцией [/finance_transactions/{company_id}/{transaction_id}]
### Получение финансовой транзакции [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + transaction_id (required, number)- ID транзакции


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 9053737,
                    "date": "2017-04-04 20:00:00",
                    "type_id": 2640,
                    "expense_id": 2640,
                    "account_id": 35501,
                    "amount": 434,
                    "client_id": 4240788,
                    "master_id": 0,
                    "supplier_id": 0,
                    "comment": "Transaction comment",
                    "item_id": 0,
                    "target_type_id": 0,
                    "record_id": 0,
                    "expense": {
                        "id": 2640,
                        "title": "Оказание корпоративных услуг"
                    },
                    "account": {
                        "id": 35501,
                        "title": "Касса",
                        "type_id": 0,
                        "type": 0,
                        "comment": "",
                        "company_id": 4564
                    },
                    "client": {
                        "id": "4240788",
                        "name": "Client",
                        "phone": "71000000001"
                    },
                    "last_change_date": "2020-02-01T12:00:00+0400"
                    "master": [],
                    "supplier": []
                },
                "meta": []
            }

### Обновление финансовой транзакции [PUT]

+ Parameters

    + company_id (required, number) - ID компании
    + transaction_id (required, number) - ID транзакции

+ Attributes
    + type_id (required, number) - ID типа транзакции, статья платежа
    + amount (required, number) - сумма
    + account_id (required, number) - ID кассы
    + client_id (optional, number) - ID клиента
    + master_id (optional, number) - ID мастера
    + supplier_id (optional, number) - ID контрагента
    + comment (optional, string) - комментарий
    + date (required, string) - дата проведения транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "type_id": 2640,
                "amount": 333,
                "account_id": 35501,
                "client_id": 4240788,
                "master_id": 0,
                "supplier_id": 0,
                "comment": "Updated comment",
                "date": "2017-03-22 20:50:01"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 9053737,
                    "date": "2017-04-04 20:00:00",
                    "type_id": 2640,
                    "expense_id": 2640,
                    "account_id": 35501,
                    "amount": 434,
                    "client_id": 4240788,
                    "master_id": 0,
                    "supplier_id": 0,
                    "comment": "Transaction comment",
                    "item_id": 0,
                    "target_type_id": 0,
                    "record_id": 0,
                    "expense": {
                        "id": 2640,
                        "title": "Оказание корпоративных услуг"
                    },
                    "account": {
                        "id": 35501,
                        "title": "Касса",
                        "type_id": 0,
                        "type": 0,
                        "comment": "",
                        "company_id": 4564
                    },
                    "client": {
                        "id": "4240788",
                        "name": "Client",
                        "phone": "71000000001"
                    },
                    "last_change_date": "2020-02-01T12:00:00+0400"
                    "master": [],
                    "supplier": []
                },
                "meta": []
            }

### Удаление транзакции [DELETE]
+ Parameters
    + company_id (required, integer) - ID компании
    + transaction_id (required, integer) - ID транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 202 (application/json)


#Group Интеграция с сетевой телефонией

## События телефонии [/voip/integration]

### Подключить интеграцию [POST]

Для использования api и активации доступа к настройкам в пользовательском интерфейсе необходимо активировать интеграцию, отправив запрос "Подключить интеграцию".
После успешного подключения, в сетевом интерфейсе пользователя будет открыт доступ в раздел с настройками маршрутизации.

+ Attributes
    + crm_token (required, string) - токен интеграции
    + command (required, string) - slug операции 'setup'
    + type (required, string) - тип операции, в данном случае  'enable'

+ Request

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token
            Content-Type: application/json

    + Body

            {
                "command": "setup",
                "type": "enable",
                "crm_token": "7cf262d6-1656-43f9-86ac-2826bdc125d2"
            }

+ Response 202

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }

## Отключение интеграции [/voip/integration]

### Отключить интеграцию [POST]

Для отключения интеграции можно воспользоваться методом "Отключить интеграцию".
После отключения интеграции закрывается доступ в раздел настроек пользовательского интерфейса, обработка запросов "Уведомление о звонке" и "Сохранение информации о звонке" не производится.

+ Attributes
    + crm_token (required, string) - токен интеграции
    + command (required, string) - slug операции 'setup'
    + type (required, string) - тип операции, в данном случае 'disable'

+ Request

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token
            Content-Type: application/json

    + Body

            {
                "command": "setup",
                "type": "disable",
                "crm_token": "7cf262d6-1656-43f9-86ac-2826bdc125d2"
            }

+ Response 202

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }

## Уведомления о звонке [/voip/integration]

### Уведомление о звонке [POST]

Для отображения уведомлений о входящем звонке используется метод "Уведомление о звонке", в параметрах указыватеся тип звонка ("incoming", "outgoing", "internal"), но на текущий момент уведомления отображаются только для значения "incoming".
Уведомления отображаются для пользователей, определенных на основе настроек маршрутизации.
При одновременном указании параметров "user" и "diversion" приоритетным при поиске маршрутов является "user".

+ Attributes
    + crm_token (required, string) - токен интеграции
    + command (required, string) - slug операции 'event'
    + type (required, string) - тип операции, в данном случае "incoming"
    + phone (required, string) - номер звонящего абонента
    + user (optional, string) - идентификатор абонента телефонии, sip
    + diversion (required, string) - номер через который пришел звонок

+ Request

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token
            Content-Type: application/json

    + Body

            {
                "command": "event",
                "type": "incoming",
                "crm_token": "7cf262d6-1656-43f9-86ac-2826bdc125d2",
                "phone": "71010001100",
                "user": "external_user_id",
                "diversion": "71010001122"
            }

+ Response 202

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }

## Сохранение информации о звонке [/voip/integration]

### Сохранение информации о звонке [POST]

Сохранение информации о звонке автоматически происходит в сетевую историю и в историю компаний сети в соответствии с настройками маршрутизации звонка.

+ Attributes
    + crm_token (required, string) - токен интеграции
    + command (required, string) - операции 'history'
    + type (required, string) - тип операции ("incoming", "outgoing", "internal")
    + phone (required, string) - номер звонившего абонента
    + user (optional, string) - идентификатор абонента телефонии, sip
    + diversion (required, string) - номер через который пришел звонок
    + duration (optional, number) - длительность звонка (в секундах)
    + link (optional, string) - ссылка на запись звонка
    + call_id (optional, string) - идентификатор звонка в системе voip
    + status (optional, string) - статус звонка 'success'|'missed'
    + date (optional, string) - дата и время звонка (ISO8601)

+ Request

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token
            Content-Type: application/json

    + Body

            {
                "command": "history",
                "type": "incoming",
                "crm_token": "7cf262d6-1656-43f9-86ac-2826bdc125d2",
                "phone": "71010001100",
                "user": "external_user_id",
                "diversion": "71010001122",
                "duration": 90,
                "link": "https://external.call.storage/call_record.mp3",
                "call_id": "external_call_id",
                "status": "success",
                "date": "2018-03-20T12:00:28+00:00"
            }

+ Response 202

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }


# Group Лояльность

Сгенерированный объект кода имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  code  | string  |  Сгенерированный код  |

## Генерация кода сертификата/абонемента [/loyalty/generate_code/{salonId}/{goodId}]

+ Параметры
    + salonId (required, number, `1`) - ID салона
    + goodId (required, number, `1`) - ID товара (сертификат/абонемент)

### Генерация кода [GET]

+ Request (application/json)

    + Headers

        Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Attributes (LoyaltyGenerateCode200Option)
        + success(required, boolean)
        + data(required, LoyaltyGenerateCode200DataOption)
        + meta(required, array)

    + Body

        {
            "success": true,
            "data": {
                "code": "1"
            },
            "meta": []
        }

+ Response 403 (application/json)

    + Attributes (LoyaltyGenerateCodeErrorOption)
        + success(required, boolean)
        + data(required, nullable)
        + meta(required, LoyaltyGenerateCodeErrorMetaOption)

    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Недостаточно прав"
            }
        }

+ Response 404 (application/json)

    + Attributes (LoyaltyGenerateCodeErrorOption)
        + success(required, boolean)
        + data(required, nullable)
        + meta(required, LoyaltyGenerateCodeErrorMetaOption)

    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не найдено"
            }
        }

## Список доступных типов абонементов [/company/{company_id}/loyalty/abonement_types/search?title={title}&page={page}&page_size={page_size}]

Список **типов абонементов**, доступных в филиале, можно получить, сделав запрос с указанием идентификатора филиала.
Список можно отфильтровать по названию типа абонемента, передав параметр `title`.
Поддерживается постраничный вывод, задаваемый параметрами `page` и `page_size`.

Список представляет собой массив [типов абонементов](#loyalty-abonement-type).

<a name="loyalty-abonement-type"></a>
**Тип абонемента** имеет следующую структуру:

| Поле                           | Тип     | Описание                                                                                                                         |
| -------------------------------| ------- | -------------------------------------------------------------------------------------------------------------------------------- |
|  id                            | number  | Идентификатор типа абонемента                                                                                                    |
|  title                         | string  | Название типа абонемента                                                                                                         |
|  allow_freeze                  | boolean | Допускается ли заморозка абонементов? true - допускается, false - не допускается                                                 |
|  freeze_limit                  | number  | Максимальный общий период заморозки (дни)                                                                                        |
|  salon_group_id                | number  | Идентификатор сети, в которой действует тип абонемента                                                                           |
|  period                        | number  | Срок действия абонемента (0, если не задан)                                                                                      |
|  period_unit_id                | number  | Единица измерения срока действия абонемента ([список возможных значений](#loyalty-abonement-expiration-unit), если не задан - 0) |
|  is_allow_empty_code           | boolean | Разрешить продажу абонемента без кода? true - разрешить, false - не разрешать                                                    |
|  is_united_balance             | boolean | Общий или раздельный баланс абонемента: true - общий, false - раздельный                                                         |
|  united_balance_services_count | number  | Количество посещений для общего баланса                                                                                          |


<a name="loyalty-abonement-expiration-unit"></a>
**Единицы измерения срока действия типа абонемента**

| Значение  | Описание  |
| --------- | --------- |
|  1        | День      |
|  2        | Неделя    |
|  3        | Месяц     |
|  4        | Год       |


### Получить список доступных типов абонементов [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + title (optional, string) - название типа абонемента
    + page: 1 (optional, number) - номер страницы
    + page_size: (optional, number) - количество выводимых строк на странице. Максимум 100
        + Default: `25`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 12233,
                    "salon_group_id": 123,
                    "title": "Абонемент с возможностью заморозки на 14 дней",
                    "period": 0,
                    "period_unit_id": 0,
                    "allow_freeze": true,
                    "freeze_limit": 14,
                    "is_allow_empty_code": false,
                    "is_united_balance": false,
                    "united_balance_services_count": 0
                },
                {
                    "id": 255789,
                    "salon_group_id": 456,
                    "title": "Абонемент на 6 месяцев",
                    "period": 6,
                    "period_unit_id": 3,
                    "allow_freeze": false,
                    "freeze_limit": 0,
                    "is_allow_empty_code": false,
                    "is_united_balance": false,
                    "united_balance_services_count": 0
                }
            ],
            "meta": {
                "count": 2
            }
        }

## Список типов абонементов по идентификатору [/company/{company_id}/loyalty/abonement_types/fetch?ids[]={id}]

Список **типов абонементов**, доступных в филиале, можно получить, сделав запрос с указанием идентификатора филиала и идентификаторов типов абонементов.

Список представляет собой массив [типов абонементов](#loyalty-abonement-type).

### Получить список типов абонементов по идентификатору [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + id: 1 (optional, number) - ID типа абонемента (можно указать несколько дополнительными параметрами `&ids[]={id}`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 12233,
                    "salon_group_id": 123,
                    "title": "Абонемент с возможностью заморозки на 14 дней",
                    "period": 0,
                    "period_unit_id": 0,
                    "allow_freeze": true,
                    "freeze_limit": 14,
                    "is_allow_empty_code": false,
                    "is_united_balance": false,
                    "united_balance_services_count": 0
                }
            ],
            "meta": {
                "count": 1
            }
        }

## Список доступных типов сертификатов [/company/{company_id}/loyalty/certificate_types/search?title={title}&page={page}&page_size={page_size}]

Список **типов сертификатов**, доступных в филиале, можно получить, сделав запрос с указанием идентификатора филиала.
Список можно отфильтровать по названию типа сертификата, передав параметр `title`.
Поддерживается постраничный вывод, задаваемый параметрами `page` и `page_size`.

Список представляет собой массив [типов сертификатов](#loyalty-certificate-type).

<a name="loyalty-certificate-type"></a>
**Тип сертификата** имеет следующую структуру:

| Поле                        | Тип     | Описание                                                                                                                                              |
| ----------------------------| ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
|  id                         | number  | Идентификатор типа сертификата                                                                                                                        |
|  title                      | string  | Название типа сертификата                                                                                                                             |
|  balance                    | number  | Номинал сертификата                                                                                                                                   |
|  is_multi                   | boolean | Тип списания: true - многократное списание, false - однократное списание                                                                              |
|  company_group_id           | number  | Идентификатор сети, в которой действует тип сертификата                                                                                               |
|  item_type_id               | number  | Ограничение применения ([список возможных значений](#loyalty-certificate-item-type))                                                                  |
|  expiration_type_id         | number  | Ограничение срока действия ([список возможных значений](#loyalty-certificate-expiration-type))                                                        |
|  expiration_date            | string  | Фиксированная дата сгорания в формате ISO8601 (null, если не задана)                                                                                  |
|  expiration_timeout         | number  | Срок действия сертификата с момента продажи (0, если не задан)                                                                                        |
|  expiration_timeout_unit_id | number  | Единица измерения срока действия сертификата с момента продажи ([список возможных значений](#loyalty-certificate-expiration-unit), если не задан - 0) |
|  is_allow_empty_code        | boolean | Разрешить продажу сертификата без кода? true - разрешить, false - не разрешать                                                                        |


<a name="loyalty-certificate-item-type"></a>
**Ограничение применения типа сертификата**

| Значение  | Описание                        |
| --------- | ------------------------------- |
|  0        | Без ограничений                 |
|  1        | Любые услуги без товаров        |
|  2        | Любые товары без услуг          |
|  3        | Некоторые услуги без товаров    |
|  4        | Некоторые услуги и любые товары |


<a name="loyalty-certificate-expiration-type"></a>
**Ограничение срока действия типа сертификата**

| Значение  | Описание                                      |
| --------- | --------------------------------------------- |
|  0        | Без ограничения срока действия                |
|  1        | Фиксированная дата для всех экземпляров       |
|  2        | Фиксированный срок действия с момента продажи |

<a name="loyalty-certificate-expiration-unit"></a>
**Единицы измерения срока действия типа сертификата**

| Значение  | Описание  |
| --------- | --------- |
|  1        | День      |
|  2        | Неделя    |
|  3        | Месяц     |
|  4        | Год       |


### Получить список доступных типов сертификатов [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + title (optional, string) - название типа сертификата
    + page: 1 (optional, number) - номер страницы
    + page_size: (optional, number) - количество выводимых строк на странице. Максимум 100
        + Default: `25`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 1,
                    "title": "Сертификат с фиксированной датой сгорания без ограничений применения",
                    "balance": 10,
                    "is_multi": true,
                    "company_group_id": 12,
                    "item_type_id": 0,
                    "expiration_type_id": 1,
                    "expiration_date": "2016-12-26T19:25:43+04:00",
                    "expiration_timeout": 0,
                    "expiration_timeout_unit_id": 0,
                    "is_allow_empty_code": true
                },
                {
                    "id": 11,
                    "title": "Сертификат, действующий 6 месяцев с момента продажи на любые товары без услуг",
                    "balance": 100,
                    "is_multi": false,
                    "company_group_id": 12,
                    "item_type_id": 2,
                    "expiration_type_id": 2,
                    "expiration_date": null,
                    "expiration_timeout": 6,
                    "expiration_timeout_unit_id": 3,
                    "is_allow_empty_code": false
                }
            ],
            "meta": {
                "count": 2
            }
        }

## Список типов сертификатов по идентификатору [/company/{company_id}/loyalty/certificate_types/fetch?ids[]={id}]

Список **типов сертификатов**, доступных в филиале, можно получить, сделав запрос с указанием идентификатора филиала и идентификаторов типов сертификатов.

Список представляет собой массив [типов сертификатов](#loyalty-certificate-type).

### Получить список типов сертификатов по идентификатору [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + id: 1 (optional, number) - ID типа сертификата (можно указать несколько дополнительными параметрами `&ids[]={id}`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 1,
                    "title": "Сертификат с фиксированной датой сгорания без ограничений применения",
                    "balance": 10,
                    "is_multi": true,
                    "company_group_id": 12,
                    "item_type_id": 0,
                    "expiration_type_id": 1,
                    "expiration_date": "2016-12-26T19:25:43+04:00",
                    "expiration_timeout": 0,
                    "expiration_timeout_unit_id": 0,
                    "is_allow_empty_code": true
                }
            ],
            "meta": {
                "count": 1
            }
        }


# Group Карты лояльности

## Коллекция типов карт доступных клиенту [/loyality/card_types/client/{company_id}/{phone}]

Возвращает список типов карт, которые доступны для выдачи клиенту салона.

| Атрибут        | Тип    | Описание                                                                                                     |
|----------------|--------|--------------------------------------------------------------------------------------------------------------|
| id             | int    | Идентификатор типа карты                                                                                     |
| title          | string | Название типа карты                                                                                          |
| salon_group_id | int    | Идентификатор сети, где создан тип карты                                                                     |
| salon_group    | object | Объект, содержащий в себе поля "id" и "title": идентификатор сети, где создан тип карты и название этой сети |

### Получить список типов карт доступных для выдачи клиенту [GET]

+ Parameters

    + company_id: 12345 (required, number) - ID компании
    + phone: 70001234567 (required, number) - Номер телефона клиента

+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        [
            {
                "id": 10992,
                "title": "Кэшбек",
                "salon_group_id": 145071,
                "salon_group": {
                    "id": 145071,
                    "title": "Сеть 1"
                }
            },
            {
                "id": 8230,
                "title": "Реферальная программа",
                "salon_group_id": 145071,
                "salon_group": {
                    "id": 145071,
                    "title": "Сеть 1"
                }
            }
        ]

## Коллекция типов карт доступных в филиале [/loyalty/card_types/salon/{company_id}]
Возвращает список типов карт, которые действуют для данного филиала.

Атрибуты и их описания соответсвуют методу "Коллекция типов карт доступных клиенту", описанному выше.

### Получить список типов карт доступных в филиале [GET]

+ Parameters

    + company_id: 12345 (required, number) - ID компании

+ Request (application/json)

    + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
        "id": 10992,
        "title": "5+2",
        "salon_group_id": 145071,
        "salon_group": {
            "id": 145071,
            "title": "Сеть тест1"
        }
    },
        {
        "id": 8230,
        "title": "кешбек",
        "salon_group_id": 145071,
        "salon_group": {
            "id": 145071,
            "title": "Сеть тест1"
        }
    },
        {
        "id": 12712,
        "title": "Карта",
        "salon_group_id": 16669,
        "salon_group": {
            "id": 16669,
            "title": "Сеть"
        }

## Получить список выданных карт по номеру телефона [/loyalty/cards/{phone}/{group_id}/{company_id}]

Возвращает список карт клиента с программами, которые активны в данном салоне

| Атрибут        | Тип    | Описание|
|----------------|--------|--------------------------------------------------------------------------------------------------------------|
| id             | int    | Идентификатор карты лояльности                                                                                  |
| balance        | decimal| Баланс карты лояльности                                                                                        |
| paid_amount    | decimal| Сумма "Оплачено" |
| sold_amount    | decimal| Сумма "Продано"                                                                                        |
| visits_count   | int    | Количество визитов                                                                     |
| number         | string | Номер карты |
| type_id        | int    | Идентификатор типа карты лояльности                                                                               |
| salon_group_id | int    | Идентификатор сети, где создана карта                                                                    |
| type           | object | Объект, содержащий в себе поля "id" и "title": идентификатор типа карты и название типа карты, соотвественно
| salon_group    | object | Объект, содержащий в себе поля "id" и "title": идентификатор сети, где создан тип карты и название этой сети                                                                                        |
| programs       | array  | Массив с информацией об акциях, привязанных к карте лояльности                                                                     |
| rules          | array  | Массив с информацией о правилах, настроенных в акции |

Массив programs состоит из объектов со следующими полями:

| Атрибут         | Тип    | Описание                             |
|-----------------|--------|--------------------------------------|
| id              | int    | Идентификатор акции                  |
| title           | string | Название акции                       |
| loyalty_type_id | int    | Идентификатор типа акции             |
| item_type_id    | int    | Начисляется ли кэшбек от товаров     |
| value_unit_id   | int    | Поле "Бонус". Скидка % или Фикс. сумма                                     |
| group_id        | int    | Идентифкатор сети, где создана акция |
| loyalty_type    | object | Объект с информацией о акции         |


Массив rules состоит из объектов со следующими полями:

| Атрибут            | Тип    | Описание                                         |
|--------------------|--------|--------------------------------------------------|
| id                 | int    | Идентификатор правила                            |
| loyalty_program_id | int    | Идентификатор акции, к которой привязано правило |
| loyalty_type_id    | int    | Идентификатор типа акции                         |
| value              | decimal| Значение от которого сработает правило           |

### Получить список карт клиента по номеру телефона [GET]

+ Parameters

    + phone (required, string) - Номер телефона клиента в формате 70001234567
    + group_id (required, number) - ID сети
    + company_id (required, number) - ID филиала

+ Request (application/json)

    + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
        "id": 9210520,
        "balance": 100,
        "points": 0,
        "paid_amount": 1000,
        "sold_amount": 1000,
        "visits_count": 1,
        "number": "0014507109210520",
        "type_id": 10992,
        "salon_group_id": 145071,
        "type": {
            "id": 10992,
            "title": "5+2",
            "salon_group_id": 145071
        },
        "salon_group": {
            "id": 145071,
            "title": "Сеть тесто1."
        },
        "programs": [
            {
                "id": 18005,
                "title": "5+2",
                "value": 0,
                "loyalty_type_id": 13,
                "item_type_id": 3,
                "value_unit_id": 1,
                "group_id": 145071,
                "loyalty_type": {
                    "id": 13,
                    "title": "Скидка по заданному количеству накопленных услуг",
                    "is_discount": true,
                    "is_cashback": false,
                    "is_static": false,
                    "is_accumulative": false
                },
                "rules": [
                    {
                        "id": 72803,
                        "loyalty_program_id": 18005,
                        "loyalty_type_id": 13,
                        "value": 20,
                        "parameter": 0
                    },
                    {
                        "id": 72804,
                        "loyalty_program_id": 18005,
                        "loyalty_type_id": 13,
                        "value": 10,
                        "parameter": 0
                    },
                    {
                        "id": 72805,
                        "loyalty_program_id": 18005,
                        "loyalty_type_id": 13,
                        "value": 100,
                        "parameter": 0
                    }
                ]
            }
        ]
    }

## Получить список выданных карт по ID клиента [/loyalty/client_cards/{client_id}]

Возвращает список карт клиента с программами, которые активны в данном салоне

Атрибуты в ответе на запрос полностью совпадают с методом "Получить список выданных карт по номеру телефона", описанным выше
### Получить список карт клиента по ID [GET]

+ Parameters
    + client_id (required, number) - ID клиента


+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
            "id": 9210520,
            "balance": 0,
            "points": 0,
            "paid_amount": 0,
            "sold_amount": 0,
            "visits_count": 0,
            "number": "0014507109210520",
            "type_id": 10992,
            "salon_group_id": 145071,
            "type":
            {
                "id": 10992,
                "title": "5+2",
                "salon_group_id": 145071
            },
            "salon_group":
            {
                "id": 145071,
                "title": "Сеть тесто1."
            },
            "programs": [
            {
                "id": 18005,
                "title": "5+2",
                "value": 0,
                "loyalty_type_id": 13,
                "item_type_id": 3,
                "value_unit_id": 1,
                "group_id": 145071,
                "loyalty_type":
                {
                    "id": 13,
                    "title": "Скидка по заданному количеству накопленных услуг",
                    "is_discount": true,
                    "is_cashback": false,
                    "is_static": false,
                    "is_accumulative": false
                },
                "rules": [
                {
                    "id": 72803,
                    "loyalty_program_id": 18005,
                    "loyalty_type_id": 13,
                    "value": 20,
                    "parameter": 0
                },
                {
                    "id": 72804,
                    "loyalty_program_id": 18005,
                    "loyalty_type_id": 13,
                    "value": 10,
                    "parameter": 0
                },
                {
                    "id": 72805,
                    "loyalty_program_id": 18005,
                    "loyalty_type_id": 13,
                    "value": 100,
                    "parameter": 0
                }]
            }]
        }

## Получить список карт пользователя [/user/loyalty_cards/{group_id}]
Возвращает список карт авторизованного пользователя с программами, фильтруя карты по сети салонов/салону
### Получить карты лояльности пользователя [GET]

+ Parameters
    + group_id (required, number) - ID сети

+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
        "id": 6516945,
        "balance": 0,
        "points": 0,
        "paid_amount": 23084.5,
        "sold_amount": 100038041,
        "visits_count": 30,
        "number": "0005774306516945",
        "type_id": 6333,
        "salon_group_id": 57743,
        "type": {
            "id": 6333,
            "title": "Накопительный CASHBACK",
            "salon_group_id": 57743
        },
        "salon_group": {
            "id": 57743,
            "title": "112"
        },
        "programs": [
            {
                "id": 10785,
                "title": "абыр",
                "value": 10,
                "loyalty_type_id": 8,
                "item_type_id": 0,
                "value_unit_id": 2,
                "group_id": 57743,
                "loyalty_type": {
                    "id": 8,
                    "title": "Накопительный кэшбэк (продано)",
                    "is_discount": false,
                    "is_cashback": true,
                    "is_static": false,
                    "is_accumulative": true
                },
                "rules": [
                    {
                        "id": 73520,
                        "loyalty_program_id": 10785,
                        "loyalty_type_id": 8,
                        "value": 10,
                        "parameter": 100
                    }
                ]
            },
        ]
    }

## Выдать карту лояльности [/loyalty/cards/{company_id}]

| Атрибут              | Тип    | Описание                                     |
|----------------------|--------|----------------------------------------------|
| loyalty_card_number  | number | Номер карты лояльности                       |
| loyalty_card_type_id | number | Идентификатор типа карты лояльности          |
| phone                | number | Номер телефона клиента в формате 70001234567 |
### Выдать карту лояльности [POST]

+ Parameters

    + company_id (required, number) - ID филиала

+ Request

    + Attributes

        + loyalty_card_number (required, number) - номер карты
        + loyalty_card_type_id (required, number) - идентификатор типа карты
        + phone (required, number) - номер телефона клиента

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

        {
            "loyalty_card_number": "09090909",
            "loyalty_card_type_id": "8230",
            "phone": 79091552422
        }

+ Response 200 (application/json)

        {
            "id": 9250498,
            "balance": 0,
            "points": 0,
            "paid_amount": 16300,
            "sold_amount": 19320,
            "visits_count": 5,
            "number": "01010101",
            "type_id": 8230,
            "salon_group_id": 145071,
            "type":
            {
                "id": 8230,
                "title": "кешмеш",
                "salon_group_id": 145071
            },
            "salon_group":
            {
                "id": 145071,
                "title": "Сеть тесто1."
            },
            "programs": [
            {
                "id": 12720,
                "title": "накопительный кэш оплачено",
                "value": 10,
                "loyalty_type_id": 7,
                "item_type_id": 0,
                "value_unit_id": 1,
                "group_id": 145071,
                "loyalty_type":
                {
                    "id": 7,
                    "title": "Накопительный кэшбэк (оплачено)",
                    "is_discount": false,
                    "is_cashback": true,
                    "is_static": false,
                    "is_accumulative": true
                },
                "rules": [
                {
                    "id": 71149,
                    "loyalty_program_id": 12720,
                    "loyalty_type_id": 7,
                    "value": 10,
                    "parameter": 100
                }]
            }]
        }

## Удалить карту лояльности [/loyalty/cards/{company_id}/{card_id}]
### Удалить карту  лояльности [DELETE]

+ Parameters
    + company_id (required, number) - ID филиала
    + card_id  (required, number) - ID карты лояльности

+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

#Group Сертификаты

## Получить сертификаты клиента [/loyalty/certificates/?{phone}&{company_id}]

Возвращает список сертификатов клиента по телефону

| Атрибут         | Тип       | Описание                                           |
|-----------------|-----------|----------------------------------------------------|
| id              | int       | Идентификатор сертификата                          |
| number          | string    | Код сертификата                                    |
| balance         | decimal   | Текущий баланс                                     |
| default_balance | decimal   | Начальный баланс                                   |
| type_id         | int       | Идентификатор типа сертификата                     |
| status_id       | int       | Идентификатор статуса                              |
| created_date    | timestamp | Дата продажи                                       |
| expiration_date | datetime  | Дата сгорания                                      |
| type            | object    | Объект с информацией о типе сертификата            |
| status          | object    | Объект с информацией о текущем статусе сертификата |

Массив type содержит следующие объекты:

| Атрибут                    | Тип     | Описание                                                                                                                                                   |
|----------------------------|---------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id                         | int     | Идентификатор типа сертификата                                                                                                                             |
| title                      | string  | Название типа                                                                                                                                              |
| balance                    | decimal | Номинал сертификата                                                                                                                                        |
| is_multi                   | boolean | Доступен ли для многократрного списания                                                                                                                    |
| company_group_id           | int    | Идентификатор сети, где создан тип сертификата                                                                                                             |
| item_type_id               | int     | Ограничение применения списания баллов. 0 - без ограничений, 1 - Только услуги, 2 - Некоторые услуги + все товары, 3 - Некоторые услуги, 4 - Только товары |
| expiration_type_id         | int     | Идентификатор ограничения срока действия. 0 - без ограничения, 1 - фиксированная дата, 2 - фиксированный срок                                              |
| expiration_date            |timestamp| Дата сгорания всех сертифкатов. Заполняется с expiration_type_id = 1                                                                                       |
| expiration_timeout         | int     | Срок действия сертифкатов. Заполняется с expiration_type_id = 2                                                                                            |
| expiration_timeout_unit_id | int     | Единицы измерения времени. 1 - День, 2 - Неделя, 3 - месяц, 4 - год                                                                                        |
| is_allow_empty_code        | boolean | Продажа без кода                                                                                                                                           |
| item_type                  | object  | Объект с item_type_id и его названием                                                                                                                  |

### Получить сертификаты клиента [GET]

+ Parameters

    + phone (required, string) - Номер телефона клиента
    + company_id (required, number) - ID филиала

+ Request (application/json)

    + Headers

        Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    {
        "success": true,
        "data": [
            {
                "id": 409726,
                "number": "888",
                "balance": 9000,
                "default_balance": 9000,
                "type_id": 27841,
                "status_id": 2,
                "created_date": "2019-10-07T16:20:05+04:00",
                "expiration_date": "2020-10-06T23:59:59+04:00",
                "type": {
                    "id": 27841,
                    "title": "сертификат 9000",
                    "balance": 9000,
                    "is_multi": true,
                    "company_group_id": 128284,
                    "item_type_id": 0,
                    "expiration_type_id": 2,
                    "expiration_date": null,
                    "expiration_timeout": 365,
                    "expiration_timeout_unit_id": 1,
                    "is_allow_empty_code": false,
                    "item_type": {
                        "id": 0,
                        "title": "Без ограничений"
                    }
                },
                "status": {
                    "id": 2,
                    "title": "Активирован"
                }
            }
        ],
        "meta": {
            "count": 1
        }
    }

## Получить сертификаты пользователя [/user/loyalty/certificates/?{company_id}]

Возвращает список сертификатов авторизованного пользователя

### Получить сертификаты пользователя [GET]

+ Parameters

    + company_id (required, number) - ID филиала

+ Request (application/json)

    + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

 {
    "success": true,
    "data": [
        {
            "id": 410927,
            "number": "888864",
            "balance": 9000,
            "default_balance": 9000,
            "type_id": 27841,
            "status_id": 2,
            "created_date": "2019-10-08T14:00:00+04:00",
            "expiration_date": "2020-10-07T23:59:59+04:00",
            "type": {
                "id": 27841,
                "title": "сертификат 9000",
                "balance": 9000,
                "is_multi": true,
                "company_group_id": 128284,
                "item_type_id": 0,
                "expiration_type_id": 2,
                "expiration_date": null,
                "expiration_timeout": 365,
                "expiration_timeout_unit_id": 1,
                "is_allow_empty_code": false,
                "item_type": {
                    "id": 0,
                    "title": "Без ограничений"
                }
            },
            "status": {
                "id": 2,
                "title": "Активирован"
            }
        }
    ],
    "meta": {
        "count": 1
    }
}

#Group Абонементы

| Атрибут             | Тип     | Описание                                                                                |
|---------------------|---------|-----------------------------------------------------------------------------------------|
| is_frozen           | boolean | Указывает заморожен ли абонемент                                                        |
| freeze_period       | int     | Период, который абонемент был заморожен                                                 |
| period              | int     | Значение срока действия абонемента                                                      |
| period_unit_id      | int     | Идентификатор единиц измерения срока действия. 1 - день, 2 - неделя, 3 - месяц, 4 - год |
| expiration_date     | datetime| Дата сгорания абонемента                                                                |
| status              | int     | Текущий статус абонемента                                                               |
| balance_container   | object  | Объект включающий в себя массив links с информацией о балансе абонемента                |
| type                | object  | Объект с информацией о типе абонемента                                                  |
| allow_freeze        | boolean | Допускается ли заморозка (для объекта type)                                             |
| is_allow_empty_code | boolean | Допускается ли продажа без кода (для объекта type)                                      |

## Получить абонементы клиента [/loyalty/abonements/?{phone}&{company_id}]

Возвращает список абонементов клиента по телефону

### Получить абонементы клиента [GET]

+ Parameters

    + phone (required, string) - номер телефона клиента
    + company_id (required, number) - ID филиала


+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
            {
                "id": 659878,
                "number": "788376",
                "balance_string": "Серфинг (x10)",
                "is_frozen": false,
                "freeze_period": 0,
                "period": 9999,
                "period_unit_id": 3,
                "expiration_date": null,
                "status":
                {
                    "id": 1,
                    "title": "Выпущен",
                    "extended_title": "Выпущен"
                },
                "balance_container":
                {
                    "links": [
                    {
                        "count": 10,
                        "category":
                        {
                            "id": 3129591,
                            "category_id": 1,
                            "title": "Серфинг"
                        }
                    }]
                },
                "type":
                {
                    "id": 97804,
                    "salon_group_id": 145071,
                    "title": "89999",
                    "period": 9999,
                    "period_unit_id": 3,
                    "allow_freeze": false,
                    "freeze_limit": 0,
                    "is_allow_empty_code": false,
                    "is_united_balance": false,
                    "united_balance_services_count": 0,
                    "balance_container":
                    {
                        "links": [
                        {
                            "count": 10,
                            "category":
                            {
                                "id": 3129591,
                                "category_id": 1,
                                "title": "Серфинг"
                            }
                        }]
                    }
                }
            }],
            "meta":
            {
                "count": 1
            }
        }

## Получить абонементы пользователя [/user/loyalty/abonements/?{company_id}]
Возвращает список абонементов авторизованного пользователя
### Получить абонементы пользователя [GET]

+ Parameters
    + company_id (required, number) - ID компании

+ Request (application/json)

  + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

        {
            "success": true,
            "data": [
            {
                "id": 659878,
                "number": "788376",
                "balance_string": "Серфинг (x10)",
                "is_frozen": false,
                "freeze_period": 0,
                "period": 9999,
                "period_unit_id": 3,
                "expiration_date": null,
                "status":
                {
                    "id": 1,
                    "title": "Выпущен",
                    "extended_title": "Выпущен"
                },
                "balance_container":
                {
                    "links": [
                    {
                        "count": 10,
                        "category":
                        {
                            "id": 3129591,
                            "category_id": 1,
                            "title": "Серфинг"
                        }
                    }]
                },
                "type":
                {
                    "id": 97804,
                    "salon_group_id": 145071,
                    "title": "89999",
                    "period": 9999,
                    "period_unit_id": 3,
                    "allow_freeze": false,
                    "freeze_limit": 0,
                    "is_allow_empty_code": false,
                    "is_united_balance": false,
                    "united_balance_services_count": 0,
                    "balance_container":
                    {
                        "links": [
                        {
                            "count": 10,
                            "category":
                            {
                                "id": 3129591,
                                "category_id": 1,
                                "title": "Серфинг"
                            }
                        }]
                    }
                }
            }],
            "meta":
            {
                "count": 1
            }
        }

#Group Применение лояльности в визите

| Атрибут              | Тип     | Описание                                                           |
|----------------------|---------|--------------------------------------------------------------------|
| loyalty_transactions | array   | Массив с информацией о примененных транзакциях лояльности в визите |
| is_discount          | boolean | Является ли транзакцией скидки                                     |
| is_loyalty_withdraw  | boolean | Является ли транзакцией списания баллов                            |
| items                | array   | Массив с информацией о товарах и услугах записи                    |
| payment_transactions | array   | Массив с информацией о финансовых транзакциях записи               |
| kkm_transactions     | object  | Объект с информацией о ККМ транзакциях записи                      |

## Применить акцию скидки к визиту [/visit/loyalty/apply_discount_program/{company_id}/{card_id}/{program_id}]
Применение акции к визиту, имеет смысл тольо если есть визит
### Применить акцию скидки в визите [POST]

+ Parameters
    + company_id (required, number) - ID филиала
    + card_id (required, number) - ID карты клиента
    + program_id (required, number) - ID акции, привязанной к карте

+ Request

    + Attributes
        + record_id (required, number) - ID записи, где нужно применить скидку
        + visit_id (required, number) - ID визита, где нужно применить скидку

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

            {
            "record_id": 140967944,
            "visit_id": 118389447
            }

+ Response 200 (application/json)

        {
    "payment_transactions": [],
    "loyalty_transactions": [
        {
            "id": 22985556,
            "status_id": 1,
            "amount": 20,
            "type_id": 1,
            "program_id": 20802,
            "card_id": 9223622,
            "salon_group_id": 145071,
            "item_id": 5048384,
            "item_type_id": 7,
            "item_record_id": 0,
            "goods_transaction_id": 96063258,
            "is_discount": true,
            "is_loyalty_withdraw": false,
            "type": {
                "id": 1,
                "title": "Скидка по акции"
            }
        }
    ],
     "kkm_transaction_details_container": {
        "last_operation_type": 1,
        "transactions": []
    },
    "items": [
        {
            "id": 96063258,
            "item_id": 5048384,
            "item_type_id": 7,
            "record_id": 0,
            "item_title": "тестовый два",
            "amount": 1,
            "first_cost": 20,
            "manual_cost": 20,
            "discount": 0,
            "cost": 20,
            "master_id": 548096,
            "good_id": 5048384,
            "service_id": 0,
            "event_id": 0,
            "is_service": false,
            "is_event": false,
            "is_good": true
        },
        {
            "id": 0,
            "item_id": 2560779,
            "item_type_id": 1,
            "record_id": 140878948,
            "item_title": "Глубокое бикини",
            "amount": 1,
            "first_cost": 3000,
            "manual_cost": 3000,
            "discount": 0,
            "cost": 3000,
            "master_id": 140878948,
            "good_id": 0,
            "service_id": 2560779,
            "event_id": 0,
            "is_service": true,
            "is_event": false,
            "is_good": false
        }
    ]
}

## Отменить применение акции скидки [/visit/loyalty/cancel_discount_program/{company_id}/{card_id}/{program_id}]
Отмена примененной к визиту акции.
### Отменить применение акции скидки в визите [POST]

+ Parameters
    + company_id (required, number) - ID филиала
    + card_id (required, number) - ID карты клиента
    + program_id (required, number) - ID акции, привязанной к карте

+ Request

    + Attributes
        + record_id (required, number) - ID записи, где нужно отменить скидку
        + visit_id (required, number) - ID визита, где нужно отменить скидку

    + Headers

        Authorization: Bearer partner_token, User user_token

    + Body

            {
            "record_id": 140967944,
            "visit_id": 118389447
            }

+ Response 200 (application/json)

        {
    "payment_transactions": [],
    "loyalty_transactions": [],
    "kkm_transaction_details_container": {
        "last_operation_type": 1,
        "transactions": []
    },
    "items": [
        {
            "id": 96063258,
            "item_id": 5048384,
            "item_type_id": 7,
            "record_id": 0,
            "item_title": "тестовый два",
            "amount": 1,
            "first_cost": 20,
            "manual_cost": 20,
            "discount": 0,
            "cost": 20,
            "master_id": 548096,
            "good_id": 5048384,
            "service_id": 0,
            "event_id": 0,
            "is_service": false,
            "is_event": false,
            "is_good": true
        },
        {
            "id": 0,
            "item_id": 2560779,
            "item_type_id": 1,
            "record_id": 140878948,
            "item_title": "Глубокое бикини",
            "amount": 1,
            "first_cost": 3000,
            "manual_cost": 3000,
            "discount": 0,
            "cost": 3000,
            "master_id": 140878948,
            "good_id": 0,
            "service_id": 2560779,
            "event_id": 0,
            "is_service": true,
            "is_event": false,
            "is_good": false
        }
    ]
}

## Применить списание с карты лояльности [/visit/loyalty/apply_card_withdrawal/{company_id}/{card_id}]
Списание бонусов с карты
Сумма не будет превышать остаток на оплату
Если 0 то транзакции не будет
### Применить списание с карты лояльности в визите[POST]

+ Parameters
    + company_id (required, number) - ID филиала
    + card_id (required, number) - ID карты клиента

+ Request

    + Attributes
        + record_id (required, number) - ID записи, где нужно отменить скидку
        + visit_id (required, number) - ID визита, где нужно отменить скидку
        + amount (required, number) - количество баллов для списания

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

            {
            "record_id": 140967944,
            "visit_id": 118389447,
            "amount": 100
            }

+ Response 200 (application/json)

        {
            "payment_transactions": [],
            "loyalty_transactions": [
            {
                "id": 22988861,
                "status_id": 1,
                "amount": 0.66000000000000003,
                "type_id": 3,
                "program_id": 0,
                "card_id": 9210520,
                "salon_group_id": 145071,
                "item_id": 5048384,
                "item_type_id": 7,
                "item_record_id": 0,
                "goods_transaction_id": 96063258,
                "is_discount": false,
                "is_loyalty_withdraw": true,
                "type":
                {
                    "id": 3,
                    "title": "Списание с карты лояльности"
                }
            },
            {
                "id": 22988862,
                "status_id": 1,
                "amount": 99.340000000000003,
                "type_id": 3,
                "program_id": 0,
                "card_id": 9210520,
                "salon_group_id": 145071,
                "item_id": 2560779,
                "item_type_id": 1,
                "item_record_id": 140878948,
                "goods_transaction_id": 0,
                "is_discount": false,
                "is_loyalty_withdraw": true,
                "type":
                {
                    "id": 3,
                    "title": "Списание с карты лояльности"
                }
            }],
            "kkm_transaction_details_container":
            {
                "last_operation_type": 1,
                "transactions": []
            },
            "items": [
            {
                "id": 96063258,
                "item_id": 5048384,
                "item_type_id": 7,
                "record_id": 0,
                "item_title": "тестовый два",
                "amount": 1,
                "first_cost": 20,
                "manual_cost": 20,
                "discount": 0,
                "cost": 20,
                "master_id": 548096,
                "good_id": 5048384,
                "service_id": 0,
                "event_id": 0,
                "is_service": false,
                "is_event": false,
                "is_good": true
            },
            {
                "id": 0,
                "item_id": 2560779,
                "item_type_id": 1,
                "record_id": 140878948,
                "item_title": "Глубокое бикини",
                "amount": 1,
                "first_cost": 3000,
                "manual_cost": 3000,
                "discount": 0,
                "cost": 3000,
                "master_id": 140878948,
                "good_id": 0,
                "service_id": 2560779,
                "event_id": 0,
                "is_service": true,
                "is_event": false,
                "is_good": false
            }]
        }

## Отменить списание с карты лояльности [/visit/loyalty/cancel_card_withdrawal/{company_id}/{card_id}]

Отмена списания с карты лояльности.

### Отменить списание с карты лояльности в визите [POST]

+ Parameters

    + company_id (required, number) - ID филиала
    + card_id (required, number) - ID карты клиента

+ Request

    + Attributes
        + record_id (required, number) - ID записи, где нужно отменить скидку
        + visit_id (required, number) - ID визита, где нужно отменить скидку

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

            {
            "record_id": 140967944,
            "visit_id": 118389447
            }

+ Response 200 (application/json)

        {
    "payment_transactions": [],
    "loyalty_transactions": [],
    "kkm_transaction_details_container": {
        "last_operation_type": 1,
        "transactions": []
    },
    "items": [
        {
            "id": 96063258,
            "item_id": 5048384,
            "item_type_id": 7,
            "record_id": 0,
            "item_title": "тестовый два",
            "amount": 1,
            "first_cost": 20,
            "manual_cost": 20,
            "discount": 0,
            "cost": 20,
            "master_id": 548096,
            "good_id": 5048384,
            "service_id": 0,
            "event_id": 0,
            "is_service": false,
            "is_event": false,
            "is_good": true
        },
        {
            "id": 0,
            "item_id": 2560779,
            "item_type_id": 1,
            "record_id": 140878948,
            "item_title": "Глубокое бикини",
            "amount": 1,
            "first_cost": 3000,
            "manual_cost": 3000,
            "discount": 0,
            "cost": 3000,
            "master_id": 140878948,
            "good_id": 0,
            "service_id": 2560779,
            "event_id": 0,
            "is_service": true,
            "is_event": false,
            "is_good": false
        }
    ]
}

## Применить реферальную программу [/visit/loyalty/apply_referral_program/{company_id}/{group_id}]
Применение реферальной программы к визиту
### Применить реферальную программу в записи [POST]

+ Parameters
    + company_id (required, number) - ID филиала
    + group_id (required, number) - ID сети, где настроена реферальная программа

+ Request

    + Attributes
        + record_id (required, number) - ID записи, где нужно применить скидку
        + visit_id (required, number) - ID визита, где нужно применить скидку
        + referrer_phone (required, string) - номер телефона пригласившего

    + Headers

            Authorization: Bearer partner_token, User user_token

    + Body

            {
            "record_id": 140967944,
            "visit_id": 118389447,
            "referrer_phone": 70001234567
            }

+ Response 200 (application/json)

        {
    "payment_transactions": [],
    "loyalty_transactions": [
        {
            "id": 22989715,
            "status_id": 1,
            "amount": 100,
            "type_id": 1,
            "program_id": 12705,
            "card_id": 0,
            "salon_group_id": 145071,
            "item_id": 5048371,
            "item_type_id": 7,
            "item_record_id": 0,
            "goods_transaction_id": 96082477,
            "is_discount": true,
            "is_loyalty_withdraw": false,
            "type": {
                "id": 1,
                "title": "Скидка по акции"
            }
        }
    ],
    "kkm_transaction_details_container": {
        "last_operation_type": 1,
        "transactions": []
    },
    "items": [
        {
            "id": 96082477,
            "item_id": 5048371,
            "item_type_id": 7,
            "record_id": 0,
            "item_title": "тестовый",
            "amount": 1,
            "first_cost": 1000,
            "manual_cost": 1000,
            "discount": 0,
            "cost": 1000,
            "master_id": 548042,
            "good_id": 5048371,
            "service_id": 0,
            "event_id": 0,
            "is_service": false,
            "is_event": false,
            "is_good": true
        }
    ]
}

## Получить транзакции лояльности по визиту [/visit/loyalty/transactions/{visit_id}]
Список транзакций по акциям лояльнсти для данного визита
### Получить транзакции лояльности по визиту [GET]
+ Parameters
    + visit_id (required, number) - ID визита

+ Request

    + Headers

            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

          [
          {
              "id": 22989715,
              "status_id": 1,
              "amount": 100,
              "type_id": 1,
              "program_id": 12705,
              "card_id": 0,
              "salon_group_id": 145071,
              "item_id": 5048371,
              "item_type_id": 7,
              "item_record_id": 0,
              "goods_transaction_id": 96082477,
              "is_discount": true,
              "is_loyalty_withdraw": false,
              "type":
              {
                  "id": 1,
                  "title": "Скидка по акции"
              },
              "program":
              {
                  "id": 12705,
                  "title": "приглашенный",
                  "value": 10,
                  "loyalty_type_id": 1,
                  "item_type_id": 0,
                  "value_unit_id": 1,
                  "group_id": 145071
              }
          },
          {
              "id": 22994127,
              "status_id": 1,
              "amount": 100,
              "type_id": 4,
              "program_id": 19044,
              "card_id": 9234863,
              "salon_group_id": 145071,
              "item_id": 0,
              "item_type_id": 0,
              "item_record_id": 0,
              "goods_transaction_id": 0,
              "is_discount": false,
              "is_loyalty_withdraw": false,
              "type":
              {
                  "id": 4,
                  "title": "Начисление по реферальной программе"
              },
              "program":
              {
                  "id": 19044,
                  "title": "пригласивший 2",
                  "value": 100,
                  "loyalty_type_id": 6,
                  "item_type_id": 0,
                  "value_unit_id": 2,
                  "group_id": 145071
              }
          }]


# Group Уведомления о событиях webhooks

Для организации двусторонней синхронизации с YCLIENTS можно использовать уведомления о событиях,
которые может отправлять YCLIENTS на указанный при настройке адрес.

YCLIENTS поддерживает уведомления о создании, изменении и удалении следующих сущностей:
- Компания
- Категория Услуг
- Услуга
- Сотрудник
- Клиент
- Запись
- Товар
- Операция продажи товара
- Операция прихода товара
- Операция списания товара
- Операция списания расходника
- Операция перемещения товара
- Финансовая операция

Каждое событие при отправке имеет следующий набор полей

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  company_id  | number  | ID компании в рамках которой происходит событие  |
|  resource  | string  | Имя сущности. Одно из: company, service_category, service, staff, client, record  |
|  resource_id  | number  | ID сущности в YCLIENTS  |
|  status  | string  | Событие. create, update или delete  |
|  data  | JSON | Параметры сущности. Используется тот же набор полей что и при обращении к сущности через API.  |


## Настройка уведомлении о событиях [/hooks_settings/{company_id}]


Для получения уведомлений о событиях нужно произвести их настройку, указав на какой адрес отправлять запросы и по каким сущностям.
Для настройки уведомлений необходимо быть авторизованным как пользователь с правами доступа к настройкам компании.

Объект настроек уведомлений содержит следующие поля

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  company_id  | number  | ID компании в рамках которой происходит событие  |
|  urls  | array[string]  | Список адресов, на которые отправлять уведомления  |
|  active  | number  | 1 - уведомления активны, 0 - не активны  |
|  salon  | number  | 1 - отправлять события по сущности компания, 0 - нет  отправлять  |
|  service_category  | number  | 1 - отправлять события по сущности категория услуг, 0 - нет  отправлять  |
|  service  | number  | 1 - отправлять события по сущности услуга, 0 - нет  отправлять  |
|  master  | number  | 1 - отправлять события по сущности сотрудник, 0 - нет  отправлять  |
|  good  | number  | 1 - отправлять события по сущности товар, 0 - нет  отправлять  |
|  client  | number  | 1 - отправлять события по сущности клиент, 0 - нет  отправлять  |
|  record  | number  | 1 - отправлять события по сущности запись, 0 - нет  отправлять  |
|  goods_operations_sale  | number  | 1 - отправлять события по сущности продажа товара, 0 - нет  отправлять  |
|  goods_operations_receipt  | number  | 1 - отправлять события по сущности приход товара, 0 - нет  отправлять  |
|  goods_operations_consumable  | number  | 1 - отправлять события по сущности списание расходника, 0 - нет  отправлять  |
|  goods_operations_stolen  | number  | 1 - отправлять события по сущности списание товара, 0 - нет  отправлять  |
|  goods_operations_move  | number  | 1 - отправлять события по сущности перемещение товара, 0 - нет  отправлять  |
|  finances_operation  | number  | 1 - отправлять события по сущности финансовая операция, 0 - нет  отправлять  |


### Получить настройки уведомлений о событиях [GET]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                  "urls": [
                    "https://dev.tools.test.com/test/Hooks"
                  ],
                  "active": 0,
                  "salon": 1,
                  "service_category": 0,
                  "service": 1,
                  "good": 1,
                  "master": 1,
                  "client": 1,
                  "record": 1,
                  "goods_operations_sale": 1,
                  "goods_operations_receipt": 1,
                  "goods_operations_consumable": 1,
                  "goods_operations_stolen": 1,
                  "goods_operations_move": 1,
                  "finances_operation": 1
                },
                "meta": []
            }


### Изменить настройки уведомлений о событиях [POST]

+ Parameters

    + company_id (required, number) - ID компании


+ Request (application/json)

    + Attributes
        + urls (required, array[string]) - Список адресов, на которые отправлять уведомления
        + active (required, number) - 1 - уведомления активны, 0 - не активны
        + salon (optional, number) - 1 - отправлять события по сущности компания, 0 - нет  отправлять
        + service_category (optional, number) - 1 - отправлять события по сущности категория услуг, 0 - нет  отправлять
        + service (optional, number) - 1 - отправлять события по сущности услуга, 0 - нет  отправлять
        + good (optional, number) - 1 - отправлять события по сущности товар, 0 - нет  отправлять
        + master (optional, number) - 1 - отправлять события по сущности сотрудник, 0 - нет  отправлять
        + client (optional, number) - 1 - отправлять события по сущности клиент, 0 - нет  отправлять
        + record (optional, number) - 1 - отправлять события по сущности запись, 0 - нет  отправлять
        + goods_operations_sale (optional, number) - 1 - отправлять события по сущности продажа товара, 0 - нет  отправлять
        + goods_operations_receipt (optional, number) - 1 - отправлять события по сущности приход товара, 0 - нет  отправлять
        + goods_operations_consumable (optional, number) - 1 - отправлять события по сущности списание расходника, 0 - нет  отправлять
        + goods_operations_stolen (optional, number) - 1 - отправлять события по сущности списание товара, 0 - нет  отправлять
        + goods_operations_move (optional, number) - 1 - отправлять события по сущности перемещение товара, 0 - нет  отправлять
        + finances_operation (optional, number) - 1 - отправлять события по сущности финансовая операция, 0 - нет  отправлять


    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
              "urls": [
                "https://dev.tools.test.com/test/Hooks"
              ],
              "active": 0,
              "salon": 1,
              "service_category": 0,
              "service": 1,
              "good": 1,
              "master": 1,
              "client": 1,
              "record": 1,
              "goods_operations_sale": 1,
              "goods_operations_receipt": 1,
              "goods_operations_consumable": 1,
              "goods_operations_stolen": 1,
              "goods_operations_move": 1,
              "finances_operation": 1
            }

+ Response 201 (application/json)

    + Body

            {
                "success": true,
                "data": {
                  "urls": [
                    "https://dev.tools.test.com/test/Hooks"
                  ],
                  "active": 0,
                  "salon": 1,
                  "service_category": 0,
                  "service": 1,
                  "master": 1,
                  "client": 1,
                  "record": 1,
                  "goods_operations_sale": 1,
                  "goods_operations_receipt": 1,
                  "goods_operations_consumable": 1,
                  "goods_operations_stolen": 1,
                  "goods_operations_move": 1,
                  "finances_operation": 1
                },
                "meta": []
            }

# Group Справочники

## Получение списка бизнес-типов сгруппированных по группам [/references/business_groups_with_types]

Объект бизнес-группы имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID категории  |
|  title  | string  | Название категории  |
|  image  | string | Изображение группы  |
|  types  | array | Связанные бизнес-типы  |

Объект бизнес-типа имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID типа  |
|  title  | string  | Название типа  |
|  business_group_id  | number  | ID бизнес-группы  |

### Получить бизнес-типы по группам [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (ClientLabelsCode200Attributes)

        + success(required, boolean)
        + data(required, array)
        + meta(required, ClientLabelsCode200MetaOption)

    + Body
        {
            "success": true,
            "data": [
                {
                    "id": 10,
                    "title": "Бытовые услуги",
                    "image": "http://u17.dev.yclients.tech/images/business-groups/services.png",
                    "types": [
                        {
                            "id": 31,
                            "title": "Ателье",
                            "business_group_id": 10
                        }
                    ]
                },
                {
                    "id": 1,
                    "title": "Красота",
                    "image": "http://u17.dev.yclients.tech/images/business-groups/beauty.png",
                    "types": [
                        {
                            "id": 1,
                            "title": "Салоны красоты",
                            "business_group_id": 1
                        },
                        {
                            "id": 25,
                            "title": "Спа салон",
                            "business_group_id": 1
                        },
                    ]
                },
            ],
            "meta": {
                "count": 10
            }
        }

# Group Категории
Объект категории имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID категории  |
|  salon_id  | number  | ID компании  |
|  title  | string  | Название категории  |
|  color  | string  | Цвет метки в формате #RRGGBB  |
|  icon  | string | Название иконки  |
|  entity  | number  | Объект категории (1 - категория для клиентов, 2 - категория для записей)|
|  deleted  | number  | Метка удаления  |
|  not_editable  | number  |  Разрешены ли изменения категории (1 - разрешены, 0 - не разрешены)  |

## Получение списка клиентских категорий филиала [/labels/{company_id}/clients?{page}=&{term}=клиент]
### Получить клиентские категории с посиком по названию [GET]

+ Parameters

    + company_id (required, number) - ID филиала
    + page (required, number) - Номер страницы
    + term (string) - Поиск по названию категории

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (ClientLabelsCode200Attributes)

        + success(required, boolean)
        + data(required, array)
        + meta(required, ClientLabelsCode200MetaOption)

    + Body
        {
            "success": true,
            "data": {
                {
                    "id": 3,
                    "salon_id": 4564,
                    "title": "Постоянный клиент",
                    "color": "#1f1038",
                    "icon": "tag",
                    "entity": 1,
                    "deleted": 1,
                    "not_editable": 0
                }
            },
            "meta": {
                "page": 1,
                "total_count": 25
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Необходимо продлить лицензию в филиале с id: {company_id}"
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Недостаточно прав"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не найдено"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не указан филиал."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Филиал не найден."
            }
        }

## Получение категорий компании [/labels/{company_id}/{entity}]
### Получить категории [GET]

+ Parameters

    + company_id (required, number) - ID компании
    + entity (required, number) - Объект категории (0 - общие метки, 1 - метки клиентов, 2 - метки записей)


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "4815162342",
                    "salon_id": "123456",
                    "title": "Label One",
                    "color": "#ffaacc",
                    "icon": "unlock",
                    "entity": "2",
                    "deleted": "0",
                    "not_editable": "0"
                  }
                ],
                "meta": []
            }

## Создание клиентской категории компании [/labels/{company_id}/clients/create]
### Создать категорию [POST]

+ Parameters

    + company_id (required, number) - ID компании

+ Request (application/json)

    + Headers
        Authorization: Bearer partner_token, User user_token

    + Attributes
        + title (required, string) - Название категории
        + color (required, string) - Цвет категории (В HEX формате. Например #aacc00 или #ac0)

+ Response 200 (application/json)
    + Body
        {
            "success": true,
            "data": null,
            "meta": {
                "message": "Accepted"
            }
        }

+ Response 400 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Категория с таким названием уже существует."
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Необходимо продлить лицензию в филиале с id: {company_id}"
            }
        }

+ Response 403 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Недостаточно прав"
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Не указан филиал."
            }
        }

+ Response 404 (application/json)
    + Body
        {
            "success": false,
            "data": null,
            "meta": {
                "message": "Филиал не найден."
            }
        }

## Создание категории компании [/labels/{company_id}{?title,color,entity,icon}]
### Создать категорию [POST]

+ Parameters

    + company_id (required, number) - ID компании
    + title (required, string) - Название категории
    + color (required, string) - Цвет метки в формате #RRGGBB
    + entity (optional, number) - Объект категории (0 - общие метки, 1 - метки клиентов, 2 - метки записей)
    + icon (optional, string) - Название иконки


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }



## Обновление категории компании [/labels/{company_id}/{label_id}]
### Обновить категорию [PUT]

+ Parameters

    + company_id (required, number) - ID компании
    + label_id (required, number) - ID метки

+ Attributes

    + title (required, string) - Название категории
    + color (required, string) - Цвет метки в формате #RRGGBB
    + entity (optional, number) - Объект категории (0 - общие метки, 1 - метки клиентов, 2 - метки записей)
    + icon (optional, string) - Название иконки

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }


### Удалить категорию компании [DELETE]

+ Parameters

    + company_id (required, number) - ID компании
    + label_id (required, number) - ID метки


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": null,
                "meta": {
                    "message": "Accepted"
                }
            }




# Group Товары

Объект товара имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  title  | string  | Наименование товара  |
|  value  | string  | Наименование товара  |
|  label  | string  | Наименование товара с артикулом (если имеется)  |
|  good_id  | number  | Тип платежа  |
|  cost  | float  | Цена продажи  |
|  unit_id  | number  | ID единицы измерения для продажи  |
|  unit_short_title  | string | Единица измерения для продажи  |
|  service_unit_id  | number  | ID единицы измерения для списания  |
|  service_unit_short_title  | string | Единица измерения для списания  |
|  actual_cost  | float  | Себестоимость |
|  unit_actual_cost  | float  | Себестоимость единицы  |
|  unit_actual_cost_format  | string  | Формат себестоимости единицы  |
|  unit_equals  | float  |  Отношение единицы измерения для продажик еденице за списание  |
|  barcode  | number  | Штрих-код  |
|  actual_amounts  | array  | Остатки на складах  |
|  is_barcode  | number  | Товар по штрих-коду  |
|  last_change_date  | string  | Дата последнего изменения сущности  |

Объект из actual_amounts имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  storage_id  | number  | ID склада  |
|  amount  | number  | Количество  |


## Получение товаров [/goods/{company_id}/{good_id}{?term,page,count,category_id,changed_after,changed_before}]
### Получить товары [GET]
+ term: Наименование, артикул или штрих-код
+ page (number, `1`) - Номер страницы (не используется, если передан good_id)
+ count (number, `25`) - Количество товаров на странице (не используется, если передан good_id)
+ category_id (number, `777`) - Id категории товаров (не используется, если передан good_id)
+ changed_after (string) - фильтрация товаров, измененных/созданных начиная с конкретной даты и времени (не используется, если передан good_id)
+ changed_before (string) - фильтрация товаров, измененных/созданных до конкретной даты и времени (не используется, если передан good_id)

+ Parameters

    + company_id (required, number) - ID компании
    + good_id (optional, number) - ID товара
    + term (optional, string) - наименование, артикул или штрих-код
    + page:1 (optional, number) - номер страницы
    + count:25 (optional, number) - количество товаров на странице
    + category_id (optional, number) - Id категории товаров
    + changed_after:`2017-01-01T12:00:00` (optional, string) - фильтрация товаров, измененных/созданных начиная с конкретной даты и времени
    + changed_before:`2017-01-01T12:00:00+0400` (optional, string) - фильтрация товаров, измененных/созданных до конкретной даты и времени


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "title": "Шампунь 1",
                    "value": "Шампунь 1",
                    "label": "Шампунь 1 (123)",
                    "good_id": "123456",
                    "cost": "100500",
                    "unit_id": "4835",
                    "unit_short_title": "шт",
                    "service_unit_id": "3548",
                    "service_unit_short_title": "гр",
                    "actual_cost": "1050",
                    "unit_actual_cost": "105",
                    "unit_actual_cost_format": "105 р",
                    "unit_equals": "10",
                    "barcode": "123",
                    "actual_amounts": [
                        {
                            "storage_id": "987",
                            "amount": "1000000"
                        }
                    ]
                    "last_change_date": "2017-01-01T12:00:00+0400",
                  }
                ],
                "meta": []
            }



# Group Категории товаров

Объект категории товаров имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | id категории  |
|  title  | string  | Название категории  |

## Список категорий товаров [/goods_categories/{company_id}/{parent_category_id}]
### Получить список категорий товаров [GET]
+ Parameters

    + company_id (required, number) - ID компании
    + parent_category_id (optional, number) - ID родительской категории товара. По умолчанию 0 - выводятся категории верхнего уровня


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "1",
                    "title": "Категория 1",
                  },
                  {
                    "id": "2",
                    "title": "Категория 2",
                  },
                ],
                "meta": []
            }

## Список категорий товаров по идентификатору [/goods_categories/multiple/{company_id}?ids[]={id}]
### Получить список категорий товаров [GET]
+ Parameters

    + company_id (required, number) - ID компании
    + id: 1 (optional, number) - ID товарной категории (можно указать несколько дополнительными параметрами `&ids[]={id}`


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "1",
                    "title": "Категория 1",
                  },
                  {
                    "id": "2",
                    "title": "Категория 2",
                  },
                ],
                "meta": []
            }


## Список товаров и товарных категорий [/goods/search/{company_id}?term={search_term}&count={max_count}]

Список **товаров и товарных категорий** можно получить, сделав запрос с указанием идентификатора филиала.
Список можно отфильтровать по названию или артикулу категории товаров, по названию, артикулу или штрихкоду товара, передав параметр `search_term`.
Количество результатов ограничивается параметром `max_count`.

Если `search_term` не передан, выводится список корневых категорий филиала без учета `max_count`. Если `search_term` передан, сначала производится поиск по категориям, затем (если найдено меньше, чем `max_count`) - по товарам

Список представляет собой массив [элементов дерева товаров](#good-category-tree-node).

<a name="good-category-tree-node"></a>
**Элемент дерева товаров** имеет следующую структуру:

| Поле          | Тип     | Описание                                                                                    |
| --------------| ------- | ------------------------------------------------------------------------------------------- |
|  parent_id    | number  | Идентификатор родительского элемента (0 для корневых элементов)                             |
|  item_id      | number  | Идентификатор товара (0, если элемент - категория)                                          |
|  category_id  | number  | Идентификатор товарной категории (0, если элемент - товар)                                  |
|  title        | string  | Название товара или товарной категории                                                      |
|  is_chain     | boolean | Является ли элемент привязанным к сети? true - элемент привязан к сети, false - не привязан |
|  is_category  | boolean | Является ли элемент категорией? true - категория, false - товар                             |
|  is_item      | boolean | Является ли элемент товаром? true - товар, false - категория                                |


### Пример запроса на получение списка [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + search_term (optional, string) - поисковый запрос по названию, артикулу или штрихкоду
    + max_count: (optional, number) - количество выводимых строк на странице. Максимум 100
        + Default: `25`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "parent_id": 0,
                    "item_id": 0,
                    "category_id": 123,
                    "title": "Корневая категория 1",
                    "is_chain": true,
                    "is_category": true,
                    "is_item": false
                },
                {
                    "parent_id": 0,
                    "item_id": 0,
                    "category_id": 456,
                    "title": "Корневая категория 2",
                    "is_chain": true,
                    "is_category": true,
                    "is_item": false
                }
            ],
            "meta": {
                "count": 2
            }
        }


## Состав товарной категории [/goods/category_node/{company_id}/{category_id}?page={page}&count={count}]

Информацию по товарной категории и ее потомкам можно получить, сделав запрос с указанием идентификатора филиала и товарной категории.
Поддерживается постраничный вывод, задаваемый параметрами `page` и `count`.

**Состав товарной категории** имеет следующую структуру:

| Поле            | Тип     | Описание                                                                                            |
| ----------------| ------- | --------------------------------------------------------------------------------------------------- |
|  parent_id      | number  | Идентификатор родительского элемента (0 для корневых элементов)                                     |
|  item_id        | number  | Идентификатор товара (всегда 0)                                                                     |
|  category_id    | number  | Идентификатор товарной категории                                                                    |
|  title          | string  | Название товарной категории                                                                         |
|  is_chain       | boolean | Является ли элемент привязанным к сети? true - элемент привязан к сети, false - не привязан         |
|  is_category    | boolean | Является ли элемент категорией? всегда true                                                         |
|  is_item        | boolean | Является ли элемент товаром? всегда false                                                           |
|  children       | Array of objects([Элемент дерева товаров](#good-category-tree-node)) | Дочерние элементы товарной категории |
|  children_count | number  | Полное число дочерних товаров и категорий (без рекурсии)                                            |


### Пример запроса на получение состава категории [GET]

+ Parameters
    + company_id (required, number) - ID компании
    + category_id (required, number) - ID товарной категории
    + page: 1 (optional, number) - номер страницы
    + count: (optional, number) - количество выводимых товаров на странице. Максимум 1000
        + Default: `1000`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": {
                "parent_id": 0,
                "item_id": 0,
                "category_id": 123,
                "title": "Корневая категория 1",
                "is_chain": false,
                "is_category": true,
                "is_item": false,
                "children": [
                    {
                       "parent_id": 123,
                       "item_id": 0,
                       "category_id": 456,
                       "title": "Дочерняя категория",
                       "is_chain": false,
                       "is_category": true,
                       "is_item": false
                    },
                    {
                       "parent_id": 123,
                       "item_id": 789,
                       "category_id": 0,
                       "title": "Дочерний товар",
                       "is_chain": false,
                       "is_category": false,
                       "is_item": true
                    }
                ],
                "children_count": 2
            }
        }



# Group Технологические карты и расходники

Объект технологической карты имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | id тех карты  |
|  title  | string  | Название тех карты  |
|  technological_card_items  | array  | Список расходников тех карты |

## Список тех карт филиала [/technological_cards/{company_id}/{?search,page,count}]
### Получить список тех карт [GET]
+ Parameters

    + company_id (required, number) - ID филиала
    + search:'test' (optional, string) - параметр для поиска по названию тех карты
    + page:1 (optional, number) - номер страницы
    + count:20 (optional, number) - количество тех карт на странице

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID тех карты
        + title (required, string) - Название тех карты
        + technological_card_items (required, array[TechnologicalCardItemsArray]) - Массив расходников тех карты

    + Body

            {
                "success": true,
                "data": [
                  {
                    "id": "1",
                    "title": "Тех карта 1",
                    "technological_card_items" : [
                        {
                            "id": 3,
                            "technological_card_id": 1,
                            "storage_id": 4234,
                            "good_id": 34234,
                            "amount": 12,
                            "unit": "л",
                            "price": 0.0742,
                            "title": "Расходник 3"
                        }
                    ]
                  },
                  {
                    "id": "2",
                    "title": "Тех карта 2",
                    "technological_card_items": [
                        {
                            "id": 4,
                            "technological_card_id": 2,
                            "storage_id": 4234,
                            "good_id": 34235,
                            "amount": 10,
                            "unit": "л",
                            "price": 0.02412,
                            "title": "Расходник 4"
                        }
                    ]
                  },
                ],
                "meta": []
            }

## Технологическая карта для связи сотрудник-услуга [/technological_cards/default_for_staff_and_service/{company_id}/{staffId}/{serviceId}/]
### Получить тех карту для связи сотрудник услуга [GET]
+ Parameters

    + company_id (required, number) - ID филиала
    + staffId (required, number) - ID сотрудника
    + serviceId (required, number) - ID услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + id (required, number) - ID тех карты
        + title (required, string) - Название тех карты
        + technological_card_items (required, array[TechnologicalCardItemsArray]) - Массив расходников тех карты

    + Body
          {
              "success": true,
              "data": {
                "id": "1",
                "title": "Тех карта 1",
                "technological_card_items" : [
                    {
                        "id": 3,
                        "technological_card_id": 1,
                        "storage_id": 4234,
                        "good_id": 34234,
                        "amount": 12,
                        "unit": "л",
                        "price": 0.0742,
                        "title": "Расходник 3"
                    }
                ]
              },
              "meta": []
          }

## Технологические карты и расходники записи [/technological_cards/record_consumables/{company_id}/{record_id}/]
### Получить список тех карт и расходников записи [GET /technological_cards/record_consumables/{company_id}/{record_id}/]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes
        + service_id (required, number) - ID услуги записи
        + record_id (required, number) - ID записи
        + technological_cards (required, array[TechnologicalCardsArray]) - Массив технологических карт для связи запись-услуга
        + consumables (required, array[Consumables]) - Массив расходников для связи запись-услуга

    + Body

            {
                "success": true,
                "data": [
                  {
                      "service_id": 21558,
                      "record_id": 1233243,
                      "technological_cards": [
                          {
                              "id": 36069,
                              "title": "Тех карта",
                              "technological_card_items": [
                                  {
                                      "id": 208568,
                                      "technological_card_id": 36069,
                                      "storage_id": 91303,
                                      "good_id": 6858783,
                                      "amount": 10,
                                      "price": 1000,
                                      "good": {
                                          "id": 6858783,
                                          "title": "Товар",
                                          "unit": "г"
                                      }
                                  }
                              ]
                          }
                      ],
                      "consumables": [
                          {
                              "goods_transaction_id": 2180771,
                              "record_id": 121793129,
                              "service_id": 695486,
                              "storage_id": 91303,
                              "good_id": 6858783,
                              "price": 1000,
                              "amount": 10,
                              "good": {
                                  "id": 6858783,
                                  "title": "Товар",
                                  "unit": "г"
                              }
                          }
                      ]
                  },
                ],
                "meta": []
            }

### Применить технологическую карту к связи запись-услуга [POST /technological_cards/record_consumables/technological_cards/{company_id}/{record_id}/{service_id}]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи
    + service_id (required, number) - ID услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body
        {
            "technological_card_id": 3254960,
        }

    + Attributes
        + technological_card_id (required, number) - ID тех карты

+ Response 200 (application/json)

    + Attributes
        + service_id (required, number) - ID услуги записи
        + record_id (required, number) - ID записи
        + technological_cards (required, array[TechnologicalCardsArray]) - Массив технологических карт для связи запись-услуга
        + consumables (required, array[Consumables]) - Массив расходников для связи запись-услуга

    + Body

            {
                "success": true,
                "data": [
                  {
                      "service_id": 21558,
                      "record_id": 1233243,
                      "technological_cards": [
                          {
                              "id": 36069,
                              "title": "Тех карта",
                              "technological_card_items": [
                                  {
                                      "id": 208568,
                                      "technological_card_id": 36069,
                                      "storage_id": 91303,
                                      "good_id": 6858783,
                                      "amount": 10,
                                      "price": 1000,
                                      "good": {
                                          "id": 6858783,
                                          "title": "Товар",
                                          "unit": "г"
                                      }
                                  }
                              ]
                          }
                      ],
                      "consumables": [
                          {
                              "goods_transaction_id": 2180771,
                              "record_id": 121793129,
                              "service_id": 695486,
                              "storage_id": 91303,
                              "good_id": 6858783,
                              "price": 1000,
                              "amount": 10,
                              "good": {
                                  "id": 6858783,
                                  "title": "Товар",
                                  "unit": "г"
                              }
                          }
                      ]
                  },
                ],
                "meta": []
            }

### Удалить технологическую из связи запись-услуга [DELETE /technological_cards/record_consumables/technological_cards/{company_id}/{record_id}/{service_id}/?{delete_consumables}]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи
    + service_id (required, number) - ID услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Attributes
        + delete_consumables (optional, number) - удалить ли расходники вместе с удалением тех карты. По умолчанию 0

+ Response 200 (application/json)

    + Attributes
        + service_id (required, number) - ID услуги записи
        + record_id (required, number) - ID записи
        + technological_cards (required, array[TechnologicalCardsArray]) - Массив технологических карт для связи запись-услуга
        + consumables (required, array[Consumables]) - Массив расходников для связи запись-услуга

    + Body

            {
                "success": true,
                "data": [
                  {
                      "service_id": 21558,
                      "record_id": 1233243,
                      "technological_cards": [
                          {
                              "id": 36069,
                              "title": "Тех карта",
                              "technological_card_items": [
                                  {
                                      "id": 208568,
                                      "technological_card_id": 36069,
                                      "storage_id": 91303,
                                      "good_id": 6858783,
                                      "amount": 10,
                                      "price": 1000,
                                      "good": {
                                          "id": 6858783,
                                          "title": "Товар",
                                          "unit": "г"
                                      }
                                  }
                              ]
                          }
                      ],
                      "consumables": [
                          {
                              "goods_transaction_id": 2180771,
                              "record_id": 121793129,
                              "service_id": 695486,
                              "storage_id": 91303,
                              "good_id": 6858783,
                              "price": 1000,
                              "amount": 10,
                              "good": {
                                  "id": 6858783,
                                  "title": "Товар",
                                  "unit": "г"
                              }
                          }
                      ]
                  },
                ],
                "meta": []
            }

### Изменить список расходников связи запись-услуга [PUT /technological_cards/record_consumables/consumables/{company_id}/{record_id}/{service_id}/]
+ Parameters

    + company_id (required, number) - ID филиала
    + record_id (required, number) - ID записи
    + service_id (required, number) - ID услуги

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body
        {
            "consumables":
                [
                    {
                        "record_id": 121793129,
                        "service_id":695486,
                        "storage_id": 91303,
                        "good_id": 6858783,
                        "amount": 10
                    }
                ]
        }

    + Attributes
        + consumables (required, array[Consumables]) - список применяемых расходников

+ Response 200 (application/json)

    + Attributes
        + service_id (required, number) - ID услуги записи
        + record_id (required, number) - ID записи
        + technological_cards (required, array[TechnologicalCardsArray]) - Массив технологических карт для связи запись-услуга
        + consumables (required, array[Consumables]) - Массив расходников для связи запись-услуга

    + Body

            {
                "success": true,
                "data": [
                  {
                      "service_id": 21558,
                      "record_id": 1233243,
                      "technological_cards": [
                          {
                              "id": 36069,
                              "title": "Тех карта",
                              "technological_card_items": [
                                  {
                                      "id": 208568,
                                      "technological_card_id": 36069,
                                      "storage_id": 91303,
                                      "good_id": 6858783,
                                      "amount": 10,
                                      "price": 1000,
                                      "good": {
                                          "id": 6858783,
                                          "title": "Товар",
                                          "unit": "г"
                                      }
                                  }
                              ]
                          }
                      ],
                      "consumables": [
                          {
                              "goods_transaction_id": 2180771,
                              "record_id": 121793129,
                              "service_id": 695486,
                              "storage_id": 91303,
                              "good_id": 6858783,
                              "price": 1000,
                              "amount": 10,
                              "good": {
                                  "id": 6858783,
                                  "title": "Товар",
                                  "unit": "г"
                              }
                          }
                      ]
                  },
                ],
                "meta": []
            }

# Group Товарные транзакции

Объект товарной транзакции имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id | number  |  ID транзакции  |
|  document_id | number  |  ID документа |
|  type_id  | number  | ID типа транзакции  |
|  type  | string  | Тип транзакции  |
|  good  | good  | Товар  |
|  storage  | storage  | Склад  |
|  unit  | unit  | Единица измерения  |
|  operation_unit_type  | number  | Тип единицы измерения: 1 - для продажи, 2 - для списания  |
|  create_date  | string | Дата создания  |
|  last_change_date  | string | Дата последнего изменения  |
|  cost_per_unit  | float  | Цена за единицу  |
|  cost  | float | Цена  |
|  discount  | float  | Скидка |
|  master  | master  | Сотрудник  |
|  supplier  | supplier  | Поставщик  |
|  service  | service  |  Услуга  |
|  client  | client  | Клиент  |

Объект good имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID товара  |
|  title  | string  | Наименование  |

Объект storage имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID  склада  |
|  title  | string  | Наименование  |

Объект unit имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID  склада  |
|  title  | string  | Единица измерения  |

Объект master имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID сотрудника  |
|  title  | string  | Имя сотрудника  |

Объект supplier имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID поставщика  |
|  title  | string  | Имя поставщика  |

Объект service имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID услуги  |
|  title  | string  | Название услуги  |

Объект client имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  | ID клиента  |
|  name  | string  | Имя клиента  |
|  phone  | string  | Телефон клиента  |


## Поиск товарных транзакций [/storages/transactions/{company_id}{?page,count,start_date,end_date,document_id}]
### Поиск товарных транзакций [GET]

+ Parameters

    + company_id (required, number) - ID компании
    + page:1 (optional, number) - номер страницы
    + count:20 (optional, number) - количество транзакций на странице
    + start_date:'' (optional, string) - дата начала периода
    + end_date:'' (optional, string) - дата окончания периода
    + document_id: (optional, string) - ID документа
    + changed_after:`2000-01-01T00:00:00` (optional, string) - Фильтрация товарных транзакций, измененных/созданных начиная с конкретной даты и времени
    + changed_before:`2020-12-31T23:59:59` (optional, string) - Фильтрация товарных транзакций, измененных/созданных до конкретной даты и времени



+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 123456789,
                        "document_id": 22256643,
                        "type_id": "987654321",
                        "type": "Нечто",
                        "good": {
                            id: "111222333",
                            title: "Something"
                        },
                        "storage": {
                            id: "333222111",
                            title: "Storage 1"
                        },
                        "unit": {
                            id: "333222111",
                            title: "миллилитр"
                        },
                        "operation_unit_type": 1,
                        "create_date": "2012-12-21T19:08:00+0400",
                        "last_change_date": "2020-02-01T12:00:00+0400",
                        "cost_per_unit": "1.07",
                        "cost": "0.00",
                        "discount": "10.00",
                        "master": {
                            id: "112233445",
                            title: "Василий Иванов"
                        },
                        "supplier": {
                            id: "11112222",
                            title: "Best Supplier Ever"
                        },
                        "record_id": 1,
                        "service": {
                            id: "1234321",
                            title: "Услуга 4"
                        },
                        "clients": {
                            id: "4321234",
                            name: "Джордж Смит",
                            phone: "+79876543210"
                        }
                    }
                ],
                "meta": []
            }


## Создание товарной транзакции [/storage_operations/goods_transactions/{company_id}]
### Создать транзакцию [POST]

+ Parameters

    + company_id (required, number) - ID компании

+ Attributes

    + document_id (required, number)- ID документа
    + good_id (required, number) - ID товара
    + amount  (required, number)- количество
    + cost_per_unit (required, number) - стоимость за единицу товара
    + discount (required, number) - скидка в %
    + cost (required, number) - итоговая сумма транзакции
    + operation_unit_type (required, number) - тип единицы измерения: 1 - для продажи, 2 - для списания
    + master_id (optional, number) - ID мастера продавшего товар
    + client_id (optional, number) - ID клиента купившего товар
    + supplier_id (optional, number) - ID поставщика
    + comment (optional, string) - коммент
    + paid (optional, boolean) - признак оплаты
    + account_id (optional, number) - касса в которую происходит оплата

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "document_id": 22254960,
                "good_id": 232674,
                "amount": 1,
                "cost_per_unit": 100,
                "discount": 10,
                "cost": 90,
                "operation_unit_type": 1,
                "master_id": 26781,
                "client_id": 0,
                "supplier_id": 0,
                "comment": "Transaction comment"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 3428010,
                    "document_id": 22254960,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "company_id": 4564,
                    "good_id": 232674,
                    "amount": -1,
                    "cost_per_unit": 100,
                    "discount": 10,
                    "cost": 90,
                    "unit_id": 1,
                    "storage_id": 36539,
                    "supplier_id": 0,
                    "client_id": 0,
                    "master_id": 26781,
                    "create_date": "2017-04-25 21:50:01",
                    "last_change_date": "2020-02-01T12:00:00+0400",
                    "comment": "Transaction comment",
                    "deleted": false,
                    "good": {
                        "id": 232674,
                        "title": "Edition De Luxe"
                    },
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "supplier": [],
                    "client": [],
                    "master": {
                        "id": "26781",
                        "name": "Анджелина Джоли"
                    },
                    "unit": {
                        "id": 1,
                        "title": "Штука"
                    }
                },
                "meta": []
            }

## Операции над товарной транзакцией [/storage_operations/goods_transactions/{company_id}/{transaction_id}]
### Получение транзакции [GET]

+ Parameters

    + company_id (required, number) - ID компании
    + transaction_id (required, number)- ID транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 3428010,
                    "document_id": 22254960,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "company_id": 4564,
                    "good_id": 232674,
                    "amount": -1,
                    "cost_per_unit": 100,
                    "discount": 10,
                    "cost": 90,
                    "unit_id": 1,
                    "operation_unit_type": 1,
                    "storage_id": 36539,
                    "supplier_id": 0,
                    "client_id": 0,
                    "master_id": 26781,
                    "create_date": "2017-04-25 21:50:01",
                    "last_change_date": "2020-02-01T12:00:00+0400",
                    "comment": "Transaction comment",
                    "deleted": false,
                    "good": {
                        "id": 232674,
                        "title": "Edition De Luxe"
                    },
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "supplier": [],
                    "client": [],
                    "master": {
                        "id": "26781",
                        "name": "Анджелина Джоли"
                    },
                    "unit": {
                        "id": 1,
                        "title": "Штука"
                    }
                },
                "meta": []
            }

### Обновление транзакции [PUT]

+ Parameters

    + transaction_id (required, number)- ID транзакции
    + company_id (required, number) - ID компании

+ Attributes
    + document_id (required, number) - ID документа
    + good_id (required, number) - ID товара
    + amount  (required, number) - количество
    + cost_per_unit (required, number) - стоимость за единицу товара
    + discount (required, number) - скидка в %
    + cost (required, number) - итоговая сумма транзакции
    + operation_unit_type (required, number) - тип единицы измерения: 1 - для продажи, 2 - для списания
    + master_id (optional, number) - ID мастера продавшего товар
    + client_id (optional, number) - ID клиента купившего товар
    + supplier_id (optional, number) - ID поставщика
    + comment (optional, string) - коммент
    + paid (optional, boolean) - признак оплаты
    + account_id (optional, number) - касса в которую происходит оплата

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 3428010,
                    "document_id": 22254960,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "company_id": 4564,
                    "good_id": 232674,
                    "amount": -1,
                    "cost_per_unit": 100,
                    "discount": 10,
                    "cost": 90,
                    "unit_id": 1,
                    "operation_unit_type": 1,
                    "storage_id": 36539,
                    "supplier_id": 0,
                    "client_id": 0,
                    "master_id": 26781,
                    "create_date": "2017-04-25 21:50:01",
                    "last_change_date": "2020-02-01T12:00:00+0400",
                    "comment": "Updated transaction comment",
                    "deleted": false,
                    "good": {
                        "id": 232674,
                        "title": "Edition De Luxe"
                    },
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "supplier": [],
                    "client": [],
                    "master": {
                        "id": "26781",
                        "name": "Анджелина Джоли"
                    },
                    "unit": {
                        "id": 1,
                        "title": "Штука"
                    }
                },
                "meta": []
            }

### Удаление транзакции [DELETE]

+ Parameters

    + company_id (required, number) - ID компании
    + transaction_id (required, number)- ID транзакции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 202

#Group Складские операции

## Складские операции [/storage_operations/operation/{company_id}]

Создание складской операции предполагает создание документа и нескольких товарных транзакций в рамках одного запроса  к API.
При указании признака оплаты создаются необходимые финансовые транзакции

### Создание складской операции [POST]

+ Parameters

    + company_id (required, number) - ID компании

+ Attributes

    + type_id (required, number) - тип документа (1 продажа, 3 приход, 4 списание, 5 перемещение)
    + storage_id (required, number) - ID склада
    + comment (optional, string) - комментарий
    + create_date (required, string) - дата создания документа
    + transactions (required, array) - массив объектов содержащих параметры транзакций, аналогично запросу на создание товарной транзакции
    + paid (optional, boolean) - признак оплаты
    + account_id (optional, number) - ID кассы в случае оплаты

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "type_id": 1,
                "comment": "test document comment",
                "create_date": "2017-04-25 14:00:00",
                "master_id": 0,
                "storage_id": 91271,
                "transactions": [
                    {
                        "good_id": 232674,
                        "operation_unit_type": 1,
                        "amount": 1,
                        "cost_per_unit": 100,
                        "discount": 10,
                        "cost": 90,
                        "client_id": 0,
                        "supplier_id": 0,
                        "comment": "test transaction comment"
                    }
                ]
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "document": {
                        "id": 22255506,
                        "type_id": 1,
                        "type": {
                            "id": 1,
                            "title": "Продажа товара"
                        },
                        "storage_id": 91271,
                        "user_id": 999290,
                        "company_id": 4564,
                        "number": 1254,
                        "comment": "test document comment",
                        "create_date": "2017-04-25 14:00:00",
                        "storage": {
                            "id": 91271,
                            "title": "Секретное место"
                        },
                        "company": {
                        "id": 4564,
                        "title": "Бизнес образец",
                        "country_id": 1,
                        "city_id": 2,
                        "timezone": 3,
                        "address": "",
                        "coordinate_lat": "25.247901",
                        "coordinate_lon": "55.275397399999974",
                        "logo": "https://yclients.com/uploads/s_120d9410f1472a4e6bdbafefe7eeba42.png",
                        "zip": "",
                        "phones": [],
                        "site": ""
                        },
                        "user": {
                            "id": "999290",
                            "name": "User name",
                            "phone": "70000000001"
                        }
                    },
                    "transactions": [
                        {
                            "id": 3428012,
                            "document_id": 22255506,
                            "type_id": 1,
                            "type": {
                                "id": 1,
                                "title": "Продажа товара"
                            },
                            "company_id": 4564,
                            "good_id": 232674,
                            "amount": -1,
                            "cost_per_unit": 100,
                            "discount": 10,
                            "cost": 90,
                            "unit_id": 1,
                            "storage_id": 91271,
                            "supplier_id": 0,
                            "client_id": 0,
                            "master_id": 0,
                            "create_date": "2017-04-25 14:00:00",
                            "comment": "test transaction comment",
                            "deleted": false,
                            "good": {
                                "id": 232674,
                                "title": "Edition De Luxe"
                            },
                            "storage": {
                                "id": 91271,
                                "title": "Секретное место"
                            },
                            "supplier": [],
                            "client": [],
                            "master": [],
                            "unit": {
                                "id": 1,
                                "title": "Штука"
                            }
                        }
                    ]
                },
                "meta": []
            }


#Group Документы складских операций

## Документ операции [/storage_operations/documents/{company_id}]
Документ операции является обьединяющей сущностью для товарных и финансовых транзакций.

### Создать документ [POST]

+ Parameters
    + company_id (required, number) - ID компании

+ Attributes
    + type_id (required, number) - тип документа (1 продажа, 3 приход, 7 списание)
    + storage_id (required, number) - ID склада
    + comment (optional, string) - комментарий
    + create_date (required, string) - дата проведения складской операции

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "type_id": 1,
                "comment": "Комментарий документа",
                "storage_id": 36539,
                "create_date": "2017-04-24 20:00:00"
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 22255503,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "storage_id": 36539,
                    "user_id": 999290,
                    "company_id": 4564,
                    "number": 1251,
                    "comment": "Document comment",
                    "create_date": "2017-04-24 20:00:00",
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "company": {
                        "id": 4564,
                        "title": "Бизнес образец",
                        "country_id": 1,
                        "city_id": 2,
                        "timezone": 3,
                        "address": "",
                        "coordinate_lat": "25.247901",
                        "coordinate_lon": "55.275397399999974",
                        "logo": "https://yclients.com/uploads/s_120d9410f1472a4e6bdbafefe7eeba42.png",
                        "zip": "",
                        "phones": [],
                        "site": ""
                    },
                    "user": {
                        "id": "999290",
                        "name": "User name",
                        "phone": "70000000001"
                    }
                },
                "meta": []
            }

## Операции над документом [/storage_operations/documents/{company_id}/{document_id}]
### Получить документ [GET]

+ Parameters

    + company_id (required, number) - ID компании
    + document_id (required, number) - ID документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 22255503,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "storage_id": 36539,
                    "user_id": 999290,
                    "company_id": 4564,
                    "number": 1251,
                    "comment": "Document comment",
                    "create_date": "2017-04-24 20:00:00",
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "company": {
                        "id": 4564,
                        "title": "Бизнес образец",
                        "country_id": 1,
                        "city_id": 2,
                        "timezone": 3,
                        "address": "",
                        "coordinate_lat": "25.247901",
                        "coordinate_lon": "55.275397399999974",
                        "logo": "https://yclients.com/uploads/s_120d9410f1472a4e6bdbafefe7eeba42.png",
                        "zip": "",
                        "phones": [],
                        "site": ""
                    },
                    "user": {
                        "id": "999290",
                        "name": "User name",
                        "phone": "70000000001"
                    }
                },
                "meta": []
            }

### Обновить документ [PUT /storage_operations/documents/{company_id}/{document_id}]

+ Parameters

    + company_id (required, number) - ID компании
    + document_id (required, number) - ID документа

+ Attributes

    + type_id (required, number) - тип документа (1 продажа, 3 приход, 7 списание)
    + storage_id (required, number) - ID склада
    + date_created (required, string) - дата создания документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "id": 22255503,
                    "type_id": 1,
                    "type": {
                        "id": 1,
                        "title": "Продажа товара"
                    },
                    "storage_id": 36539,
                    "user_id": 999290,
                    "company_id": 4564,
                    "number": 1251,
                    "comment": "Updated document comment",
                    "create_date": "2017-04-25 20:00:00",
                    "storage": {
                        "id": 36539,
                        "title": "Товары"
                    },
                    "company": {
                        "id": 4564,
                        "title": "Бизнес образец",
                        "country_id": 1,
                        "city_id": 2,
                        "timezone": 3,
                        "address": "",
                        "coordinate_lat": "25.247901",
                        "coordinate_lon": "55.275397399999974",
                        "logo": "https://yclients.com/uploads/s_120d9410f1472a4e6bdbafefe7eeba42.png",
                        "zip": "",
                        "phones": [],
                        "site": ""
                    },
                    "user": {
                        "id": "999290",
                        "name": "User name",
                        "phone": "70000000001"
                    }
                },
                "meta": []
            }

### Удалить документ [DELETE /storage_operations/documents/{company_id}/{document_id}]

+ Parameters

    + company_id (required, number) - ID компании
    + document_id (required, number) - ID документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 202 (application/json)

### Получить финансовые транзакции документа [GET /storage_operations/documents/finance_transactions/{document_id}]

+ Parameters

    + document_id (required, number) - ID документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                        {
                        "id": 9053737,
                        "date": "2017-04-04 20:00:00",
                        "type_id": 2640,
                        "expense_id": 2640,
                        "account_id": 35501,
                        "amount": 434,
                        "client_id": 4240788,
                        "master_id": 0,
                        "supplier_id": 0,
                        "comment": "Transaction comment",
                        "item_id": 0,
                        "target_type_id": 0,
                        "record_id": 0,
                        "expense": {
                            "id": 2640,
                            "title": "Оказание корпоративных услуг"
                        },
                        "account": {
                            "id": 35501,
                            "title": "Касса",
                            "type_id": 0,
                            "type": 0,
                            "comment": "",
                            "company_id": 4564
                        },
                        "client": {
                            "id": "4240788",
                            "name": "Client",
                            "phone": "71000000001"
                        },
                        "master": [],
                        "supplier": []
                    },
                    {
                        "id": 9053738,
                        "date": "2017-04-04 20:00:00",
                        "type_id": 2640,
                        "expense_id": 2640,
                        "account_id": 35501,
                        "amount": 434,
                        "client_id": 4240788,
                        "master_id": 0,
                        "supplier_id": 0,
                        "comment": "Transaction comment",
                        "item_id": 0,
                        "target_type_id": 0,
                        "record_id": 0,
                        "expense": {
                            "id": 2640,
                            "title": "Оказание корпоративных услуг"
                        },
                        "account": {
                            "id": 35501,
                            "title": "Касса",
                            "type_id": 0,
                            "type": 0,
                            "comment": "",
                            "company_id": 4564
                        },
                        "client": {
                            "id": "4240788",
                            "name": "Client",
                            "phone": "71000000001"
                        },
                        "master": [],
                        "supplier": []
                    }
                ],
                "meta": []
            }

### Получить товарные транзакции документа [GET /storage_operations/documents/goods_transactions/{document_id}]

+ Parameters

    + document_id (required, number) - ID документа

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 3728232,
                        "document_id": 22256643,
                        "type_id": 1,
                        "company_id": 4564,
                        "good_id": 587018,
                        "amount": -10,
                        "cost_per_unit": 100,
                        "discount": 0,
                        "cost": 1000,
                        "unit_id": 88272,
                        "operation_unit_type": 1,
                        "storage_id": 36539,
                        "supplier_id": 0,
                        "record_id": 0,
                        "client_id": 0,
                        "master_id": 49754,
                        "create_date": "2017-07-06 19:42:00",
                        "comment": "",
                        "service_id": 0,
                        "user_id": 3,
                        "deleted": false,
                        "pkg_amount": 0
                    },
                    {
                        "id": 3728233,
                        "document_id": 22256643,
                        "type_id": 1,
                        "company_id": 4564,
                        "good_id": 232674,
                        "amount": -10,
                        "cost_per_unit": 127.5,
                        "discount": 0,
                        "cost": 1275,
                        "unit_id": 1,
                        "operation_unit_type": 2,
                        "storage_id": 36539,
                        "supplier_id": 0,
                        "record_id": 0,
                        "client_id": 0,
                        "master_id": 49754,
                        "create_date": "2017-07-06 19:42:00",
                        "comment": "",
                        "service_id": 0,
                        "user_id": 3,
                        "deleted": false,
                        "pkg_amount": 0
                    }
                ],
                "meta": {
                    "count": 2
                }
            }


#Group Личные счета

## Операции с личными счетами [/deposits_operations/{salon_id}]

Создание операции с личным счётом предполагает создание документа, транзакции с личным счётом и финансовой транзакции в рамках одного запроса к API.

### Создание операции пополнения личного счёта [POST]

+ Parameters

    + salon_id (required, number) - ID филиала

+ Attributes

    + client_id (required, number) - ID клиента, владельца личного счёта
    + deposit_id (required, number) - ID личного счёта
    + amount (required, number) - сумма пополнения
    + master_id (optional, number) - ID сотрудника
    + account_id (required, number) - ID кассы для оплаты

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "client_id": 1,
                "deposit_id": 1,
                "amount": 100.50,
                "master_id": 1,
                "account_id": 1
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": {
                    "document": {
                        "id": 1,
                        "user_id": 1,
                        "salon_id": 1,
                        "type_id": 9,
                        "type": {
                            "id": 9,
                            "title": "Пополнение счета (аванс)"
                        },
                        "comment": "",
                        "number": 1,
                        "salon": {
                            "id": 1,
                            "title": "Филиал в Москве (Выползов 8)",
                            "public_title": "Филиал в Москве (Выползов 8)",
                            "business_group_id": 1,
                            "business_type_id": 1,
                            "country_id": 1,
                            "city_id": 2,
                            "timezone": 3,
                            "timezone_name": "Europe/Moscow",
                            "address": "Москва, Выползов переулок 8",
                            "coordinate_lat": 55.7794763,
                            "coordinate_lon": 37.6287021,
                            "logo": "http://yclients.com/images/icon.png",
                            "zip": "129090",
                            "phone": "79169887573",
                            "phones": [
                                "79169887573",
                                "79178335390"
                            ],
                            "site": "",
                            "allow_delete_record": true,
                            "allow_change_record": true
                        },
                        "user": {
                            "id": 1,
                            "name": "Вадим",
                            "phone": "79169887573"
                        }
                    },
                    "deposits_transactions": [
                        {
                            "id": 1,
                            "salon_id": 1,
                            "salon_group_id": 1,
                            "document_id": 1,
                            "deposit_id": 1,
                            "deposit_type_id": 1,
                            "master_id": 1,
                            "user_id": 1,
                            "amount": 100.50,
                            "comment": "",
                            "date_create": "2019-10-13T16:00:00.000000Z",
                            "deleted": false,
                            "date_delete": null,
                            "deposit": {
                                "id": 1,
                                "deposit_type_id": 1,
                                "salon_group_id": 1,
                                "initial_balance": 10000,
                                "balance": 12239.56,
                                "blocked": false,
                                "date_create": "2019-09-26T16:00:00.000000Z"
                            },
                            "deposit_type": {
                                "id": 1,
                                "salon_group_id": 1,
                                "title": "Тип счета 1",
                                "date_create": "2019-09-20T14:00:00.000000Z",
                                "deleted": false,
                                "date_delete": null
                            }
                        }
                    ],
                    "payment_transactions": [
                        {
                            "id": 1,
                            "document_id": 1,
                            "date": "2019-10-13 19:00:00",
                            "type_id": 10,
                            "expense_id": 10,
                            "account_id": 1,
                            "amount": 100.50,
                            "client_id": 1,
                            "master_id": 1,
                            "supplier_id": 0,
                            "comment": "",
                            "item_id": 1,
                            "target_type_id": 0,
                            "record_id": 0,
                            "goods_transaction_id": 0,
                            "type": {
                                "id": 10,
                                "title": "Пополнение счета"
                            }
                        }
                    ]
                },
                "meta": []
            }


# Group Страны
<a name="countries"></a>

Объект страны имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  |  ID страны  |
|  title  | string  | Краткое название страны  |
|  full_title  | string  | Полное название страны  |
|  phone_code  | number  | Телефонный код  |
|  phone_template  | string  | Шаблон номера телефона страны  |
|  phone_example  | string  | Пример номера телефона страны  |
|  currency  | string | Валюта |
|  exchange  | float  | Ставка обмена валют по отношению к рублю  |


## Получение стран [/countries]
### Получить список стран [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": "1",
                        "title": "Россия",
                        "full_title": "Российская Федерация",
                        "phone_code": "7",
                        "phone_template": "+7 xxx xxx-xx-xx",
                        "phone_example": "+7 981 123 45-67",
                        "currency": "₽",
                        "exchange": "1"
                    },
                    {
                        "id": "2",
                        "title": "Латвия",
                        "full_title": "Латвийская Республика",
                        "phone_code": "371",
                        "phone_template": "+371 xx xxx xxx",
                        "phone_example": "+371 21 654 987",
                        "currency": "€",
                        "exchange": "50"
                    },
                ],
                "meta": []
            }

# Group Города

Объект города имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  |  ID города  |
|  title  | string  | Краткое название города  |
|  country_id  | number  | ID страны  |

<a name="cities"></a>
## Получение городов [/cities?country_id=1&salon_id=1]
### Получить список городов [GET]

+ Parameters

    + country_id: 1 (optional, number) - ID страны, из которой нужно получить города
    + salon_id: 1 (optional, number) - ID филиала. Если передан, будет возвращен так же город филиала, независимо от того, относится он к указанной стране или нет

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

    + Body

        {
            "success": true,
            "data": [
                {
                  "id": 2,
                  "country_id": 1,
                  "title": "Москва"
                },
                {
                  "id": 1,
                  "country_id": 1,
                  "title": "Санкт-Петербург"
                },
                {
                  "id": 1040,
                  "country_id": 30,
                  "title": "Belfast"
                },
                {
                  "id": 1201,
                  "country_id": 38,
                  "title": "București"
                },
                {
                  "id": 1334,
                  "country_id": 31,
                  "title": "Budapest"
                },
            ],
            "meta": []
        }

# Group Изображения

## Обработка изображений [/images/{entity}]

+ Parameters

    + entity: "master" (optional, string) - название сущности (master/service)

### Загрузка изображения [POST]

Объект ответа имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  image_binded  | boolean  |  Статус привязки изображений к сущности  |
|  image_group  | object  | Объект группа изображений |

+ Parameters

    + entity: "master" (required, string) - название сущности (master/service)


+ Request (form-data)

    + salon_id (optional, number) - Id салона для привязки изображения (для entity=service)
    + service_id (optional, number) - Id услуги для привязки изображения (для entity=service)
    + master_id (optional, number) - Id сотрудника для привязки изображения (для entity=master)
    + image (required, file) - передаваемое изображение (image/jpeg, image/png)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (ImageGroup)
        + image_group (required, ImageGroup)

    + Body

            {
                "success": true,
                "data": {
                  "image_binded": false,
                  "image_group ": {
                    "id": 72256,
                    "entity": "",
                    "entity_id": 0,
                    "images": {
                      "basic": {
                        "id": 186826,
                        "path": "https://yclients.com/uploads/setting_service_image/c/cf/cf01a5585348731_20170328195919.jpeg",
                        "width": 373,
                        "height": 280,
                        "type": "jpeg",
                        "image_group_id": 72256,
                        "version": "basic"
                      }
                    }
                  }
                },
                "meta": []
            }

### Удаление изображений [DELETE]

Объект ответа имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  success  | boolean  |  Результат удаления  |

+ Request (form-data)

    + image_group_id (required, number) - Id группы изображения для удаления

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true
                "data": null,
                "meta": {
                    "message" : "Accepted"
                }
            }


# Group Сети салонов

## Список сетей [/groups]

### Получение доступных пользователю сетей [GET]

Объект сети салонов имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  |  Id сети салонов  |
|  title  | string  | Название сети салонов |
|  companies  | array  | Список салонов сети |
|  access  | object  | Объект с правами доступа для управления сетью |

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Attributes (UsersGroupsAccess)

        + access (required, UsersGroupsAccess) - Объект с правами доступа для управления сетью

    + Body

            {
              "success": true,
              "data": [
                {
                  "id": 509,
                  "title": "Сеть салонов в Санкт-Петербурге",
                  "companies": [
                    {
                      "id": 38726,
                      "title": "Салон в Санкт-Петербурге (Лиговский пр. 73)"
                    },
                    {
                      "id": 39287,
                      "title": "Салон в Санкт-Петербурге (Невский пр. 38)"
                    }
                  ],
                  "access": {
                    "settings_access": "1",
                    "clients_access": "1",
                    "users_access": "1",
                    "loyalty_access": "1",
                    "loyalty_cards_manual_transactions_access": "1",
                    "network_services_access": "1"
                  }
                },
                {
                  "id": 508,
                  "title": "Сеть салонов в Москве",
                  "companies": [
                    {
                      "id": 38545,
                      "title": "Салон в Москве (Тверская 33)"
                    },
                    {
                      "id": 38704,
                      "title": "Салон в Москве (Гагарина пл. 27)"
                    }
                  ],
                  "access": {
                    "settings_access": "1",
                    "clients_access": "1",
                    "users_access": "1",
                    "loyalty_access": "1",
                    "loyalty_cards_manual_transactions_access": "1",
                    "network_services_access": "1"
                  }
                }
            }


# Group Z-Отчет

Объект Z-Отчета имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  stats  |  stats  |  Общая статистика  |
|  paids  |  paids  |  Оплаты  |
|  z_data  |  z_data  |  Данные отчета  |
|  currency  |  string  |  Валюта  |

Объект stats имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  clients  |  integer  |  Количество клиентов  |
|  clients_average  |  float  |  Среддняя оплата по клиентам  |
|  records  |  integer  | Количество записей  |
|  records_average  |  float  |  Среддняя оплата по записям  |
|  visit_records  |  integer  |  Количество записей с клиентами  |
|  visit_records_average  |  float  |  Среддняя оплата по записям с клиентами  |
|  non_visit_records  |  integer  |  Количество записей без клиентов  |
|  non_visit_records_average  |  float  |  Среддняя оплата по записям без клиентов  |
|  targets  |  integer  |  Количество услуг  |
|  targets_paid  |  float  |  Оплата по услугам  |
|  goods  |  integer  |  Количество товаров  |
|  goods_paid  |  float  |  Оплата по товарам  |
|  certificates  |  integer  |  Количество сертификатов  |
|  certificates_paid  |  float  |  Оплата по сертификатам  |
|  abonement  |  integer  |  Количество абонементов  |
|  abonement_paid  |  float  |  Оплата по абонементам  |

Объект paids имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  accounts  |  array of paid  | Оплаты в кассы  |
|  discount  |  array of paid  | Оплата по скидке и лояльности  |
|  total  |  total_paid  |  Итог  |

Объект paid имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  title  |  string  |  Название кассы или тип скидки/лояльности  |
|  amount  |  float  |  Сумма оплаты  |

Объект total_paid имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  accounts  |  float  |  Общая сумма оплат в кассы  |
|  discount  |  float  |  Общая сумма скидок/лояльности  |

Объект z_data состоит из пар ключ-значение, где:
+ ключ - дата;
+ значение - объект client;

Объект client имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  client_id  |  integer  |  ID клиента (0, если клиент не из базы)  |
|  client_name  |  string  |  Имя клиента  |
|  client_phone  |  string  |  Номер телефона клиента  |
|  client_email  |  string  |  Email клиента  |
|  masters  |  array of master  |  Сотрудники  |

Объект master имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  master_id  |  integer  |  ID сотрудника  |
|  master_name  |  string  |  Имя сотрудника  |
|  service  |  array of operation  |  Услуги  |
|  good  |  array of operation  |  Товары  |
|  others  |  operation  |  Другие операции  |

Объект operation имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  item_title  |  string  |  Название услуги/товара  |
|  first_cost  |  integer  |  Цена  |
|  discount  |  integer  |  Скидка  |
|  result_cost  |  integer  |  К оплате  |
|  transactions  |  array of transaction  |  Оплаты  |

Объект transaction имеет следующие поля:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  accounts_amount  |  integer  |  Оплачено в кассу  |
|  loyalty_amount  |  integer  |  Оплачено по программе лояльности  |
|  payment_type  |  string  |  Тип оплаты  |

## Получение данных Z-Отчета [/reports/z_report/{company_id}{?start_date,master_id}]
### Получить данные Z-Отчета [GET]
+ start_date: Дата отчета
+ master_id: ID сотрудника

+ Parameters

    + company_id (required, integer) - ID компании
    + start_date:'' (optional, string) - дата начала периода
    + master_id:0 (optional, integer) - ID сотрудника


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
              "success": true,
              "data": {
                "stats": {
                  "clients": 7,
                  "clients_average": 123.45,
                  "records": 14,
                  "records_average": 4231.51,
                  "visit_records": 13,
                  "visit_records_average": 100500.01,
                  "non_visit_records": 1,
                  "non_visit_records_average": 200,
                  "targets": 14,
                  "targets_paid": 10255,
                  "goods": 4,
                  "goods_paid": 12452.18,
                  "certificates": 1,
                  "certificates_paid": 9876,
                  "abonement": 0,
                  "abonement_paid": 0
                },
                "paids": {
                  "accounts": [
                    {
                      "title": "Карты",
                      "amount": 6987
                    },
                    {
                      "title": "Наличные",
                      "amount": 54321.13
                    },
                    {
                      "title": "Касса",
                      "amount": 12531
                    }
                  ],
                  "discount": [
                    {
                      "title": "Предварительная скидка",
                      "amount": 1816.875
                    },
                    {
                      "title": "Списано бонусов",
                      "amount": 800
                    },
                    {
                      "title": "Скидка по акциям",
                      "amount": 123
                    }
                  ],
                  "total": {
                    "accounts": 2657.13,
                    "discount": 1241.875
                  }
                },
                "z_data": {
                  "2016-12-07 09:00:00": [
                    {
                      "client_id": "11223344",
                      "client_name": "John Smith",
                      "client_phone": "+7 999 888-77-66",
                      "client_email": "",
                      "masters": [
                        {
                          "master_id": "321123",
                          "master_name": "Robert Brown",
                          "service": [
                            {
                              "item_title": "Мелирование от 9 прядей",
                              "first_cost": 3500,
                              "discount": 0,
                              "result_cost": 3500,
                              "transactions": [
                                {
                                  "accounts_amount": 0,
                                  "loyalty_amount": 700,
                                  "payment_type": "Карта: Золотая карта"
                                },
                                {
                                  "accounts_amount": 0,
                                  "loyalty_amount": 100,
                                  "payment_type": "Карта: Золотая карта"
                                },
                                {
                                  "accounts_amount": 0,
                                  "loyalty_amount": 1,
                                  "payment_type": "Карта: Карта бонусная"
                                }
                              ]
                            }
                          ],
                          "good": [
                            {
                              "item_title": "Spray For Hair",
                              "first_cost": 15,
                              "discount": 2.25,
                              "result_cost": 12.75,
                              "transactions": [
                                {
                                  "accounts_amount": 12.75,
                                  "loyalty_amount": 0,
                                  "payment_type": "Наличные"
                                }
                              ]
                            }
                          ],
                          "others": {
                            "item_title": "Другие операции",
                            "first_cost": 347,
                            "discount": 0,
                            "result_cost": 347,
                            "transactions": [
                              {
                                "accounts_amount": 23,
                                "loyalty_amount": 0,
                                "payment_type": "Наличные"
                              },
                              {
                                "accounts_amount": 324,
                                "loyalty_amount": 0,
                                "payment_type": "Наличные"
                              }
                            ]
                          }
                        }
                      ]
                    }
                  ]
                },
                "currency": "₽"
              },
              "meta": []
            }

# Group Дополнительные поля

## Описание функционала и объекты API

### Описание

Дополнительные поля позволяют добавлять к отдельным объектам системы свойства заданного типа и впоследствии привязывать к этим полям значения, соответствующие данному типу. На данный момент функционал реализован для Записей и Клиентов.

Объекты Дополнительных полей:

|  Поле  |  Тип  |  Описание  |
| ------------- | ------------- | ------------- |
|  code  |  string  |  Код поля по которому устанавливаются значения для полей записи |
|  id  |  integer  |  Уникальный идентификатор поля  |
|  type  |  CustomFieldType  |  Тип поля |
|  show_in_ui  |  boolean  |  Показывать ли поле в интерфейсе|
|  title  |  string  | Название поля |
|  user_can_edit  |  boolean  | Можно ли редактировать в интерфейсе  |
|  values  |  array or null  | Список допустимых значений для типа "список" |

На данный момент поддерживаются следующие типы (поле code):
* text - строка длиной до 255 символов
* number - число
* select - список
* date - Дата (Y-m-d)
* datetime - Дата и время (Y-m-d H:i:s)

Следующие коды полей являются зарезервированными:

|  code  |  type  |  Описание  |
| ------------- | ------------- | ------------- |
|  yc_partner_public_key  |  text  |  Используется для определения партнера при создании записи, является более приоритетным, чем Bearer-токен из авторизации |

##Работа с доп полями [/custom_fields/{field_category}/{company_id}]
### Получение коллекции полей филиала [GET]

+ Parameters
    + field_category: record (required, string) - Категория полей.<br>
        - Для записей - record
        - Для клиентов - client <br>
    + company_id (required, integer) - ID компании


+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data": [
                    {
                        "id": 1,
                        "salon_id": 1,
                        "custom_field": {
                            "id": 1,
                            "code": "my_text_field",
                            "entity_type": null,
                            "show_in_ui": true,
                            "title": "поле для теста",
                            "user_can_edit": true,
                            "type": {
                              "code": "text",
                              "title": "Текст"
                            },
                            "values": null
                        }
                    }
                ],
                "meta": []
            }

### Добавление дополнительного поля [POST]

+ Parameters
    + field_category: record (required, string) - Категория полей.<br>
        - Для записей - record
        - Для клиентов - client <br>
    + company_id (required, integer) - ID компании

+ Attributes
    + type (required, string) - тип поля
    + code (required, string) - уникальный идентификатор поля
    + title (required, string) - название поля
    + user_can_edit (required, boolean) - может ли пользователь редактировать поле
    + show_in_ui (required, boolean) - показывать ли поля в интерфейсе

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "type": "text",
                "code": "my_text_field",
                "title": "поле для теста",
                "user_can_edit": true,
                "show_in_ui": true
            }

+ Response 200 (application/json)

    + Body

            {
                "success": true,
                "data":
                 {
                    "id": 1,
                    "salon_id": 1,
                    "custom_field": {
                        "id": 1,
                        "code": "my_text_field",
                        "entity_type": null,
                        "show_in_ui": true,
                        "title": "поле для теста",
                        "user_can_edit": true,
                        "type": {
                          "code": "text",
                          "title": "Текст"
                        },
                        "values": null
                    }
                },
                "meta": []
            }

##Работа с отдельным полем [/custom_fields/{field_category}/{company_id}/{field_id}]
### Обновление дополнительного поля [PUT]

+ Parameters
    + field_category: record (required, string) - Категория полей.<br>
        - Для записей - record
        - Для клиентов - client <br>
    + company_id (required, integer) - ID компании
    + field_id (required, integer) - ID поля

+ Attributes
    + type (string) - тип поля
    + code (string) - уникальный идентификатор поля
    + title (string) - название поля
    + user_can_edit (boolean) - может ли пользователь редактировать поле
    + show_in_ui (boolean) - игнорировать ошибки (занятость мастера/ресурсов и тд)

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

    + Body

            {
                "type": "text",
                "code": "my_text_field",
                "title": "поле для теста",
                "user_can_edit": true,
                "show_in_ui": true
            }

+ Response 204

### Удаление дополнительного поля из филиала [DELETE]

+ Parameters
    + field_category: record (required, string) - Категория полей.<br>
        - Для записей - record
        - Для клиентов - client <br>
    + company_id (required, integer) - ID компании
    + field_id (required, integer) - ID поля

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 204

# Group Отправка СМС через операторов

## Описание функционала и объекты API
Для отправки SMS, оператору необходимо предоставить адрес (url_operator), на который будут уходить запросы описанные ниже.
Авторизация запросов к API производится в соответствии с [RFC 6749 "Resource Owner Password Credentials Grant"](https://tools.ietf.org/html/rfc6749#section-4.3).
При запросах к API в HTTP заголовок Authorization должен быть включен ключ доступа в следующем формате:
Ключ авторизации (partner_token) должен быть указан в настройках модуля уведомлений компании.

```
Authorization: Bearer <partner token>
```

## Отправка СМС [/]

В случае ошибки возвращается ее HTTP-код. В некоторых случаях также возвращается текстовое описание ошибки.
Все методы API могут возвращать следующие коды ошибок:

|  Error code  |  Http status code  |  Название  |  Описание  |
| ------------- | ------------- | ------------- | ------------- |
|  5  |  400  |  ENTITY_VALIDATION_ERROR  |  Тело запроса не прошло валидацию  |
|  10  |  400  |  FIELD_VALIDATION_ERROR  |  Параметр не прошел валидацию  |
|  32  |  200  |  FIELD_VALIDATION_ERROR  |  Недостаточно средств  |
|  15  |  403  |  ACCESS_FORBIDDEN  |  Действие недоступно, у приложения нет требуемых разрешений.  |
|  20  |  401  |  INVALID_PARTNER_TOKEN  |  partner_token отсутствует или невалиден  |
|  30  |  404  |  RESOURCE_NOT_FOUND  |  Ресурс по запрошенному пути не существует  |

### Отправка СМС [POST]

+ Attributes
    + destination_params (required, object) - объект, содержащий параметры ИД отправки и номер телефона
    + from (required, string) - имя отправителя
    + text (required, string) - текст отправления
    + type (required, string) - тип отправления (sms, viber)
    + dispatch_type (required, string) - тип рассылки (service - сервисная, adds - рекламная)
    + delivery_callback_url (required, string) - url, на который приходят статусы сообщений

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

            {
                "destination_params": [
                    {
                        "id": "232674",
                        "phone": "71000000002"
                    }
                ],
                "from": "yclients",
                "text": "поле для текста",
                "type": "sms",
                "dispatch_type": "service",
                "delivery_callback_url": "https://api.yclients.com/api/v1/delivery/status"
            }

+ Response 200 (application/json)

    + Body

            [
                {
                    "id": "232674",
                    "ext_id": "609aff0fca92466d6a1747dd83f05943a8c9600d"
                }
            ]

+ Response 200 (application/json)

    + Body

            [
                {
                    "id": "232674",
                    "error_code": 32,
                    "error_message": "explicit error message"
                }
            ]

+ Response 400 (application/json)

    + Body

            {
                "error_code": 10,
                "errors": [
                    {
                        "field_name": "some string",
                        "field_value": "some string",
                        "error_message": "explicit error message"
                    },
                    {
                        "field_name": "some string",
                        "field_value": "some string",
                        "error_message": "explicit error message"
                    }

                ]
            }

+ Response 400 (application/json)

    + Body

            {
                "error_code": 5,
                "error_message": "explicit error message"
            }

+ Response 401 (application/json)

    + Body

            {
                "error_code": 20,
                "error_message": "explicit error message"
            }

+ Response 404 (application/json)

    + Body

            {
                "error_code": 30,
                "error_message": "explicit error message"
            }


## Получение статусов сообщений [/delivery/status]

|  Номер  |  Название  |
| ------------- | ------------- |
|  1  |  Доставлено  |
|  2  |  Не доставлено  |
|  4  |  Отправлено на телефон  |
|  8  |  Передано оператору  |
|  16  |  Отклонено оператором  |
|  52  |  Недостаточно средств  |

В случае ошибки возвращается ее HTTP-код. В некоторых случаях также возвращается текстовое описание ошибки.
Все методы API могут возвращать следующие коды ошибок:

|  Error code  |  Http status code  |  Название  |  Описание  |
| ------------- | ------------- | ------------- | ------------- |
|  5  |  400  |  ENTITY_VALIDATION_ERROR  |  Тело запроса не прошло валидацию  |
|  10  |  400  |  FIELD_VALIDATION_ERROR  |  Параметр не прошел валидацию  |
|  15  |  403  |  ACCESS_FORBIDDEN  |  Действие недоступно, у приложения нет требуемых разрешений.  |
|  20  |  401  |  INVALID_PARTNER_TOKEN  |  partner_token отсутствует или невалиден  |
|  30  |  404  |  RESOURCE_NOT_FOUND  |  Ресурс по запрошенному пути не существует  |

## Получение статусов сообщений [POST]
При отправке смс в запросе передается атрибут delivery_callback_url - это url, на который должны приходить статусы сообщений.

Используйте его для отправки статусов сообщений.  Url, на который должны приходить статусы сообщений - https://yclients.com/smsprovider/status/callback/{partner_token}

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

            [
                {
                    "id": "232674",
                    "status": 1
                }
            ]

+ Response 200 (application/json)

    + Body

            {
                 "success": true
            }

+ Response 400 (application/json)

    + Body

            {
                "error_code": 10,
                "errors": [
                    {
                        "field_name": "some string",
                        "field_value": "some string",
                        "error_message": "explicit error message"
                    },
                    {
                        "field_name": "some string",
                        "field_value": "some string",
                        "error_message": "explicit error message"
                    }

                ]
            }

+ Response 400 (application/json)

    + Body

            {
                "error_code": 5,
                "error_message": "explicit error message"
            }

+ Response 401 (application/json)

    + Body

            {
                "error_code": 20,
                "error_message": "explicit error message"
            }

+ Response 404 (application/json)

    + Body

            {
                "error_code": 30,
                "error_message": "explicit error message"
            }


# Group Лицензии

При наличии лицензии у компании
объект лицензии имеет следующие поля:

| Поле  | Тип | Описание |
| ------------- | ------------- | ------------- |
|  id  | number  |  ID лицензии  |
|  salon_id  | number  | ID компании  |
|  staff_limit  | number  | Количество сотрудников (0 - не ограничено)  |
|  deactivation_date  | string  | Дата деактивации  |
|  start_date  | string  | Дата начала лицензии  |
|  name  | string  | Название тарифа лицензии  |
|  active  | boolean | Активность |
|  options  | array | Массив подключенных опций |

## Информация о лицензии [/license/{company_id}]

+ Параметры
    + company_id (required, number, `1`) - ID компании

### Получение информация о лицензии компании [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)


    + Attributes (LicenseOption)
        + id (required, number)
        + salon_id (required, number)
        + staff_limit (required, number)
        + deactivation_date (required, string)
        + start_date (required, string)
        + name (required, string)
        + active (required, number)
        + options (required, array[LicenseOption])

    + Body

          {
              "success": true,
              "data":  {
                    "id": 1,
                    "salon_id": 4523464,
                    "staff_limit": 5,
                    "deactivation_date": "08.11.2019",
                    "start_date": "07.05.2018",
                    "name": "Старт",
                    "active": 1,
                    "options": [
                        {
                            "id": 3,
                            "title": "Онлайн-оплата"
                        }
                    ]
              },
              "meta": []
          }

# Group Правила обработки персональных данных

В соответствии с Федеральным законом №152-ФЗ «О персональных данных» от 27.07.2006 г. компании могут заполнить
текст согласия на обработку персональных данных. Текст согласия отображается перед непосредственным подтверждением записи.

## Информация о правилах обработки персональных данных [/privacy_policy/{company_id}]

+ Параметры
    + company_id (required, number, `1`) - ID компании

### Получение информация о правилах обработки персональных данных компании [GET]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

    + Body

          {
              "success": true,
              "data": {
                  "agreement": {
                      "content": "текст соглашения"
                  }
              },
              "meta": []
          }

# Group Валидация данных

## Валидация номера телефона [/validation/validate_phone/{phone}]

Происходит проверка переданного номера телефона на соответствие правилам YCLIENTS.

### Проверка формата номера телефона [GET]

+ Parameters
    + phone (required, string) - Проверяемый номер телефона в формате `+71234567890` или `71234567890`

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token, User user_token

+ Response 200 (application/json)

    + Body

          {
              "success": true,
              "data": {
                  "is_valid": true
              },
              "meta": []
          }


# Group Фискализация чеков

Система YCLIENTS позволяет партнерам реализовывать API фискализации чеков. В систему добавляется партнер, реализовавший этот API.
После этого у тех пользователей YCLIENTS, которые находятся в той же стране, что и партнер, появляется возможность выбрать
этого партнера в списке возможных решений для фискализации чеков.
Для того, чтобы партнер был добавлен в список возможных решений, он должен связаться с YCLIENTS посредством email: **partner@yclients.tech**.

## Процесс фискализации [/https://your-api.url]

YCLIENTS создает [документ продажи](#fiscalization-sale-document), и отправляет его на сервер фискализации по адресу, указанному партнером.
Отвечая на HTTP-запрос, сервер фискализации должен вернуть HTTP-ответ со статусом **200** в том случае, если документ успешно получен
и передан в обработку, либо со статусом **400** в случае ошибки.
Тело ответа должно содержать данные [определенного формата](#fiscalization-response),
описывающие текущий [статус документа](#fiscalization-response-status).
При обновлении статуса сервер фискализации должен отправить [callback запрос](#fiscalization-callback) с данными того же [формата](#fiscalization-response).

<a name="fiscalization-sale-document"></a>
**Документ продажи** имеет следующую структуру:

+ Структура документа (json):

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "date": "2020-07-31T14:11:36+04:00",
            "document_id": 239083104,
            "type": "sale",
            "print_receipt": true,
            "customer": {
                "email": "customer@example.com",
                "phone": "91111111111"
            },
            "positions": [
                {
                    "type": "service",
                    "title": "Consultation",
                    "price": 10.5,
                    "quantity": 1.0,
                    "discount_amount": 2.5,
                    "vat": "ru_vat_10",
                    "payment_method": "payment",
                    "barcode": "12345"
                }
            ],
            "payments": [
                {
                    "type": "card",
                    "sum": 5.5
                },
                {
                    "type": "cash",
                    "sum": 4.5
                },
                {
                    "type": "prepaid",
                    "sum": 0.5
                }
            ],
            "tax": "ru_osn",
            "cashier": {
                "uid": "4895-9395-0133195612a4",
                "name": "John Smith",
                "position": "Cashier"
            },
            "pos": {
                "enabled": true,
                "slip_count": 2
            },
            "callback_url": "https://yclients.com/api/v1/integration/kkm/callback/",
            "custom_text": "some custom text"
        }

**Описание полей структуры документа:**

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  id              | integer          | Уникальный идентификатор документа продажи |
|  date            | string           | Дата и время отправки документа на печать (в формате ISO-8601) |
|  document_id     | integer          | Внутренний идентификатор документа в системе YCLIENTS |
|  type            | enum(string)     | Тип документа ([список возможных значений](#fiscalization-print-request-type)) |
|  print_receipt   | boolean          | Печатать ли бумажный чек на кассе при фискализации |
|  customer        | object([Customer](#fiscalization-print-request-customer)) | Сущность клиента |
|  positions       | Array of objects([Position](#fiscalization-print-request-position)[]) | Список позиций в чеке |
|  payments        | Array of objects([Payment](#fiscalization-print-request-payment)[]) | Список оплат, применяемых на чек |
|  tax             | enum(string)     | Тип системы налогообложения (**slug** из [списка систем налогообложения](#fiscalization-tax)) |
|  cashier         | object([Cashier](#fiscalization-print-request-cashier)) | Сущность кассира |
|  pos             | object([POS](#fiscalization-print-request-pos)) | Опции для подключенного POS-терминала |
|  callback_url    | string           | Ссылка для [обновления статуса фискализации](#fiscalization-callback) |
|  custom_text     | string \| null   | Произвольный текст для печати на чеке |


<a name="fiscalization-print-request-type"></a>
**Тип документа**

| Значение  | Описание      |
| --------- | ------------- |
|  sale     | Приход        |
|  return   | Возврат прихода |


<a name="fiscalization-print-request-customer"></a>
**Сущность клиента** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  email           | string \| null   | E-mail клиента           |
|  phone           | string \| null   | Телефон клиента          |


<a name="fiscalization-print-request-position"></a>
**Позиция в чеке** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  type            | enum(string)     | Тип позиции ("**service**" — услуга / "**commodity**" — товар / "**payment**" — платеж) |
|  title           | string           | Название позиции |
|  price           | float            | Цена позиции с точностью 2 знака после запятой |
|  quantity        | float            | Количество |
|  discount_amount | float            | Скидка, примененная к позиции с точностью 2 знака после запятой |
|  vat             | enum(string)     | Тип НДС (**slug** из [списка НДС](#fiscalization-vat)) |
|  payment_method  | enum(string)     | Признак расчета ("**payment**" — оплата / "**prepayment**" — предоплата) |
|  barcode         | string \| null   | Штрихкод товара |


<a name="fiscalization-print-request-payment"></a>
**Оплата, применяемая на чек**, имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  type            | enum(string)     | Тип оплаты ("**card**" - безналичная оплата / "**cash**" — оплата наличными / "**prepaid**" — предварительная оплата) |
|  sum             | float            | Сумма оплаты с точностью 2 знака после запятой |


<a name="fiscalization-print-request-cashier"></a>
**Сущность кассира** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  id              | string           | Уникальный идентификатор кассира |
|  name            | string           | Имя кассира              |
|  position        | string           | Должность кассира (максимальная длина строки – 64 символа) |


<a name="fiscalization-print-request-pos"></a>
**Опции для подключенного POS-терминала** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  enabled         | boolean          | Надо ли перед фискализацией принять карту через POS-терминал |
|  slip_count      | integer          | Количество чеков, которые необходимо распечатать после успешной транзакции по POS-терминалу |


<a name="fiscalization-response"></a>
**Ответ**, описывающий текущий статус документа, должен содержать идентификатор документа, текущий статус фискализации,
соответствующий статусу [код ответа](#fiscalization-response-code),
а также произвольное сообщение, которое может быть показано пользователю или использовано для отладки (например, сообщние об ошибке).

**Ответ** должен иметь следующую структуру:

+ Структура ответа (json):

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "status": "error",
            "code": 2002,
            "message": "Кассовое оборудование недоступно по причине..."
        }

**Описание полей структуры ответа:**

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  id              | integer          | Уникальный идентификатор [документа продажи](#fiscalization-sale-document) |
|  status          | enum(string)     | Статус печати чека ([список возможных значений](#fiscalization-response-status)) |
|  code            | enum(integer)    | Код ошибки ([список возможных значений](#fiscalization-response-code)) |
|  message         | string           | Детальное сообщние, которое может быть показано пользователю (например, сообщние об ошибке) |


<a name="fiscalization-response-status"></a>
**Статус печати чека**

Статус **pending** должен быть отправлен в ответ на запрос фискализации документа в том случае, если документ успешно получен и находится в обработке.
Статус **success** может быть отправлен в [callback](#fiscalization-callback) только при обновлении статуса документа, уже находящегося в статусе **pending**.
В случае ошибки статус **error** может быть отправлен как в ответ на запрос фискализации документа, так и в [callback](#fiscalization-callback)

| Значение  | Описание      |
| --------- | ------------- |
|  success  | Документ успешно фискализирован (отрпавляется в [callback](#fiscalization-callback)) |
|  pending  | Документ получен и находится в обработке (отправляется в ответ на запрос фискализации документа) |
|  error    | Произошла ошибка |


<a name="fiscalization-response-code"></a>
**Код ошибки** (код результата обработки запроса)

| Значение  | Соответсвует статусу   | Описание      |
| --------- | ---------------------- | ------------- |
|  0        | "success" \| "pending" | Без ошибок    |
|  1001     | "error"                | Ошибка данных документа |
|  1002     | "error"                | Ошибка в позициях документа |
|  1003     | "error"                | Ошибка в оплатах документа |
|  1004     | "error"                | Ошибка в данных клиента |
|  1005     | "error"                | Ошибка в данных кассира |
|  2001     | "error"                | Ошибка кассового оборудования |
|  2002     | "error"                | Кассовое оборудование недоступно |

### Пример запроса на фискализацию документа [POST]

+ Request (application/json)

    + Headers
        Accept: application/json
        Content-Type: application/json
        Authorization: Bearer authorization_token

    + Body

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "date": "2020-07-31T14:11:36+04:00",
            "document_id": 239083104,
            "type": "sale",
            "print_receipt": true,
            "customer": {
                "email": "customer@example.com",
                "phone": "91111111111"
            },
            "positions": [
                {
                    "type": "service",
                    "title": "Consultation",
                    "price": 13.19,
                    "quantity": 1,
                    "discount_amount": 2.54,
                    "vat": "ru_vat_10",
                    "payment_method": "payment",
                    "barcode": "12345"
                }
            ],
            "payments": [
                {
                    "type": "card",
                    "sum": 5.55
                },
                {
                    "type": "cash",
                    "sum": 4.55
                },
                {
                    "type": "prepaid",
                    "sum": 0.55
                }
            ],
            "tax": "ru_osn",
            "cashier": {
                "uid": "4895-9395-0133195612a4",
                "name": "John Smith",
                "position": "Cashier"
            },
            "pos": {
                "enabled": true,
                "slip_count": 2
            },
            "callback_url": "https://yclients.com/api/v1/integration/kkm/callback/",
            "custom_text": "some custom text"
        }

+ Response 200 (application/json)

    + Body

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "status": "success",
            "code": 0,
            "message": "OK"
        }

## Callback обновления статуса документа [/integration/kkm/callback/]
<a name="fiscalization-callback"></a>

При обновлении статуса документа сервер фискализации должен отправить HTTP-запрос с данными [определенного формата](#fiscalization-response) на адрес,
указанный в поле "**callback_url**" [документа](#fiscalization-sale-document).

### Пример запроса в случае успешной фискализации [POST]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "status": "success",
            "code": 0,
            "message": "OK"
        }

+ Response 200 (application/json)

### Пример запроса в случае ошибки [POST]

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

    + Body

        {
            "id": "d72fece5-6825-4895-9395-0133195612a4",
            "status": "error",
            "code": 2002,
            "message": "Кассовое оборудование недоступно по причине..."
        }

+ Response 200 (application/json)


## Системы налогообложения и НДС [/integration/kkm/references/tax_system/{countryId}]


Список доступных для страны **систем налогообложения** и **НДС** можно получить, сделав запрос с указанием идентификатора страны, для которой необходимо получить список.
Идентификатор страны можно получить из [списка стран](#countries).

Список представляет собой массив [систем налогообложения](#fiscalization-tax) со вложенным массивом [НДС](#fiscalization-vat) для каждой системы налогообложения.

<a name="fiscalization-tax"></a>
**Cистема налогообложения** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  title           | string           | Название системы налогообложения |
|  slug            | string           | Кодовое название системы налогообложения |
|  vats            | Array of objects([Vat](#fiscalization-vat)[]) | Список доступных НДС для системы налогообложения |

<a name="fiscalization-vat"></a>
**НДС** имеет следующую структуру:

| Поле             | Тип              | Описание                 |
| -----------------| ---------------- | ------------------------ |
|  title           | string           | Название НДС             |
|  slug            | string           | Кодовое название НДС     |


### Пример запроса на получение списка [GET]

+ Parameters
    + countryId: `1` (required, number) - ID страны

+ Request (application/json)

    + Headers

            Accept: application/vnd.yclients.v2+json
            Authorization: Bearer partner_token

+ Response 200 (application/json)

    + Body
        {
            "success": true,
            "data": [
                {
                    "title": "Общая ОСН",
                    "slug": "ru_osn",
                    "vats": [
                        {
                            "title": "0%",
                            "slug": "ru_vat_0"
                        },
                        {
                            "title": "10%",
                            "slug": "ru_vat_10"
                        },
                        {
                            "title": "20%",
                            "slug": "ru_vat_20"
                        },
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                },
                {
                    "title": "Упрощенная УСН (Доход)",
                    "slug": "ru_usn",
                    "vats": [
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                },
                {
                    "title": "Упрощенная УСН (Доход минус Расход)",
                    "slug": "ru_usnr",
                    "vats": [
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                },
                {
                    "title": "Единый налог на вмененный доход ЕНВД",
                    "slug": "ru_envd",
                    "vats": [
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                },
                {
                    "title": "Единый сельскохозяйственный налог ЕСН",
                    "slug": "ru_esn",
                    "vats": [
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                },
                {
                    "title": "Патентная система налогообложения",
                    "slug": "ru_psn",
                    "vats": [
                        {
                            "title": "не облагается",
                            "slug": "ru_vat_none"
                        }
                    ]
                }
            ],
            "meta": {
                "count": 6
            }
        }
